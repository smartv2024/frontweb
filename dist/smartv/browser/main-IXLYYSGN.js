import{Aa as b,B as c,Ca as T,D as Q,E as Z,Ea as V,F as i,Fa as F,G as r,Ga as A,H as l,Ha as z,Ia as N,K as O,L as h,M as u,O as oe,P as ie,Q as re,Qa as D,R as S,Ra as _e,S as d,Ta as be,U as x,W as C,Wa as we,X as P,Y as M,Ya as xe,_ as J,da as ae,db as Ce,ea as se,g as $,ga as L,j as ee,l as te,la as de,m as ne,ma as le,n as E,na as ce,o as I,p as G,pa as pe,q as g,qa as ge,r as f,ra as fe,sa as me,ua as ue,v as s,va as y,w,x as v,y as R,ya as K,z as _,za as he}from"./chunk-OYHSLV3I.js";var ke=["videoPlayer"],Pe=o=>({"is-invalid":o});function Se(o,e){if(o&1&&(i(0,"div",41),l(1,"i",42),d(2),r()),o&2){let t=u();s(2),x(" ",t.errorMessage," ")}}function Ee(o,e){o&1&&(i(0,"span"),l(1,"i",43),d(2," Sign In "),r())}function Ie(o,e){o&1&&l(0,"div",44)}function Re(o,e){if(o&1){let t=O();i(0,"button",45),h("click",function(){g(t);let a=u();return f(a.toggleSound())}),l(1,"i",46),r()}if(o&2){let t=u();Q("unmuted",!t.isMuted),s(),Q("fa-volume-mute",t.isMuted)("fa-volume-up",!t.isMuted)}}function Le(o,e){if(o&1&&(i(0,"div",63),l(1,"i",64),d(2),r()),o&2){let t=u(2);s(2),x(" ",t.forgotPasswordSuccess," ")}}function Te(o,e){if(o&1&&(i(0,"div",41),l(1,"i",42),d(2),r()),o&2){let t=u(2);s(2),x(" ",t.forgotPasswordError," ")}}function Ve(o,e){o&1&&(i(0,"span"),d(1,"Reset Password"),r())}function Fe(o,e){o&1&&l(0,"span",65)}function Ae(o,e){if(o&1){let t=O();i(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"h5",51),d(5,"Reset Password"),r(),i(6,"button",52),h("click",function(){g(t);let a=u();return f(a.closeForgotPasswordModal())}),d(7,"\xD7"),r()(),i(8,"div",53)(9,"form",54,2),h("ngSubmit",function(){g(t);let a=u();return f(a.onForgotPasswordSubmit())}),_(11,Le,3,1,"div",55)(12,Te,3,1,"div",23),i(13,"div",24)(14,"label",56),d(15,"Email Address"),r(),i(16,"div",26)(17,"span",27),l(18,"i",57),r(),i(19,"input",58),M("ngModelChange",function(a){g(t);let m=u();return P(m.resetEmail,a)||(m.resetEmail=a),f(a)}),r()()(),i(20,"div",59)(21,"button",60),h("click",function(){g(t);let a=u();return f(a.closeForgotPasswordModal())}),d(22," Cancel "),r(),i(23,"button",61),_(24,Ve,2,0,"span",37)(25,Fe,1,0,"span",62),r()()()()()()()}if(o&2){let t=S(10),n=u();s(11),c("ngIf",n.forgotPasswordSuccess),s(),c("ngIf",n.forgotPasswordError),s(7),C("ngModel",n.resetEmail),c("disabled",n.isResetting),s(4),c("disabled",!t.form.valid||n.isResetting),s(),c("ngIf",!n.isResetting),s(),c("ngIf",n.isResetting)}}var j=class o{constructor(e,t,n){this.authService=e;this.router=t;this.cdRef=n}videoPlayer;_isMuted=!0;_username="";_password="";_errorMessage="";_isLoading=!1;_showForgotPasswordModal=!1;_resetEmail="";_isResetting=!1;_forgotPasswordError="";_forgotPasswordSuccess="";destroy$=new $;videoLoaded=!1;get isMuted(){return this._isMuted}set isMuted(e){this._isMuted=e}get username(){return this._username}set username(e){this._username=e}get password(){return this._password}set password(e){this._password=e}get errorMessage(){return this._errorMessage}set errorMessage(e){this._errorMessage=e}get isLoading(){return this._isLoading}set isLoading(e){this._isLoading=e}get showForgotPasswordModal(){return this._showForgotPasswordModal}set showForgotPasswordModal(e){this._showForgotPasswordModal=e}get resetEmail(){return this._resetEmail}set resetEmail(e){this._resetEmail=e}get isResetting(){return this._isResetting}set isResetting(e){this._isResetting=e}get forgotPasswordError(){return this._forgotPasswordError}set forgotPasswordError(e){this._forgotPasswordError=e}get forgotPasswordSuccess(){return this._forgotPasswordSuccess}set forgotPasswordSuccess(e){this._forgotPasswordSuccess=e}testRes=!1;ngOnInit(){this.addPreconnect()}ngAfterViewInit(){setTimeout(()=>this.initializeVideo(),100),this.setupEventListeners()}addPreconnect(){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(location.origin).origin,document.head.appendChild(e)}initializeVideo(){if(!this.videoPlayer)return;let e=this.videoPlayer.nativeElement;e.defaultMuted=!0,e.muted=!0,e.preload="metadata";let t=new IntersectionObserver(n=>{n.forEach(a=>{a.isIntersecting&&(e.preload="auto",this.playVideoWithRetry(),this.videoLoaded=!0,t.disconnect())})},{threshold:.1});t.observe(e)}playVideoWithRetry(){if(!this.videoPlayer)return;let e=this.videoPlayer.nativeElement;(()=>{e.play().catch(n=>{console.log("Video autoplay failed:",n)})})()}setupEventListeners(){document.addEventListener("click",()=>this.playVideoWithRetry(),{once:!0,passive:!0}),document.addEventListener("touchstart",()=>this.playVideoWithRetry(),{once:!0,passive:!0}),ee(window,"resize").pipe(te(150),ne(this.destroy$)).subscribe(()=>{this.optimizeVideoForViewport()})}optimizeVideoForViewport(){if(!this.videoPlayer||!this.videoLoaded)return;let e=this.videoPlayer.nativeElement;({width:window.innerWidth,height:window.innerHeight}).width<=768&&e.currentTime===0&&(e.currentTime=.1)}onSubmit(){this.isLoading||(this.isLoading=!0,this.errorMessage="",this.authService.login({username:this.username,password:this.password}).subscribe({next:e=>{this.isLoading=!1,this.authService.forcePasswordChange?this.router.navigate(["/changepwd"]):this.router.navigate(["/admin"])},error:e=>{this.isLoading=!1,e.status===403?this.errorMessage="Your account is inactive. Please contact administrator.":this.errorMessage=e.error?.message||"An error occurred during login"}}))}openForgotPasswordModal(){this.showForgotPasswordModal=!0,this.resetEmail="",this.forgotPasswordError="",this.forgotPasswordSuccess=""}closeForgotPasswordModal(){this.showForgotPasswordModal=!1,this.isResetting&&(this.isResetting=!1),setTimeout(()=>{this.resetEmail="",this.forgotPasswordError="",this.forgotPasswordSuccess=""},300)}onForgotPasswordSubmit(){!this.resetEmail||this.isResetting||(this.isResetting=!0,this.forgotPasswordError="",this.forgotPasswordSuccess="",this.testRes=!1,this.authService.resetPassword(this.resetEmail).subscribe({next:e=>{this.isResetting=!1,this.testRes=!0,this.forgotPasswordSuccess=e.message||"Password reset email sent successfully",this.cdRef.markForCheck()},error:e=>{this.isResetting=!1,this.testRes=!1,this.forgotPasswordError=e.error?.message||"Failed to reset password. Please try again.",this.cdRef.markForCheck()}}))}toggleSound(){if(!this.videoPlayer||!this.videoLoaded)return;let e=this.videoPlayer.nativeElement;this.isMuted=!this.isMuted,e.muted=this.isMuted,e.play().catch(t=>{console.error(this.isMuted?"Playback failed while muting:":"Unmute failed:",t),this.isMuted||(this.isMuted=!0,e.muted=!0)})}ngOnDestroy(){if(this.destroy$.next(),this.destroy$.complete(),this.videoPlayer){let e=this.videoPlayer.nativeElement;e.pause(),e.src="",e.load()}}static \u0275fac=function(t){return new(t||o)(w(b),w(y),w(ae))};static \u0275cmp=v({type:o,selectors:[["app-login"]],viewQuery:function(t,n){if(t&1&&oe(ke,5),t&2){let a;ie(a=re())&&(n.videoPlayer=a.first)}},standalone:!1,decls:51,vars:15,consts:[["videoPlayer",""],["loginForm","ngForm"],["forgotPasswordForm","ngForm"],[1,"login-container"],[1,"animated-text-container"],[1,"text-spawn","text-spawn-1"],[1,"text-spawn","text-spawn-5"],[1,"shapes"],[1,"shape","shape-1"],[1,"shape","shape-5"],[1,"shape","shape-9"],[1,"shape","shape-13"],[1,"video-background"],["src","https://perfumatic-faicel.vercel.app/aroma-video.mp4","loop","","playsinline","","loading","lazy","preload","none","fetchpriority","low",2,"width","100%","height","100%","object-fit","cover","position","absolute","top","0","left","0",3,"muted"],[1,"form-wrapper"],[1,"form-container"],[1,"logo-container"],["src","https://iili.io/2gvDOlt.th.png","alt","Logo","loading","eager","fetchpriority","high","width","120","height","120",1,"logo"],[1,"form-header"],[1,"subtitle"],[1,"form-shapes"],[1,"form-shape","form-shape-1"],[1,"login-form",3,"ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["for","email"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-user"],["id","email","type","text","name","email","placeholder","Enter your user name","required","","autocomplete","username",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","password"],[1,"fas","fa-lock"],["id","password","type","password","name","password","placeholder","Enter your password","required","","autocomplete","current-password",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"forgot-password-link"],["href","javascript:void(0)",3,"click"],[1,"fas","fa-key"],["type","submit",1,"btn-submit",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["class","sound-toggle-btn","aria-label","Toggle sound",3,"unmuted","click",4,"ngIf"],["class","modal show",4,"ngIf"],[1,"alert","alert-danger"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-sign-in-alt"],[1,"spinner"],["aria-label","Toggle sound",1,"sound-toggle-btn",3,"click"],[1,"fas"],[1,"modal","show"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],["class","alert alert-success",4,"ngIf"],["for","resetEmail"],[1,"fas","fa-envelope"],["id","resetEmail","type","email","name","resetEmail","required","","email","","placeholder","Enter your email address","autocomplete","email",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border-sm",4,"ngIf"],[1,"alert","alert-success"],[1,"fas","fa-check-circle"],[1,"spinner-border-sm"]],template:function(t,n){if(t&1){let a=O();i(0,"div",3)(1,"div",4)(2,"div",5),d(3,"AROMAMASTER"),r(),i(4,"div",6),d(5,"AROMAMASTER"),r()(),i(6,"div",7),l(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11),r(),i(11,"div",12),l(12,"video",13,0),r(),i(14,"div",14)(15,"div",15)(16,"div",16),l(17,"img",17),r(),i(18,"div",18)(19,"h2"),d(20,"Welcome Back! \u{1F44B}"),r(),i(21,"p",19),d(22,"Sign in to continue to your account"),r()(),i(23,"div",20),l(24,"div",21),r(),i(25,"form",22,1),h("ngSubmit",function(){return g(a),f(n.onSubmit())}),_(27,Se,3,1,"div",23),i(28,"div",24)(29,"label",25),d(30,"User name"),r(),i(31,"div",26)(32,"span",27),l(33,"i",28),r(),i(34,"input",29),M("ngModelChange",function(p){return g(a),P(n.username,p)||(n.username=p),f(p)}),r()()(),i(35,"div",24)(36,"label",30),d(37,"Password"),r(),i(38,"div",26)(39,"span",27),l(40,"i",31),r(),i(41,"input",32),M("ngModelChange",function(p){return g(a),P(n.password,p)||(n.password=p),f(p)}),r()()(),i(42,"div",33)(43,"a",34),h("click",function(){return g(a),f(n.openForgotPasswordModal())}),l(44,"i",35),d(45," Forgot Password? "),r()(),i(46,"button",36),_(47,Ee,3,0,"span",37)(48,Ie,1,0,"div",38),r()()()(),_(49,Re,2,6,"button",39),r(),_(50,Ae,26,7,"div",40)}if(t&2){let a,m,p=S(26);s(12),c("muted",n.isMuted),s(15),c("ngIf",n.errorMessage),s(7),C("ngModel",n.username),c("ngClass",J(11,Pe,p.submitted&&((a=p.form.get("email"))==null?null:a.invalid))),s(7),C("ngModel",n.password),c("ngClass",J(13,Pe,p.submitted&&((m=p.form.get("password"))==null?null:m.invalid))),s(5),c("disabled",!p.form.valid||n.isLoading),s(),c("ngIf",!n.isLoading),s(),c("ngIf",n.isLoading),s(),c("ngIf",n.videoLoaded),s(),c("ngIf",n.showForgotPasswordModal)}},dependencies:[se,L,N,T,V,F,D,_e,z,A],styles:['[_ngcontent-%COMP%]:root{--primary-color: #2c3e50;--secondary-color: #34495e;--accent-color: #ff6b6b}.login-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;width:100%;overflow:hidden}.form-container[_ngcontent-%COMP%]{width:100%;max-width:440px;padding:2.5rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);box-shadow:0 20px 40px #0000004d;position:relative;overflow:hidden;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:20px;contain:content}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.logo[_ngcontent-%COMP%]{width:120px;height:auto;filter:drop-shadow(0 4px 8px rgba(0,0,0,.2));animation:_ngcontent-%COMP%_floatLogo 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_floatLogo{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.shapes[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;z-index:1}.shape[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:#ffffff14;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.shape-1[_ngcontent-%COMP%]{width:400px;height:400px;top:-200px;left:-200px;animation:_ngcontent-%COMP%_float 25s infinite}.shape-2[_ngcontent-%COMP%]{width:350px;height:350px;top:40%;right:-175px;animation:_ngcontent-%COMP%_float 28s infinite -7s}.shape-3[_ngcontent-%COMP%]{width:300px;height:300px;bottom:-150px;left:40%;animation:_ngcontent-%COMP%_float 22s infinite -11s}.shape-4[_ngcontent-%COMP%]{width:380px;height:380px;top:20%;left:-190px;animation:_ngcontent-%COMP%_float 24s infinite -15s}.shape-5[_ngcontent-%COMP%]{width:320px;height:320px;top:10%;right:5%;animation:_ngcontent-%COMP%_float 26s infinite -9s}.shape-6[_ngcontent-%COMP%]{width:280px;height:280px;bottom:10%;right:15%;animation:_ngcontent-%COMP%_float 23s infinite -13s}.shape-7[_ngcontent-%COMP%]{width:360px;height:360px;top:35%;left:10%;animation:_ngcontent-%COMP%_float 27s infinite -5s}.shape-8[_ngcontent-%COMP%]{width:340px;height:340px;bottom:25%;left:25%;animation:_ngcontent-%COMP%_float 29s infinite -8s}.shape-9[_ngcontent-%COMP%]{width:310px;height:310px;top:5%;left:35%;animation:_ngcontent-%COMP%_float 21s infinite -12s}.shape-10[_ngcontent-%COMP%]{width:290px;height:290px;bottom:15%;right:30%;animation:_ngcontent-%COMP%_float 24s infinite -17s}.shape-11[_ngcontent-%COMP%]{width:200px;height:200px;top:45%;left:45%;animation:_ngcontent-%COMP%_floatReverse 20s infinite}.shape-12[_ngcontent-%COMP%]{width:180px;height:180px;top:15%;right:25%;animation:_ngcontent-%COMP%_floatReverse 22s infinite -6s}.shape-13[_ngcontent-%COMP%]{width:220px;height:220px;bottom:35%;left:15%;animation:_ngcontent-%COMP%_floatReverse 18s infinite -9s}.shape-14[_ngcontent-%COMP%]{width:160px;height:160px;top:60%;right:40%;animation:_ngcontent-%COMP%_floatReverse 24s infinite -13s}.shape-15[_ngcontent-%COMP%]{width:240px;height:240px;bottom:20%;left:35%;animation:_ngcontent-%COMP%_floatReverse 21s infinite -11s}.shape-small[_ngcontent-%COMP%]{background:#ffffff1f;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.shape-16[_ngcontent-%COMP%]{width:100px;height:100px;top:25%;left:55%;animation:_ngcontent-%COMP%_bounce 15s infinite}.shape-17[_ngcontent-%COMP%]{width:80px;height:80px;top:40%;right:15%;animation:_ngcontent-%COMP%_bounce 17s infinite -4s}.shape-18[_ngcontent-%COMP%]{width:120px;height:120px;bottom:45%;left:20%;animation:_ngcontent-%COMP%_bounce 14s infinite -7s}.shape-19[_ngcontent-%COMP%]{width:90px;height:90px;top:70%;right:25%;animation:_ngcontent-%COMP%_bounce 16s infinite -9s}.shape-20[_ngcontent-%COMP%]{width:110px;height:110px;bottom:30%;left:45%;animation:_ngcontent-%COMP%_bounce 18s infinite -5s}.shape-tiny[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.shape-21[_ngcontent-%COMP%]{width:40px;height:40px;top:35%;left:60%;animation:_ngcontent-%COMP%_particle 10s infinite}.shape-22[_ngcontent-%COMP%]{width:30px;height:30px;top:55%;right:20%;animation:_ngcontent-%COMP%_particle 12s infinite -3s}.shape-23[_ngcontent-%COMP%]{width:35px;height:35px;bottom:40%;left:25%;animation:_ngcontent-%COMP%_particle 9s infinite -6s}.shape-24[_ngcontent-%COMP%]{width:25px;height:25px;top:75%;right:35%;animation:_ngcontent-%COMP%_particle 11s infinite -8s}.shape-25[_ngcontent-%COMP%]{width:45px;height:45px;bottom:25%;left:50%;animation:_ngcontent-%COMP%_particle 13s infinite -4s}@keyframes _ngcontent-%COMP%_float{0%{transform:translate(0) rotate(0)}25%{transform:translate(50px,50px) rotate(90deg)}50%{transform:translateY(100px) rotate(180deg)}75%{transform:translate(-50px,50px) rotate(270deg)}to{transform:translate(0) rotate(360deg)}}@keyframes _ngcontent-%COMP%_floatReverse{0%{transform:translate(0) rotate(0)}25%{transform:translate(-40px,40px) rotate(-90deg)}50%{transform:translateY(80px) rotate(-180deg)}75%{transform:translate(40px,40px) rotate(-270deg)}to{transform:translate(0) rotate(-360deg)}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-30px) scale(.95)}}@keyframes _ngcontent-%COMP%_particle{0%,to{transform:translate(0) scale(1)}25%{transform:translate(20px,-20px) scale(1.1)}50%{transform:translate(-20px,-40px) scale(.9)}75%{transform:translate(-10px,-20px) scale(1.05)}}.form-container[_ngcontent-%COMP%]{position:relative;z-index:10;background:#0a07071a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);box-shadow:0 20px 40px #0000004d,inset 0 0 100px #ffffff1a}.form-shapes[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;overflow:hidden;z-index:-1}.form-shape[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(45deg,#ffffff14,#ffffff0d);border-radius:50%;animation:_ngcontent-%COMP%_formFloat 15s infinite}.form-shape-1[_ngcontent-%COMP%]{width:100px;height:100px;top:-50px;right:-50px}.form-shape-2[_ngcontent-%COMP%]{width:80px;height:80px;bottom:-40px;left:-40px;animation-delay:-5s}.form-shape-3[_ngcontent-%COMP%]{width:60px;height:60px;bottom:50%;right:-30px;animation-delay:-10s}@keyframes _ngcontent-%COMP%_formFloat{0%,to{transform:translate(0) rotate(0)}25%{transform:translate(10px,10px) rotate(90deg)}50%{transform:translateY(20px) rotate(180deg)}75%{transform:translate(-10px,10px) rotate(270deg)}}.video-background[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:177.77777778vh;height:56.25vw;min-width:100%;min-height:100%;pointer-events:none;opacity:1;object-fit:cover;border:0}.form-wrapper[_ngcontent-%COMP%]{position:relative;z-index:3;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.form-container[_ngcontent-%COMP%]{width:100%;max-width:440px;padding:2.5rem;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);box-shadow:0 20px 40px #0000004d,inset 0 0 100px #ffffff1a;position:relative;overflow:hidden;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:20px;contain:content}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}h2[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.2)}.subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:1.1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{color:#ffffffe6;margin-bottom:.5rem;display:block}.input-group[_ngcontent-%COMP%]{display:flex;border:1px solid rgba(255,255,255,.2);border-radius:12px;overflow:hidden;transition:all .3s ease;background:#ffffff1a}.input-group[_ngcontent-%COMP%]:focus-within{border-color:#ffffff80;box-shadow:0 0 0 4px #ffffff1a}.input-group-text[_ngcontent-%COMP%]{background:#ffffff1a;border:none;color:#fffc;padding:.75rem 1rem}.form-control[_ngcontent-%COMP%]{border:none;padding:.75rem;flex:1;font-size:1rem;background:transparent;color:#fff}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff9}.form-control[_ngcontent-%COMP%]:focus{outline:none;background:transparent}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(45deg,#2c3e50,#34495e);color:#fff;border:none;border-radius:12px;font-weight:600;font-size:1.1rem;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:relative;overflow:hidden}.btn-submit[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}.btn-submit[_ngcontent-%COMP%]:hover:before{left:100%}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(45deg,#34495e,#2c3e50);transform:translateY(-2px)}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.alert-danger[_ngcontent-%COMP%]{background:#dc354533;border:1px solid rgba(220,53,69,.3);color:#fff;padding:1rem;border-radius:12px;margin-bottom:1.5rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@media (max-width: 480px){.form-container[_ngcontent-%COMP%]{padding:1.5rem}h2[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{font-size:1rem}}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(37,34,34,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;will-change:transform}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animated-text-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;overflow:hidden}.text-spawn[_ngcontent-%COMP%]{position:absolute;font-family:Arial Black,sans-serif;font-weight:900;font-size:8rem;color:#ffffff08;white-space:nowrap;text-transform:uppercase;pointer-events:none;-webkit-user-select:none;user-select:none;opacity:0;filter:blur(2px);will-change:transform;contain:layout style paint}.text-spawn-1[_ngcontent-%COMP%]{top:10%;left:-100%;animation:_ngcontent-%COMP%_spawnText1 20s linear infinite}.text-spawn-2[_ngcontent-%COMP%]{top:30%;right:-100%;animation:_ngcontent-%COMP%_spawnText2 25s linear infinite}.text-spawn-3[_ngcontent-%COMP%]{top:50%;left:-100%;animation:_ngcontent-%COMP%_spawnText1 22s linear infinite}.text-spawn-4[_ngcontent-%COMP%]{top:70%;right:-100%;animation:_ngcontent-%COMP%_spawnText2 28s linear infinite}.text-spawn-5[_ngcontent-%COMP%]{top:20%;left:-100%;animation:_ngcontent-%COMP%_spawnText1 24s linear infinite 2s}.text-spawn-6[_ngcontent-%COMP%]{top:40%;right:-100%;animation:_ngcontent-%COMP%_spawnText2 26s linear infinite 3s}.text-spawn-7[_ngcontent-%COMP%]{top:60%;left:-100%;animation:_ngcontent-%COMP%_spawnText1 23s linear infinite 4s}.text-spawn-8[_ngcontent-%COMP%]{top:80%;right:-100%;animation:_ngcontent-%COMP%_spawnText2 27s linear infinite 5s}@keyframes _ngcontent-%COMP%_spawnText1{0%{left:-100%;opacity:0;transform:scale(.5) rotate(-5deg)}5%{opacity:.1;transform:scale(1) rotate(0)}95%{opacity:.1}to{left:100%;opacity:0;transform:scale(.5) rotate(5deg)}}@keyframes _ngcontent-%COMP%_spawnText2{0%{right:-100%;opacity:0;transform:scale(.5) rotate(5deg)}5%{opacity:.1;transform:scale(1) rotate(0)}95%{opacity:.1}to{right:100%;opacity:0;transform:scale(.5) rotate(-5deg)}}.form-wrapper[_ngcontent-%COMP%]{position:relative;z-index:2}.text-spawn[_ngcontent-%COMP%]{text-shadow:0 0 50px rgba(255,255,255,.1);background:linear-gradient(45deg,#ffffff0d,#ffffff05);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:10px}@media (max-width: 768px){.text-spawn[_ngcontent-%COMP%]{font-size:4rem}}.forgot-password-link[_ngcontent-%COMP%]{text-align:right;margin-bottom:15px}.forgot-password-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff9f9;text-decoration:none;font-size:.9em}.forgot-password-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}.modal[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:1050}.modal.show[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.modal-dialog[_ngcontent-%COMP%]{width:100%;max-width:450px;margin:1.75rem}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 5px 15px #0003;overflow:hidden}.modal-header[_ngcontent-%COMP%]{background:#2c3e50;padding:1.25rem;border:none;color:#fff;display:flex;align-items:center;justify-content:space-between}.modal-title[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:500;margin:0}.btn-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:0;opacity:.7}.btn-close[_ngcontent-%COMP%]:hover{opacity:1}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.modal[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;border:1px solid #ced4da;border-radius:4px;overflow:hidden}.modal[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem .75rem;background-color:#f8f9fa;border-right:1px solid #ced4da;color:#495057}.modal[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:none;outline:none;color:#495057;font-size:1rem}.modal[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.modal[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:4px;margin-bottom:1rem}.modal[_ngcontent-%COMP%]   .alert-success[_ngcontent-%COMP%]{background:#d4edda;border:1px solid #c3e6cb;color:#155724}.modal[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%]{background:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:10px}.modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;font-weight:500;cursor:pointer}.modal[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.modal[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#2c3e50;color:#fff;border:none}.modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{opacity:.9}.modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner-border-sm[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border:.2em solid currentColor;border-right-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_spinner-border .75s linear infinite}@keyframes _ngcontent-%COMP%_spinner-border{to{transform:rotate(360deg)}}@media (max-width: 576px){.modal-dialog[_ngcontent-%COMP%]{margin:.5rem}}.sound-toggle-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:45px;height:45px;border-radius:50%;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);cursor:pointer;z-index:1000;transition:all .3s ease;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 4px 6px #0000001a}.sound-toggle-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.05)}.sound-toggle-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.sound-toggle-btn.unmuted[_ngcontent-%COMP%]{background:linear-gradient(45deg,#2c3e50,#34495e);border-color:#ffffff4d}.sound-icon[_ngcontent-%COMP%]{font-size:1.2rem}@media (prefers-reduced-motion: reduce){.logo[_ngcontent-%COMP%], .shape[_ngcontent-%COMP%], .form-shape[_ngcontent-%COMP%], .text-spawn[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}.shape[_ngcontent-%COMP%], .text-spawn[_ngcontent-%COMP%]{will-change:transform;contain:layout style paint}.shape[_ngcontent-%COMP%], .text-spawn[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]{transform:translateZ(0);backface-visibility:hidden}.video-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;background:#000;overflow:hidden;contain:strict}.video-background[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#2c3e50b3,#34495eb3);z-index:2}.form-container[_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]{contain:content}.btn-submit[_ngcontent-%COMP%]:hover:before{will-change:transform}.spinner[_ngcontent-%COMP%]{will-change:transform}.sound-toggle-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:45px;height:45px;border-radius:50%;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);cursor:pointer;z-index:1}'],changeDetection:0})};function ze(o,e){o&1&&l(0,"span",23)}function Ne(o,e){if(o&1&&(i(0,"div",24),d(1),r()),o&2){let t=u();s(),x(" ",t.errorMessage," ")}}function De(o,e){if(o&1&&(i(0,"div",25),d(1),r()),o&2){let t=u();s(),x(" ",t.successMessage," ")}}var W=class o{constructor(e,t){this.authService=e;this.router=t}currentPassword="";newPassword="";confirmPassword="";isLoading=!1;errorMessage="";successMessage="";showCurrentPassword=!1;showNewPassword=!1;ngOnInit(){}validateForm(){return!this.currentPassword||!this.newPassword||!this.confirmPassword?(this.errorMessage="All fields are required",!1):this.newPassword!==this.confirmPassword?(this.errorMessage="New password and confirmation do not match",!1):this.newPassword.length<8?(this.errorMessage="New password must be at least 8 characters long",!1):!0}onSubmit(){let e=this.authService.userId;if(!e){this.errorMessage="User ID not found. Please try logging in again.";return}console.log(e),this.isLoading=!0,this.errorMessage="",this.successMessage="",this.authService.changePassword({userId:e,currentPassword:this.currentPassword,newPassword:this.newPassword}).subscribe({next:t=>{this.successMessage=t.message||"Password changed successfully",this.isLoading=!1,this.currentPassword="",this.newPassword="",this.confirmPassword="",setTimeout(()=>{this.router.navigate(["/admin"])},2e3)},error:t=>{this.isLoading=!1,this.errorMessage=t.error?.message||"Failed to change password. Please try again."}})}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||o)(w(b),w(y))};static \u0275cmp=v({type:o,selectors:[["app-changepwd"]],standalone:!1,decls:39,vars:12,consts:[["passwordForm","ngForm"],[1,"navbar","navbar-dark","bg-dark","shadow-lg"],[1,"container"],[1,"navbar-brand"],["src","https://iili.io/2gvDOlt.th.png","width","60","height","60",1,"d-inline-block","align-text-top"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"main-container"],[1,"change-password-card"],[1,"card-header"],[1,"security-notice"],[3,"ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"input-group"],["name","currentPassword","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"toggle-password",3,"click"],["name","newPassword","required","",1,"form-control",3,"ngModelChange","type","ngModel"],[1,"btn-container"],["type","submit",1,"btn-submit",3,"disabled"],["class","spinner-border spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"spinner-border","spinner"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(t,n){if(t&1){let a=O();i(0,"nav",1)(1,"div",2)(2,"a",3),l(3,"img",4),r(),i(4,"button",5),h("click",function(){return g(a),f(n.logout())}),l(5,"i",6),d(6," Logout "),r()()(),i(7,"div",7)(8,"div",8)(9,"div",9)(10,"h2"),d(11,"Change Password"),r()(),i(12,"div",10)(13,"h3"),d(14,"Security Update"),r(),i(15,"p"),d(16,"To enhance the security of your account, please change your password. Choose a strong password that you haven't used before."),r()(),i(17,"form",11,0),h("ngSubmit",function(){return g(a),f(n.onSubmit())}),i(19,"div",12)(20,"label",13),d(21,"Current Password"),r(),i(22,"div",14)(23,"input",15),M("ngModelChange",function(p){return g(a),P(n.currentPassword,p)||(n.currentPassword=p),f(p)}),r(),i(24,"button",16),h("click",function(){return g(a),f(n.showCurrentPassword=!n.showCurrentPassword)}),l(25,"i"),r()()(),i(26,"div",12)(27,"label",13),d(28,"New Password"),r(),i(29,"div",14)(30,"input",17),M("ngModelChange",function(p){return g(a),P(n.newPassword,p)||(n.newPassword=p),f(p)}),r(),i(31,"button",16),h("click",function(){return g(a),f(n.showNewPassword=!n.showNewPassword)}),l(32,"i"),r()()(),i(33,"div",18)(34,"button",19),_(35,ze,1,0,"span",20),d(36," Change Password "),r()(),_(37,Ne,2,1,"div",21)(38,De,2,1,"div",22),r()()()}if(t&2){let a=S(18);s(23),c("type",n.showCurrentPassword?"text":"password"),C("ngModel",n.currentPassword),s(2),Z(n.showCurrentPassword?"fas fa-eye-slash":"fas fa-eye"),s(5),c("type",n.showNewPassword?"text":"password"),C("ngModel",n.newPassword),s(2),Z(n.showNewPassword?"fas fa-eye-slash":"fas fa-eye"),s(2),c("disabled",!a.form.valid||n.isLoading),s(),c("ngIf",n.isLoading),s(2),c("ngIf",n.errorMessage),s(),c("ngIf",n.successMessage)}},dependencies:[L,N,T,V,F,D,z,A],styles:[".main-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:20px}.change-password-card[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:800px;padding:40px;border-radius:10px;box-shadow:0 2px 6px #0000001a}.card-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:24px;font-weight:500;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:500}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ddd;border-radius:5px;overflow:hidden}.input-group[_ngcontent-%COMP%]:focus-within{border-color:#007bff}.form-control[_ngcontent-%COMP%]{flex:1;padding:12px 15px;border:none;outline:none;font-size:16px}.toggle-password[_ngcontent-%COMP%]{padding:12px 15px;background:none;border:none;border-left:1px solid #ddd;cursor:pointer;color:#666}.toggle-password[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.security-notice[_ngcontent-%COMP%]{background-color:#f8f9fa;border-left:4px solid #007bff;padding:15px 20px;margin-bottom:30px}.security-notice[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:16px;margin-bottom:8px;font-weight:500}.security-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px;line-height:1.5}.btn-container[_ngcontent-%COMP%]{margin-top:30px}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:5px;font-size:16px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.alert[_ngcontent-%COMP%]{margin-top:20px;padding:12px 15px;border-radius:5px;font-size:14px}.alert-danger[_ngcontent-%COMP%]{background-color:#fff2f2;border:1px solid #ffcdd2;color:#d32f2f}.alert-success[_ngcontent-%COMP%]{background-color:#f1f8e9;border:1px solid #dcedc8;color:#689f38}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px}@media (max-width: 768px){.change-password-card[_ngcontent-%COMP%]{padding:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{font-size:14px}}"]})};var H=class o{constructor(e,t){this.authService=e;this.router=t}canActivate(e){return this.authService.forcePasswordChange&&!e.routeConfig?.path?.includes("changepwd")?(this.router.navigate(["/admin/changepwd"]),!1):!0}static \u0275fac=function(t){return new(t||o)(G(b),G(y))};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var je=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:j},{path:"changepwd",component:W,canActivate:[H]},{path:"admin",loadChildren:()=>import("./chunk-PZYFU5QQ.js").then(o=>o.AdminModule)}],B=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=R({type:o});static \u0275inj=I({imports:[K.forRoot(je),K]})};var Y=class o{title="smartv";static \u0275fac=function(t){return new(t||o)};static \u0275cmp=v({type:o,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(t,n){t&1&&l(0,"router-outlet")},dependencies:[ue],encapsulation:2})};var q=class o{intercept(e,t){let n=null;return typeof window<"u"&&window.sessionStorage&&(n=sessionStorage.getItem("authToken")),n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t.handle(e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var We={url:he.baseUrl,options:{transports:["websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}},U=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=R({type:o,bootstrap:[Y]});static \u0275inj=I({providers:[le(ce()),me(fe()),xe,b,{provide:de,useClass:q,multi:!0}],imports:[ge,B,be,we.forRoot(We),Ce]})};pe().bootstrapModule(U,{ngZoneEventCoalescing:!0}).catch(o=>console.error(o));
