import{$ as W,A as E,Ca as oe,D as j,E as p,Ea as ne,G as F,Ga as ie,I as L,Ia as re,J as P,Ja as ae,K as N,U as V,Z as D,_ as B,aa as z,ca as q,da as U,ea as G,fa as J,g as f,h as g,ha as Z,i as R,ia as K,j as u,k as b,la as O,ma as M,o as a,oa as Q,p as I,q as h,qa as X,r as C,ra as Y,s as k,sa as $,ta as ee,u as c,ua as te,v as i,w as r,x as v,y as T,z as A}from"./chunk-3SBVSYCC.js";var m=class e{constructor(t){this.http=t}login(t){return this.http.post(`${M.baseUrl}/api/auth/login`,t)}static \u0275fac=function(o){return new(o||e)(R(D))};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};function le(e,t){if(e&1&&(i(0,"div",13),p(1),r()),e&2){let o=E();a(),F(" ",o.errorMessage," ")}}function ce(e,t){e&1&&(i(0,"span"),p(1,"Login"),r())}function de(e,t){e&1&&v(0,"div",14)}var w=class e{constructor(t,o){this.authService=t;this.route=o}username="";password="";errorMessage="";isLoading=!1;onSubmit(){this.errorMessage="",this.isLoading=!0,this.authService.login({username:this.username,password:this.password}).subscribe(t=>{this.isLoading=!1,console.log("Login successful:",t),t?.token?(sessionStorage.setItem("authToken",t.token),alert("Login successful!"),this.route.navigate(["/admin"])):this.errorMessage="No token received. Please try again."},t=>{this.isLoading=!1,console.error("Login error:",t),this.errorMessage=t.error?.message||"Login failed. Please check your credentials."})}static \u0275fac=function(o){return new(o||e)(I(m),I(K))};static \u0275cmp=h({type:e,selectors:[["app-login"]],standalone:!1,decls:18,vars:6,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"form-container"],[3,"ngSubmit"],["class","error-message",4,"ngIf"],[1,"form-group"],["for","email"],["id","email","type","text","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"spinner"]],template:function(o,n){if(o&1){let l=T();i(0,"div",1)(1,"div",2)(2,"h2"),p(3,"Login"),r(),i(4,"form",3,0),A("ngSubmit",function(){return u(l),b(n.onSubmit())}),k(6,le,2,1,"div",4),i(7,"div",5)(8,"label",6),p(9,"Email:"),r(),i(10,"input",7),N("ngModelChange",function(s){return u(l),P(n.username,s)||(n.username=s),b(s)}),r()(),i(11,"div",5)(12,"label",8),p(13,"Password:"),r(),i(14,"input",9),N("ngModelChange",function(s){return u(l),P(n.password,s)||(n.password=s),b(s)}),r()(),i(15,"button",10),k(16,ce,2,0,"span",11)(17,de,1,0,"div",12),r()()()()}if(o&2){let l=j(5);a(6),c("ngIf",n.errorMessage),a(4),L("ngModel",n.username),a(4),L("ngModel",n.password),a(),c("disabled",!l.form.valid||n.isLoading),a(),c("ngIf",!n.isLoading),a(),c("ngIf",n.isLoading)}},dependencies:[V,te,Q,X,Y,oe,ee,$],styles:['.login-container[_ngcontent-%COMP%]{background:url("./media/smartTVPR-5SJUNIVB.jpg") no-repeat center center/cover;position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#0009;background-blend-mode:darken}.form-container[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-radius:15px;box-shadow:0 4px 10px #0009;padding:30px 40px;width:100%;max-width:400px;text-align:center;color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:1rem;margin-bottom:5px;color:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:1rem;background-color:#fffc;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn-submit[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:80px;min-height:36px;background:#007bff;color:#fff;border:none;padding:10px 15px;border-radius:5px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.btn-submit[_ngcontent-%COMP%]:hover{background:#0056b3}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:20px}}']})};var fe=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:w},{path:"admin",loadChildren:()=>import("./chunk-A3QJJOUY.js").then(e=>e.AdminModule)}],y=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=C({type:e});static \u0275inj=g({imports:[O.forRoot(fe),O]})};var _=class e{title="smartv";static \u0275fac=function(o){return new(o||e)};static \u0275cmp=h({type:e,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(o,n){o&1&&v(0,"router-outlet")},dependencies:[Z],encapsulation:2})};var x=class e{intercept(t,o){let n=null;return typeof window<"u"&&window.sessionStorage&&(n=sessionStorage.getItem("authToken")),n&&(t=t.clone({setHeaders:{Authorization:`Bearer ${n}`}})),o.handle(t)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var ge={url:M.baseUrl,options:{transports:["websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}},S=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=C({type:e,bootstrap:[_]});static \u0275inj=g({providers:[W(z()),J(G()),ie,m,{provide:B,useClass:x,multi:!0}],imports:[U,y,ne,re.forRoot(ge),ae]})};q().bootstrapModule(S,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
