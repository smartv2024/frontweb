import{$a as no,A as y,Aa as qi,B as Wt,Ba as be,C as u,Ca as Ht,D as at,Da as Z,E as xe,Ea as Ze,F as Ln,Fa as G,G as a,Ga as X,H as r,Ha as oe,I as f,Ia as J,J as st,Ja as ee,K as lt,Ka as Zt,L as E,La as Hi,M as C,Ma as Zi,N as h,Na as re,O as dt,Oa as ae,Pa as se,Qa as Gi,Ra as le,S as ye,T as l,Ta as Ki,U as T,Ua as Qi,V as M,Va as Xi,W as Oe,Wa as Ji,X as k,Y as I,Ya as eo,Z as A,Za as $,_ as $t,_a as to,a as j,aa as He,ab as io,b as de,ba as q,bb as oo,c as Wa,ca as ce,cb as ro,d as $a,da as Ne,db as ao,e as Ue,ea as Bi,eb as so,f as En,fa as De,ga as H,h as Ni,ha as R,i as Dn,ia as he,j as Tn,ja as ct,ka as Ri,l as Vn,la as Yt,o as zt,p as Ft,pa as Wi,q as jt,r as _,s as x,t as Nt,u as Bt,ua as Be,v as ze,va as $i,w as m,wa as W,x as S,xa as qt,y as N,ya as Yi,z as Rt,za as vt}from"./chunk-PRLWDGOG.js";var lo=Wa((Te,zn)=>{"use strict";(function(d,i){typeof Te=="object"&&typeof zn<"u"?zn.exports=i():typeof define=="function"&&define.amd?define(i):(d=typeof globalThis<"u"?globalThis:d||self,d.Sweetalert2=i())})(Te,function(){"use strict";function d(e,n,s){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:s;throw new TypeError("Private element is not present on this object")}function i(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(e,n){return e.get(d(e,n))}function o(e,n,s){i(e,n),n.set(e,s)}function c(e,n,s){return e.set(d(e,n),s),s}let g=100,b={},ue=()=>{b.previousActiveElement instanceof HTMLElement?(b.previousActiveElement.focus(),b.previousActiveElement=null):document.body&&document.body.focus()},O=e=>new Promise(n=>{if(!e)return n();let s=window.scrollX,p=window.scrollY;b.restoreFocusTimeout=setTimeout(()=>{ue(),n()},g),window.scrollTo(s,p)}),D="swal2-",w=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((e,n)=>(e[n]=D+n,e),{}),Me=["success","warning","info","question","error"].reduce((e,n)=>(e[n]=D+n,e),{}),xt="SweetAlert2:",Ke=e=>e.charAt(0).toUpperCase()+e.slice(1),te=e=>{console.warn(`${xt} ${typeof e=="object"?e.join(" "):e}`)},ne=e=>{console.error(`${xt} ${e}`)},Fn=[],po=e=>{Fn.includes(e)||(Fn.push(e),te(e))},jn=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;po(`"${e}" is deprecated and will be removed in the next major release.${n?` Use "${n}" instead.`:""}`)},Ct=e=>typeof e=="function"?e():e,mn=e=>e&&typeof e.toPromise=="function",pt=e=>mn(e)?e.toPromise():Promise.resolve(e),pn=e=>e&&Promise.resolve(e)===e,ge=()=>document.body.querySelector(`.${w.container}`),gt=e=>{let n=ge();return n?n.querySelector(e):null},ve=e=>gt(`.${e}`),z=()=>ve(w.popup),Qe=()=>ve(w.icon),go=()=>ve(w["icon-content"]),Nn=()=>ve(w.title),gn=()=>ve(w["html-container"]),Bn=()=>ve(w.image),un=()=>ve(w["progress-steps"]),Mt=()=>ve(w["validation-message"]),Ae=()=>gt(`.${w.actions} .${w.confirm}`),Xe=()=>gt(`.${w.actions} .${w.cancel}`),We=()=>gt(`.${w.actions} .${w.deny}`),uo=()=>ve(w["input-label"]),Je=()=>gt(`.${w.loader}`),ut=()=>ve(w.actions),Rn=()=>ve(w.footer),Pt=()=>ve(w["timer-progress-bar"]),fn=()=>ve(w.close),fo=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,hn=()=>{let e=z();if(!e)return[];let n=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(n).sort((P,V)=>{let L=parseInt(P.getAttribute("tabindex")||"0"),Y=parseInt(V.getAttribute("tabindex")||"0");return L>Y?1:L<Y?-1:0}),p=e.querySelectorAll(fo),v=Array.from(p).filter(P=>P.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(v))].filter(P=>fe(P))},bn=()=>Le(document.body,w.shown)&&!Le(document.body,w["toast-shown"])&&!Le(document.body,w["no-backdrop"]),yt=()=>{let e=z();return e?Le(e,w.toast):!1},ho=()=>{let e=z();return e?e.hasAttribute("data-loading"):!1},we=(e,n)=>{if(e.textContent="",n){let p=new DOMParser().parseFromString(n,"text/html"),v=p.querySelector("head");v&&Array.from(v.childNodes).forEach(V=>{e.appendChild(V)});let P=p.querySelector("body");P&&Array.from(P.childNodes).forEach(V=>{V instanceof HTMLVideoElement||V instanceof HTMLAudioElement?e.appendChild(V.cloneNode(!0)):e.appendChild(V)})}},Le=(e,n)=>{if(!n)return!1;let s=n.split(/\s+/);for(let p=0;p<s.length;p++)if(!e.classList.contains(s[p]))return!1;return!0},bo=(e,n)=>{Array.from(e.classList).forEach(s=>{!Object.values(w).includes(s)&&!Object.values(Me).includes(s)&&!Object.values(n.showClass||{}).includes(s)&&e.classList.remove(s)})},_e=(e,n,s)=>{if(bo(e,n),!n.customClass)return;let p=n.customClass[s];if(p){if(typeof p!="string"&&!p.forEach){te(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof p}"`);return}F(e,p)}},Ot=(e,n)=>{if(!n)return null;switch(n){case"select":case"textarea":case"file":return e.querySelector(`.${w.popup} > .${w[n]}`);case"checkbox":return e.querySelector(`.${w.popup} > .${w.checkbox} input`);case"radio":return e.querySelector(`.${w.popup} > .${w.radio} input:checked`)||e.querySelector(`.${w.popup} > .${w.radio} input:first-child`);case"range":return e.querySelector(`.${w.popup} > .${w.range} input`);default:return e.querySelector(`.${w.popup} > .${w.input}`)}},Wn=e=>{if(e.focus(),e.type!=="file"){let n=e.value;e.value="",e.value=n}},$n=(e,n,s)=>{!e||!n||(typeof n=="string"&&(n=n.split(/\s+/).filter(Boolean)),n.forEach(p=>{Array.isArray(e)?e.forEach(v=>{s?v.classList.add(p):v.classList.remove(p)}):s?e.classList.add(p):e.classList.remove(p)}))},F=(e,n)=>{$n(e,n,!0)},Pe=(e,n)=>{$n(e,n,!1)},Fe=(e,n)=>{let s=Array.from(e.children);for(let p=0;p<s.length;p++){let v=s[p];if(v instanceof HTMLElement&&Le(v,n))return v}},$e=(e,n,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||parseInt(s)===0?e.style.setProperty(n,typeof s=="number"?`${s}px`:s):e.style.removeProperty(n)},ie=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=n)},pe=e=>{e&&(e.style.display="none")},vn=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{ft(e,e.innerHTML,n)}).observe(e,{childList:!0,subtree:!0})},Yn=(e,n,s,p)=>{let v=e.querySelector(n);v&&v.style.setProperty(s,p)},ft=function(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";n?ie(e,s):pe(e)},fe=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),vo=()=>!fe(Ae())&&!fe(We())&&!fe(Xe()),qn=e=>e.scrollHeight>e.clientHeight,Hn=e=>{let n=window.getComputedStyle(e),s=parseFloat(n.getPropertyValue("animation-duration")||"0"),p=parseFloat(n.getPropertyValue("transition-duration")||"0");return s>0||p>0},wn=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=Pt();s&&fe(s)&&(n&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${e/1e3}s linear`,s.style.width="0%"},10))},wo=()=>{let e=Pt();if(!e)return;let n=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";let s=parseInt(window.getComputedStyle(e).width),p=n/s*100;e.style.width=`${p}%`},_o=()=>typeof window>"u"||typeof document>"u",xo=`
 <div aria-labelledby="${w.title}" aria-describedby="${w["html-container"]}" class="${w.popup}" tabindex="-1">
   <button type="button" class="${w.close}"></button>
   <ul class="${w["progress-steps"]}"></ul>
   <div class="${w.icon}"></div>
   <img class="${w.image}" />
   <h2 class="${w.title}" id="${w.title}"></h2>
   <div class="${w["html-container"]}" id="${w["html-container"]}"></div>
   <input class="${w.input}" id="${w.input}" />
   <input type="file" class="${w.file}" />
   <div class="${w.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${w.select}" id="${w.select}"></select>
   <div class="${w.radio}"></div>
   <label class="${w.checkbox}">
     <input type="checkbox" id="${w.checkbox}" />
     <span class="${w.label}"></span>
   </label>
   <textarea class="${w.textarea}" id="${w.textarea}"></textarea>
   <div class="${w["validation-message"]}" id="${w["validation-message"]}"></div>
   <div class="${w.actions}">
     <div class="${w.loader}"></div>
     <button type="button" class="${w.confirm}"></button>
     <button type="button" class="${w.deny}"></button>
     <button type="button" class="${w.cancel}"></button>
   </div>
   <div class="${w.footer}"></div>
   <div class="${w["timer-progress-bar-container"]}">
     <div class="${w["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Co=()=>{let e=ge();return e?(e.remove(),Pe([document.documentElement,document.body],[w["no-backdrop"],w["toast-shown"],w["has-column"]]),!0):!1},Ye=()=>{b.currentInstance.resetValidationMessage()},Mo=()=>{let e=z(),n=Fe(e,w.input),s=Fe(e,w.file),p=e.querySelector(`.${w.range} input`),v=e.querySelector(`.${w.range} output`),P=Fe(e,w.select),V=e.querySelector(`.${w.checkbox} input`),L=Fe(e,w.textarea);n.oninput=Ye,s.onchange=Ye,P.onchange=Ye,V.onchange=Ye,L.oninput=Ye,p.oninput=()=>{Ye(),v.value=p.value},p.onchange=()=>{Ye(),v.value=p.value}},Po=e=>typeof e=="string"?document.querySelector(e):e,yo=e=>{let n=z();n.setAttribute("role",e.toast?"alert":"dialog"),n.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||n.setAttribute("aria-modal","true")},Oo=e=>{window.getComputedStyle(e).direction==="rtl"&&F(ge(),w.rtl)},So=e=>{let n=Co();if(_o()){ne("SweetAlert2 requires document to initialize");return}let s=document.createElement("div");s.className=w.container,n&&F(s,w["no-transition"]),we(s,xo),s.dataset.swal2Theme=e.theme;let p=Po(e.target);p.appendChild(s),yo(e),Oo(p),Mo()},_n=(e,n)=>{e instanceof HTMLElement?n.appendChild(e):typeof e=="object"?ko(e,n):e&&we(n,e)},ko=(e,n)=>{e.jquery?Io(n,e):we(n,e.toString())},Io=(e,n)=>{if(e.textContent="",0 in n)for(let s=0;s in n;s++)e.appendChild(n[s].cloneNode(!0));else e.appendChild(n.cloneNode(!0))},Ao=(e,n)=>{let s=ut(),p=Je();!s||!p||(!n.showConfirmButton&&!n.showDenyButton&&!n.showCancelButton?pe(s):ie(s),_e(s,n,"actions"),Eo(s,p,n),we(p,n.loaderHtml||""),_e(p,n,"loader"))};function Eo(e,n,s){let p=Ae(),v=We(),P=Xe();!p||!v||!P||(Cn(p,"confirm",s),Cn(v,"deny",s),Cn(P,"cancel",s),Do(p,v,P,s),s.reverseButtons&&(s.toast?(e.insertBefore(P,p),e.insertBefore(v,p)):(e.insertBefore(P,n),e.insertBefore(v,n),e.insertBefore(p,n))))}function Do(e,n,s,p){if(!p.buttonsStyling){Pe([e,n,s],w.styled);return}F([e,n,s],w.styled),p.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",p.confirmButtonColor),p.denyButtonColor&&n.style.setProperty("--swal2-deny-button-background-color",p.denyButtonColor),p.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",p.cancelButtonColor),xn(e),xn(n),xn(s)}function xn(e){let n=window.getComputedStyle(e),s=n.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-outline",n.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Cn(e,n,s){let p=Ke(n);ft(e,s[`show${p}Button`],"inline-block"),we(e,s[`${n}ButtonText`]||""),e.setAttribute("aria-label",s[`${n}ButtonAriaLabel`]||""),e.className=w[n],_e(e,s,`${n}Button`)}let To=(e,n)=>{let s=fn();s&&(we(s,n.closeButtonHtml||""),_e(s,n,"closeButton"),ft(s,n.showCloseButton),s.setAttribute("aria-label",n.closeButtonAriaLabel||""))},Vo=(e,n)=>{let s=ge();s&&(Lo(s,n.backdrop),Uo(s,n.position),zo(s,n.grow),_e(s,n,"container"))};function Lo(e,n){typeof n=="string"?e.style.background=n:n||F([document.documentElement,document.body],w["no-backdrop"])}function Uo(e,n){n&&(n in w?F(e,w[n]):(te('The "position" parameter is not valid, defaulting to "center"'),F(e,w.center)))}function zo(e,n){n&&F(e,w[`grow-${n}`])}var B={innerParams:new WeakMap,domCache:new WeakMap};let Fo=["input","file","range","select","radio","checkbox","textarea"],jo=(e,n)=>{let s=z();if(!s)return;let p=B.innerParams.get(e),v=!p||n.input!==p.input;Fo.forEach(P=>{let V=Fe(s,w[P]);V&&(Ro(P,n.inputAttributes),V.className=w[P],v&&pe(V))}),n.input&&(v&&No(n),Wo(n))},No=e=>{if(!e.input)return;if(!K[e.input]){ne(`Unexpected type of input! Expected ${Object.keys(K).join(" | ")}, got "${e.input}"`);return}let n=Zn(e.input);if(!n)return;let s=K[e.input](n,e);ie(n),e.inputAutoFocus&&setTimeout(()=>{Wn(s)})},Bo=e=>{for(let n=0;n<e.attributes.length;n++){let s=e.attributes[n].name;["id","type","value","style"].includes(s)||e.removeAttribute(s)}},Ro=(e,n)=>{let s=z();if(!s)return;let p=Ot(s,e);if(p){Bo(p);for(let v in n)p.setAttribute(v,n[v])}},Wo=e=>{if(!e.input)return;let n=Zn(e.input);n&&_e(n,e,"input")},Mn=(e,n)=>{!e.placeholder&&n.inputPlaceholder&&(e.placeholder=n.inputPlaceholder)},ht=(e,n,s)=>{if(s.inputLabel){let p=document.createElement("label"),v=w["input-label"];p.setAttribute("for",e.id),p.className=v,typeof s.customClass=="object"&&F(p,s.customClass.inputLabel),p.innerText=s.inputLabel,n.insertAdjacentElement("beforebegin",p)}},Zn=e=>{let n=z();if(n)return Fe(n,w[e]||w.input)},St=(e,n)=>{["string","number"].includes(typeof n)?e.value=`${n}`:pn(n)||te(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof n}"`)},K={};K.text=K.email=K.password=K.number=K.tel=K.url=K.search=K.date=K["datetime-local"]=K.time=K.week=K.month=(e,n)=>(St(e,n.inputValue),ht(e,e,n),Mn(e,n),e.type=n.input,e),K.file=(e,n)=>(ht(e,e,n),Mn(e,n),e),K.range=(e,n)=>{let s=e.querySelector("input"),p=e.querySelector("output");return St(s,n.inputValue),s.type=n.input,St(p,n.inputValue),ht(s,e,n),e},K.select=(e,n)=>{if(e.textContent="",n.inputPlaceholder){let s=document.createElement("option");we(s,n.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,e.appendChild(s)}return ht(e,e,n),e},K.radio=e=>(e.textContent="",e),K.checkbox=(e,n)=>{let s=Ot(z(),"checkbox");s.value="1",s.checked=!!n.inputValue;let p=e.querySelector("span");return we(p,n.inputPlaceholder||n.inputLabel),s},K.textarea=(e,n)=>{St(e,n.inputValue),Mn(e,n),ht(e,e,n);let s=p=>parseInt(window.getComputedStyle(p).marginLeft)+parseInt(window.getComputedStyle(p).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let p=parseInt(window.getComputedStyle(z()).width),v=()=>{if(!document.body.contains(e))return;let P=e.offsetWidth+s(e);P>p?z().style.width=`${P}px`:$e(z(),"width",n.width)};new MutationObserver(v).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};let $o=(e,n)=>{let s=gn();s&&(vn(s),_e(s,n,"htmlContainer"),n.html?(_n(n.html,s),ie(s,"block")):n.text?(s.textContent=n.text,ie(s,"block")):pe(s),jo(e,n))},Yo=(e,n)=>{let s=Rn();s&&(vn(s),ft(s,n.footer,"block"),n.footer&&_n(n.footer,s),_e(s,n,"footer"))},qo=(e,n)=>{let s=B.innerParams.get(e),p=Qe();if(!p)return;if(s&&n.icon===s.icon){Qn(p,n),Gn(p,n);return}if(!n.icon&&!n.iconHtml){pe(p);return}if(n.icon&&Object.keys(Me).indexOf(n.icon)===-1){ne(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),pe(p);return}ie(p),Qn(p,n),Gn(p,n),F(p,n.showClass&&n.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Kn)},Gn=(e,n)=>{for(let[s,p]of Object.entries(Me))n.icon!==s&&Pe(e,p);F(e,n.icon&&Me[n.icon]),Go(e,n),Kn(),_e(e,n,"icon")},Kn=()=>{let e=z();if(!e)return;let n=window.getComputedStyle(e).getPropertyValue("background-color"),s=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let p=0;p<s.length;p++)s[p].style.backgroundColor=n},Ho=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Zo=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Qn=(e,n)=>{if(!n.icon&&!n.iconHtml)return;let s=e.innerHTML,p="";n.iconHtml?p=Xn(n.iconHtml):n.icon==="success"?(p=Ho,s=s.replace(/ style=".*?"/g,"")):n.icon==="error"?p=Zo:n.icon&&(p=Xn({question:"?",warning:"!",info:"i"}[n.icon])),s.trim()!==p.trim()&&we(e,p)},Go=(e,n)=>{if(n.iconColor){e.style.color=n.iconColor,e.style.borderColor=n.iconColor;for(let s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Yn(e,s,"background-color",n.iconColor);Yn(e,".swal2-success-ring","border-color",n.iconColor)}},Xn=e=>`<div class="${w["icon-content"]}">${e}</div>`,Ko=(e,n)=>{let s=Bn();if(s){if(!n.imageUrl){pe(s);return}ie(s,""),s.setAttribute("src",n.imageUrl),s.setAttribute("alt",n.imageAlt||""),$e(s,"width",n.imageWidth),$e(s,"height",n.imageHeight),s.className=w.image,_e(s,n,"image")}},Pn=!1,Jn=0,ei=0,ti=0,ni=0,Qo=e=>{e.addEventListener("mousedown",kt),document.body.addEventListener("mousemove",It),e.addEventListener("mouseup",At),e.addEventListener("touchstart",kt),document.body.addEventListener("touchmove",It),e.addEventListener("touchend",At)},Xo=e=>{e.removeEventListener("mousedown",kt),document.body.removeEventListener("mousemove",It),e.removeEventListener("mouseup",At),e.removeEventListener("touchstart",kt),document.body.removeEventListener("touchmove",It),e.removeEventListener("touchend",At)},kt=e=>{let n=z();if(e.target===n||Qe().contains(e.target)){Pn=!0;let s=ii(e);Jn=s.clientX,ei=s.clientY,ti=parseInt(n.style.insetInlineStart)||0,ni=parseInt(n.style.insetBlockStart)||0,F(n,"swal2-dragging")}},It=e=>{let n=z();if(Pn){let{clientX:s,clientY:p}=ii(e);n.style.insetInlineStart=`${ti+(s-Jn)}px`,n.style.insetBlockStart=`${ni+(p-ei)}px`}},At=()=>{let e=z();Pn=!1,Pe(e,"swal2-dragging")},ii=e=>{let n=0,s=0;return e.type.startsWith("mouse")?(n=e.clientX,s=e.clientY):e.type.startsWith("touch")&&(n=e.touches[0].clientX,s=e.touches[0].clientY),{clientX:n,clientY:s}},Jo=(e,n)=>{let s=ge(),p=z();if(!(!s||!p)){if(n.toast){$e(s,"width",n.width),p.style.width="100%";let v=Je();v&&p.insertBefore(v,Qe())}else $e(p,"width",n.width);$e(p,"padding",n.padding),n.color&&(p.style.color=n.color),n.background&&(p.style.background=n.background),pe(Mt()),er(p,n),n.draggable&&!n.toast?(F(p,w.draggable),Qo(p)):(Pe(p,w.draggable),Xo(p))}},er=(e,n)=>{let s=n.showClass||{};e.className=`${w.popup} ${fe(e)?s.popup:""}`,n.toast?(F([document.documentElement,document.body],w["toast-shown"]),F(e,w.toast)):F(e,w.modal),_e(e,n,"popup"),typeof n.customClass=="string"&&F(e,n.customClass),n.icon&&F(e,w[`icon-${n.icon}`])},tr=(e,n)=>{let s=un();if(!s)return;let{progressSteps:p,currentProgressStep:v}=n;if(!p||p.length===0||v===void 0){pe(s);return}ie(s),s.textContent="",v>=p.length&&te("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),p.forEach((P,V)=>{let L=nr(P);if(s.appendChild(L),V===v&&F(L,w["active-progress-step"]),V!==p.length-1){let Y=ir(n);s.appendChild(Y)}})},nr=e=>{let n=document.createElement("li");return F(n,w["progress-step"]),we(n,e),n},ir=e=>{let n=document.createElement("li");return F(n,w["progress-step-line"]),e.progressStepsDistance&&$e(n,"width",e.progressStepsDistance),n},or=(e,n)=>{let s=Nn();s&&(vn(s),ft(s,n.title||n.titleText,"block"),n.title&&_n(n.title,s),n.titleText&&(s.innerText=n.titleText),_e(s,n,"title"))},oi=(e,n)=>{Jo(e,n),Vo(e,n),tr(e,n),qo(e,n),Ko(e,n),or(e,n),To(e,n),$o(e,n),Ao(e,n),Yo(e,n);let s=z();typeof n.didRender=="function"&&s&&n.didRender(s),b.eventEmitter.emit("didRender",s)},rr=()=>fe(z()),ri=()=>{var e;return(e=Ae())===null||e===void 0?void 0:e.click()},ar=()=>{var e;return(e=We())===null||e===void 0?void 0:e.click()},sr=()=>{var e;return(e=Xe())===null||e===void 0?void 0:e.click()},et=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ai=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},lr=(e,n,s)=>{ai(e),n.toast||(e.keydownHandler=p=>cr(n,p,s),e.keydownTarget=n.keydownListenerCapture?window:z(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},yn=(e,n)=>{var s;let p=hn();if(p.length){e=e+n,e===-2&&(e=p.length-1),e===p.length?e=0:e===-1&&(e=p.length-1),p[e].focus();return}(s=z())===null||s===void 0||s.focus()},si=["ArrowRight","ArrowDown"],dr=["ArrowLeft","ArrowUp"],cr=(e,n,s)=>{e&&(n.isComposing||n.keyCode===229||(e.stopKeydownPropagation&&n.stopPropagation(),n.key==="Enter"?mr(n,e):n.key==="Tab"?pr(n):[...si,...dr].includes(n.key)?gr(n.key):n.key==="Escape"&&ur(n,e,s)))},mr=(e,n)=>{if(!Ct(n.allowEnterKey))return;let s=Ot(z(),n.input);if(e.target&&s&&e.target instanceof HTMLElement&&e.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(n.input))return;ri(),e.preventDefault()}},pr=e=>{let n=e.target,s=hn(),p=-1;for(let v=0;v<s.length;v++)if(n===s[v]){p=v;break}e.shiftKey?yn(p,-1):yn(p,1),e.stopPropagation(),e.preventDefault()},gr=e=>{let n=ut(),s=Ae(),p=We(),v=Xe();if(!n||!s||!p||!v)return;let P=[s,p,v];if(document.activeElement instanceof HTMLElement&&!P.includes(document.activeElement))return;let V=si.includes(e)?"nextElementSibling":"previousElementSibling",L=document.activeElement;if(L){for(let Y=0;Y<n.children.length;Y++){if(L=L[V],!L)return;if(L instanceof HTMLButtonElement&&fe(L))break}L instanceof HTMLButtonElement&&L.focus()}},ur=(e,n,s)=>{Ct(n.allowEscapeKey)&&(e.preventDefault(),s(et.esc))};var tt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let fr=()=>{let e=ge();Array.from(document.body.children).forEach(s=>{s.contains(e)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},li=()=>{Array.from(document.body.children).forEach(n=>{n.hasAttribute("data-previous-aria-hidden")?(n.setAttribute("aria-hidden",n.getAttribute("data-previous-aria-hidden")||""),n.removeAttribute("data-previous-aria-hidden")):n.removeAttribute("aria-hidden")})},di=typeof window<"u"&&!!window.GestureEvent,hr=()=>{if(di&&!Le(document.body,w.iosfix)){let e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,F(document.body,w.iosfix),br()}},br=()=>{let e=ge();if(!e)return;let n;e.ontouchstart=s=>{n=vr(s)},e.ontouchmove=s=>{n&&(s.preventDefault(),s.stopPropagation())}},vr=e=>{let n=e.target,s=ge(),p=gn();return!s||!p||wr(e)||_r(e)?!1:n===s||!qn(s)&&n instanceof HTMLElement&&n.tagName!=="INPUT"&&n.tagName!=="TEXTAREA"&&!(qn(p)&&p.contains(n))},wr=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",_r=e=>e.touches&&e.touches.length>1,xr=()=>{if(Le(document.body,w.iosfix)){let e=parseInt(document.body.style.top,10);Pe(document.body,w.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},Cr=()=>{let e=document.createElement("div");e.className=w["scrollbar-measure"],document.body.appendChild(e);let n=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),n},nt=null,Mr=e=>{nt===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(nt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${nt+Cr()}px`)},Pr=()=>{nt!==null&&(document.body.style.paddingRight=`${nt}px`,nt=null)};function ci(e,n,s,p){yt()?pi(e,p):(O(s).then(()=>pi(e,p)),ai(b)),di?(n.setAttribute("style","display:none !important"),n.removeAttribute("class"),n.innerHTML=""):n.remove(),bn()&&(Pr(),xr(),li()),yr()}function yr(){Pe([document.documentElement,document.body],[w.shown,w["height-auto"],w["no-backdrop"],w["toast-shown"]])}function je(e){e=Sr(e);let n=tt.swalPromiseResolve.get(this),s=Or(this);this.isAwaitingPromise?e.isDismissed||(bt(this),n(e)):s&&n(e)}let Or=e=>{let n=z();if(!n)return!1;let s=B.innerParams.get(e);if(!s||Le(n,s.hideClass.popup))return!1;Pe(n,s.showClass.popup),F(n,s.hideClass.popup);let p=ge();return Pe(p,s.showClass.backdrop),F(p,s.hideClass.backdrop),kr(e,n,s),!0};function mi(e){let n=tt.swalPromiseReject.get(this);bt(this),n&&n(e)}let bt=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,B.innerParams.get(e)||e._destroy())},Sr=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),kr=(e,n,s)=>{var p;let v=ge(),P=Hn(n);typeof s.willClose=="function"&&s.willClose(n),(p=b.eventEmitter)===null||p===void 0||p.emit("willClose",n),P?Ir(e,n,v,s.returnFocus,s.didClose):ci(e,v,s.returnFocus,s.didClose)},Ir=(e,n,s,p,v)=>{b.swalCloseEventFinishedCallback=ci.bind(null,e,s,p,v);let P=function(V){if(V.target===n){var L;(L=b.swalCloseEventFinishedCallback)===null||L===void 0||L.call(b),delete b.swalCloseEventFinishedCallback,n.removeEventListener("animationend",P),n.removeEventListener("transitionend",P)}};n.addEventListener("animationend",P),n.addEventListener("transitionend",P)},pi=(e,n)=>{setTimeout(()=>{var s;typeof n=="function"&&n.bind(e.params)(),(s=b.eventEmitter)===null||s===void 0||s.emit("didClose"),e._destroy&&e._destroy()})},it=e=>{let n=z();if(n||new Ut,n=z(),!n)return;let s=Je();yt()?pe(Qe()):Ar(n,e),ie(s),n.setAttribute("data-loading","true"),n.setAttribute("aria-busy","true"),n.focus()},Ar=(e,n)=>{let s=ut(),p=Je();!s||!p||(!n&&fe(Ae())&&(n=Ae()),ie(s),n&&(pe(n),p.setAttribute("data-button-to-replace",n.className),s.insertBefore(p,n)),F([e,s],w.loading))},Er=(e,n)=>{n.input==="select"||n.input==="radio"?Ur(e,n):["text","email","number","tel","textarea"].some(s=>s===n.input)&&(mn(n.inputValue)||pn(n.inputValue))&&(it(Ae()),zr(e,n))},Dr=(e,n)=>{let s=e.getInput();if(!s)return null;switch(n.input){case"checkbox":return Tr(s);case"radio":return Vr(s);case"file":return Lr(s);default:return n.inputAutoTrim?s.value.trim():s.value}},Tr=e=>e.checked?1:0,Vr=e=>e.checked?e.value:null,Lr=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,Ur=(e,n)=>{let s=z();if(!s)return;let p=v=>{n.input==="select"?Fr(s,Et(v),n):n.input==="radio"&&jr(s,Et(v),n)};mn(n.inputOptions)||pn(n.inputOptions)?(it(Ae()),pt(n.inputOptions).then(v=>{e.hideLoading(),p(v)})):typeof n.inputOptions=="object"?p(n.inputOptions):ne(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof n.inputOptions}`)},zr=(e,n)=>{let s=e.getInput();s&&(pe(s),pt(n.inputValue).then(p=>{s.value=n.input==="number"?`${parseFloat(p)||0}`:`${p}`,ie(s),s.focus(),e.hideLoading()}).catch(p=>{ne(`Error in inputValue promise: ${p}`),s.value="",ie(s),s.focus(),e.hideLoading()}))};function Fr(e,n,s){let p=Fe(e,w.select);if(!p)return;let v=(P,V,L)=>{let Y=document.createElement("option");Y.value=L,we(Y,V),Y.selected=gi(L,s.inputValue),P.appendChild(Y)};n.forEach(P=>{let V=P[0],L=P[1];if(Array.isArray(L)){let Y=document.createElement("optgroup");Y.label=V,Y.disabled=!1,p.appendChild(Y),L.forEach(rt=>v(Y,rt[1],rt[0]))}else v(p,L,V)}),p.focus()}function jr(e,n,s){let p=Fe(e,w.radio);if(!p)return;n.forEach(P=>{let V=P[0],L=P[1],Y=document.createElement("input"),rt=document.createElement("label");Y.type="radio",Y.name=w.radio,Y.value=V,gi(V,s.inputValue)&&(Y.checked=!0);let An=document.createElement("span");we(An,L),An.className=w.label,rt.appendChild(Y),rt.appendChild(An),p.appendChild(rt)});let v=p.querySelectorAll("input");v.length&&v[0].focus()}let Et=e=>{let n=[];return e instanceof Map?e.forEach((s,p)=>{let v=s;typeof v=="object"&&(v=Et(v)),n.push([p,v])}):Object.keys(e).forEach(s=>{let p=e[s];typeof p=="object"&&(p=Et(p)),n.push([s,p])}),n},gi=(e,n)=>!!n&&n.toString()===e.toString(),Nr=e=>{let n=B.innerParams.get(e);e.disableButtons(),n.input?ui(e,"confirm"):Sn(e,!0)},Br=e=>{let n=B.innerParams.get(e);e.disableButtons(),n.returnInputValueOnDeny?ui(e,"deny"):On(e,!1)},Rr=(e,n)=>{e.disableButtons(),n(et.cancel)},ui=(e,n)=>{let s=B.innerParams.get(e);if(!s.input){ne(`The "input" parameter is needed to be set when using returnInputValueOn${Ke(n)}`);return}let p=e.getInput(),v=Dr(e,s);s.inputValidator?Wr(e,v,n):p&&!p.checkValidity()?(e.enableButtons(),e.showValidationMessage(s.validationMessage||p.validationMessage)):n==="deny"?On(e,v):Sn(e,v)},Wr=(e,n,s)=>{let p=B.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>pt(p.inputValidator(n,p.validationMessage))).then(P=>{e.enableButtons(),e.enableInput(),P?e.showValidationMessage(P):s==="deny"?On(e,n):Sn(e,n)})},On=(e,n)=>{let s=B.innerParams.get(e||void 0);s.showLoaderOnDeny&&it(We()),s.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>pt(s.preDeny(n,s.validationMessage))).then(v=>{v===!1?(e.hideLoading(),bt(e)):e.close({isDenied:!0,value:typeof v>"u"?n:v})}).catch(v=>hi(e||void 0,v))):e.close({isDenied:!0,value:n})},fi=(e,n)=>{e.close({isConfirmed:!0,value:n})},hi=(e,n)=>{e.rejectPromise(n)},Sn=(e,n)=>{let s=B.innerParams.get(e||void 0);s.showLoaderOnConfirm&&it(),s.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>pt(s.preConfirm(n,s.validationMessage))).then(v=>{fe(Mt())||v===!1?(e.hideLoading(),bt(e)):fi(e,typeof v>"u"?n:v)}).catch(v=>hi(e||void 0,v))):fi(e,n)};function Dt(){let e=B.innerParams.get(this);if(!e)return;let n=B.domCache.get(this);pe(n.loader),yt()?e.icon&&ie(Qe()):$r(n),Pe([n.popup,n.actions],w.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}let $r=e=>{let n=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));n.length?ie(n[0],"inline-block"):vo()&&pe(e.actions)};function bi(){let e=B.innerParams.get(this),n=B.domCache.get(this);return n?Ot(n.popup,e.input):null}function vi(e,n,s){let p=B.domCache.get(e);n.forEach(v=>{p[v].disabled=s})}function wi(e,n){let s=z();if(!(!s||!e))if(e.type==="radio"){let p=s.querySelectorAll(`[name="${w.radio}"]`);for(let v=0;v<p.length;v++)p[v].disabled=n}else e.disabled=n}function _i(){vi(this,["confirmButton","denyButton","cancelButton"],!1)}function xi(){vi(this,["confirmButton","denyButton","cancelButton"],!0)}function Ci(){wi(this.getInput(),!1)}function Mi(){wi(this.getInput(),!0)}function Pi(e){let n=B.domCache.get(this),s=B.innerParams.get(this);we(n.validationMessage,e),n.validationMessage.className=w["validation-message"],s.customClass&&s.customClass.validationMessage&&F(n.validationMessage,s.customClass.validationMessage),ie(n.validationMessage);let p=this.getInput();p&&(p.setAttribute("aria-invalid","true"),p.setAttribute("aria-describedby",w["validation-message"]),Wn(p),F(p,w.inputerror))}function yi(){let e=B.domCache.get(this);e.validationMessage&&pe(e.validationMessage);let n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),Pe(n,w.inputerror))}let ot={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Yr=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],qr={allowEnterKey:void 0},Hr=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Oi=e=>Object.prototype.hasOwnProperty.call(ot,e),Si=e=>Yr.indexOf(e)!==-1,ki=e=>qr[e],Zr=e=>{Oi(e)||te(`Unknown parameter "${e}"`)},Gr=e=>{Hr.includes(e)&&te(`The parameter "${e}" is incompatible with toasts`)},Kr=e=>{let n=ki(e);n&&jn(e,n)},Ii=e=>{e.backdrop===!1&&e.allowOutsideClick&&te('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(e.theme)&&te(`Invalid theme "${e.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(let n in e)Zr(n),e.toast&&Gr(n),Kr(n)};function Ai(e){let n=ge(),s=z(),p=B.innerParams.get(this);if(!s||Le(s,p.hideClass.popup)){te("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let v=Qr(e),P=Object.assign({},p,v);Ii(P),n.dataset.swal2Theme=P.theme,oi(this,P),B.innerParams.set(this,P),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}let Qr=e=>{let n={};return Object.keys(e).forEach(s=>{Si(s)?n[s]=e[s]:te(`Invalid parameter to update: ${s}`)}),n};function Ei(){let e=B.domCache.get(this),n=B.innerParams.get(this);if(!n){Di(this);return}e.popup&&b.swalCloseEventFinishedCallback&&(b.swalCloseEventFinishedCallback(),delete b.swalCloseEventFinishedCallback),typeof n.didDestroy=="function"&&n.didDestroy(),b.eventEmitter.emit("didDestroy"),Xr(this)}let Xr=e=>{Di(e),delete e.params,delete b.keydownHandler,delete b.keydownTarget,delete b.currentInstance},Di=e=>{e.isAwaitingPromise?(kn(B,e),e.isAwaitingPromise=!0):(kn(tt,e),kn(B,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},kn=(e,n)=>{for(let s in e)e[s].delete(n)};var Jr=Object.freeze({__proto__:null,_destroy:Ei,close:je,closeModal:je,closePopup:je,closeToast:je,disableButtons:xi,disableInput:Mi,disableLoading:Dt,enableButtons:_i,enableInput:Ci,getInput:bi,handleAwaitingPromise:bt,hideLoading:Dt,rejectPromise:mi,resetValidationMessage:yi,showValidationMessage:Pi,update:Ai});let ea=(e,n,s)=>{e.toast?ta(e,n,s):(ia(n),oa(n),ra(e,n,s))},ta=(e,n,s)=>{n.popup.onclick=()=>{e&&(na(e)||e.timer||e.input)||s(et.close)}},na=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton),Tt=!1,ia=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(n){e.container.onmouseup=()=>{},n.target===e.container&&(Tt=!0)}}},oa=e=>{e.container.onmousedown=n=>{n.target===e.container&&n.preventDefault(),e.popup.onmouseup=function(s){e.popup.onmouseup=()=>{},(s.target===e.popup||s.target instanceof HTMLElement&&e.popup.contains(s.target))&&(Tt=!0)}}},ra=(e,n,s)=>{n.container.onclick=p=>{if(Tt){Tt=!1;return}p.target===n.container&&Ct(e.allowOutsideClick)&&s(et.backdrop)}},aa=e=>typeof e=="object"&&e.jquery,Ti=e=>e instanceof Element||aa(e),sa=e=>{let n={};return typeof e[0]=="object"&&!Ti(e[0])?Object.assign(n,e[0]):["title","html","icon"].forEach((s,p)=>{let v=e[p];typeof v=="string"||Ti(v)?n[s]=v:v!==void 0&&ne(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof v}`)}),n};function la(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return new this(...n)}function da(e){class n extends this{_main(p,v){return super._main(p,Object.assign({},e,v))}}return n}let ca=()=>b.timeout&&b.timeout.getTimerLeft(),Vi=()=>{if(b.timeout)return wo(),b.timeout.stop()},Li=()=>{if(b.timeout){let e=b.timeout.start();return wn(e),e}},ma=()=>{let e=b.timeout;return e&&(e.running?Vi():Li())},pa=e=>{if(b.timeout){let n=b.timeout.increase(e);return wn(n,!0),n}},ga=()=>!!(b.timeout&&b.timeout.isRunning()),Ui=!1,In={};function ua(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";In[e]=this,Ui||(document.body.addEventListener("click",fa),Ui=!0)}let fa=e=>{for(let n=e.target;n&&n!==document;n=n.parentNode)for(let s in In){let p=n.getAttribute(s);if(p){In[s].fire({template:p});return}}};class ha{constructor(){this.events={}}_getHandlersByEventName(n){return typeof this.events[n]>"u"&&(this.events[n]=[]),this.events[n]}on(n,s){let p=this._getHandlersByEventName(n);p.includes(s)||p.push(s)}once(n,s){var p=this;let v=function(){p.removeListener(n,v);for(var P=arguments.length,V=new Array(P),L=0;L<P;L++)V[L]=arguments[L];s.apply(p,V)};this.on(n,v)}emit(n){for(var s=arguments.length,p=new Array(s>1?s-1:0),v=1;v<s;v++)p[v-1]=arguments[v];this._getHandlersByEventName(n).forEach(P=>{try{P.apply(this,p)}catch(V){console.error(V)}})}removeListener(n,s){let p=this._getHandlersByEventName(n),v=p.indexOf(s);v>-1&&p.splice(v,1)}removeAllListeners(n){this.events[n]!==void 0&&(this.events[n].length=0)}reset(){this.events={}}}b.eventEmitter=new ha;var ba=Object.freeze({__proto__:null,argsToParams:sa,bindClickHandler:ua,clickCancel:sr,clickConfirm:ri,clickDeny:ar,enableLoading:it,fire:la,getActions:ut,getCancelButton:Xe,getCloseButton:fn,getConfirmButton:Ae,getContainer:ge,getDenyButton:We,getFocusableElements:hn,getFooter:Rn,getHtmlContainer:gn,getIcon:Qe,getIconContent:go,getImage:Bn,getInputLabel:uo,getLoader:Je,getPopup:z,getProgressSteps:un,getTimerLeft:ca,getTimerProgressBar:Pt,getTitle:Nn,getValidationMessage:Mt,increaseTimer:pa,isDeprecatedParameter:ki,isLoading:ho,isTimerRunning:ga,isUpdatableParameter:Si,isValidParameter:Oi,isVisible:rr,mixin:da,off:(e,n)=>{if(!e){b.eventEmitter.reset();return}n?b.eventEmitter.removeListener(e,n):b.eventEmitter.removeAllListeners(e)},on:(e,n)=>{b.eventEmitter.on(e,n)},once:(e,n)=>{b.eventEmitter.once(e,n)},resumeTimer:Li,showLoading:it,stopTimer:Vi,toggleTimer:ma});class va{constructor(n,s){this.callback=n,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(n){let s=this.running;return s&&this.stop(),this.remaining+=n,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let zi=["swal-title","swal-html","swal-footer"],wa=e=>{let n=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!n)return{};let s=n.content;return Sa(s),Object.assign(_a(s),xa(s),Ca(s),Ma(s),Pa(s),ya(s),Oa(s,zi))},_a=e=>{let n={};return Array.from(e.querySelectorAll("swal-param")).forEach(p=>{qe(p,["name","value"]);let v=p.getAttribute("name"),P=p.getAttribute("value");!v||!P||(typeof ot[v]=="boolean"?n[v]=P!=="false":typeof ot[v]=="object"?n[v]=JSON.parse(P):n[v]=P)}),n},xa=e=>{let n={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(p=>{let v=p.getAttribute("name"),P=p.getAttribute("value");!v||!P||(n[v]=new Function(`return ${P}`)())}),n},Ca=e=>{let n={};return Array.from(e.querySelectorAll("swal-button")).forEach(p=>{qe(p,["type","color","aria-label"]);let v=p.getAttribute("type");!v||!["confirm","cancel","deny"].includes(v)||(n[`${v}ButtonText`]=p.innerHTML,n[`show${Ke(v)}Button`]=!0,p.hasAttribute("color")&&(n[`${v}ButtonColor`]=p.getAttribute("color")),p.hasAttribute("aria-label")&&(n[`${v}ButtonAriaLabel`]=p.getAttribute("aria-label")))}),n},Ma=e=>{let n={},s=e.querySelector("swal-image");return s&&(qe(s,["src","width","height","alt"]),s.hasAttribute("src")&&(n.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(n.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(n.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(n.imageAlt=s.getAttribute("alt")||void 0)),n},Pa=e=>{let n={},s=e.querySelector("swal-icon");return s&&(qe(s,["type","color"]),s.hasAttribute("type")&&(n.icon=s.getAttribute("type")),s.hasAttribute("color")&&(n.iconColor=s.getAttribute("color")),n.iconHtml=s.innerHTML),n},ya=e=>{let n={},s=e.querySelector("swal-input");s&&(qe(s,["type","label","placeholder","value"]),n.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(n.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(n.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(n.inputValue=s.getAttribute("value")));let p=Array.from(e.querySelectorAll("swal-input-option"));return p.length&&(n.inputOptions={},p.forEach(v=>{qe(v,["value"]);let P=v.getAttribute("value");if(!P)return;let V=v.innerHTML;n.inputOptions[P]=V})),n},Oa=(e,n)=>{let s={};for(let p in n){let v=n[p],P=e.querySelector(v);P&&(qe(P,[]),s[v.replace(/^swal-/,"")]=P.innerHTML.trim())}return s},Sa=e=>{let n=zi.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(s=>{let p=s.tagName.toLowerCase();n.includes(p)||te(`Unrecognized element <${p}>`)})},qe=(e,n)=>{Array.from(e.attributes).forEach(s=>{n.indexOf(s.name)===-1&&te([`Unrecognized attribute "${s.name}" on <${e.tagName.toLowerCase()}>.`,`${n.length?`Allowed attributes are: ${n.join(", ")}`:"To set the value, use HTML within the element."}`])})},Fi=10,ka=e=>{let n=ge(),s=z();typeof e.willOpen=="function"&&e.willOpen(s),b.eventEmitter.emit("willOpen",s);let v=window.getComputedStyle(document.body).overflowY;Ea(n,s,e),setTimeout(()=>{Ia(n,s)},Fi),bn()&&(Aa(n,e.scrollbarPadding,v),fr()),!yt()&&!b.previousActiveElement&&(b.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(s)),b.eventEmitter.emit("didOpen",s),Pe(n,w["no-transition"])},Vt=e=>{let n=z();if(e.target!==n)return;let s=ge();n.removeEventListener("animationend",Vt),n.removeEventListener("transitionend",Vt),s.style.overflowY="auto"},Ia=(e,n)=>{Hn(n)?(e.style.overflowY="hidden",n.addEventListener("animationend",Vt),n.addEventListener("transitionend",Vt)):e.style.overflowY="auto"},Aa=(e,n,s)=>{hr(),n&&s!=="hidden"&&Mr(s),setTimeout(()=>{e.scrollTop=0})},Ea=(e,n,s)=>{F(e,s.showClass.backdrop),s.animation?(n.style.setProperty("opacity","0","important"),ie(n,"grid"),setTimeout(()=>{F(n,s.showClass.popup),n.style.removeProperty("opacity")},Fi)):ie(n,"grid"),F([document.documentElement,document.body],w.shown),s.heightAuto&&s.backdrop&&!s.toast&&F([document.documentElement,document.body],w["height-auto"])};var ji={email:(e,n)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(n||"Invalid email address"),url:(e,n)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(n||"Invalid URL")};function Da(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=ji.email),e.input==="url"&&(e.inputValidator=ji.url))}function Ta(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(te('Target parameter is not valid, defaulting to "body"'),e.target="body")}function Va(e){Da(e),e.showLoaderOnConfirm&&!e.preConfirm&&te(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Ta(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),So(e)}let Ee;var Lt=new WeakMap;class Q{constructor(){if(o(this,Lt,void 0),typeof window>"u")return;Ee=this;for(var n=arguments.length,s=new Array(n),p=0;p<n;p++)s[p]=arguments[p];let v=Object.freeze(this.constructor.argsToParams(s));this.params=v,this.isAwaitingPromise=!1,c(Lt,this,this._main(Ee.params))}_main(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ii(Object.assign({},s,n)),b.currentInstance){let P=tt.swalPromiseResolve.get(b.currentInstance),{isAwaitingPromise:V}=b.currentInstance;b.currentInstance._destroy(),V||P({isDismissed:!0}),bn()&&li()}b.currentInstance=Ee;let p=Ua(n,s);Va(p),Object.freeze(p),b.timeout&&(b.timeout.stop(),delete b.timeout),clearTimeout(b.restoreFocusTimeout);let v=za(Ee);return oi(Ee,p),B.innerParams.set(Ee,p),La(Ee,v,p)}then(n){return t(Lt,this).then(n)}finally(n){return t(Lt,this).finally(n)}}let La=(e,n,s)=>new Promise((p,v)=>{let P=V=>{e.close({isDismissed:!0,dismiss:V})};tt.swalPromiseResolve.set(e,p),tt.swalPromiseReject.set(e,v),n.confirmButton.onclick=()=>{Nr(e)},n.denyButton.onclick=()=>{Br(e)},n.cancelButton.onclick=()=>{Rr(e,P)},n.closeButton.onclick=()=>{P(et.close)},ea(s,n,P),lr(b,s,P),Er(e,s),ka(s),Fa(b,s,P),ja(n,s),setTimeout(()=>{n.container.scrollTop=0})}),Ua=(e,n)=>{let s=wa(e),p=Object.assign({},ot,n,s,e);return p.showClass=Object.assign({},ot.showClass,p.showClass),p.hideClass=Object.assign({},ot.hideClass,p.hideClass),p.animation===!1&&(p.showClass={backdrop:"swal2-noanimation"},p.hideClass={}),p},za=e=>{let n={popup:z(),container:ge(),actions:ut(),confirmButton:Ae(),denyButton:We(),cancelButton:Xe(),loader:Je(),closeButton:fn(),validationMessage:Mt(),progressSteps:un()};return B.domCache.set(e,n),n},Fa=(e,n,s)=>{let p=Pt();pe(p),n.timer&&(e.timeout=new va(()=>{s("timer"),delete e.timeout},n.timer),n.timerProgressBar&&(ie(p),_e(p,n,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&wn(n.timer)})))},ja=(e,n)=>{if(!n.toast){if(!Ct(n.allowEnterKey)){jn("allowEnterKey"),Ra();return}Na(e)||Ba(e,n)||yn(-1,1)}},Na=e=>{let n=Array.from(e.popup.querySelectorAll("[autofocus]"));for(let s of n)if(s instanceof HTMLElement&&fe(s))return s.focus(),!0;return!1},Ba=(e,n)=>n.focusDeny&&fe(e.denyButton)?(e.denyButton.focus(),!0):n.focusCancel&&fe(e.cancelButton)?(e.cancelButton.focus(),!0):n.focusConfirm&&fe(e.confirmButton)?(e.confirmButton.focus(),!0):!1,Ra=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let e=new Date,n=localStorage.getItem("swal-initiation");n?(e.getTime()-Date.parse(n))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let s=document.createElement("audio");s.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",s.loop=!0,document.body.appendChild(s),setTimeout(()=>{s.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}Q.prototype.disableButtons=xi,Q.prototype.enableButtons=_i,Q.prototype.getInput=bi,Q.prototype.disableInput=Mi,Q.prototype.enableInput=Ci,Q.prototype.hideLoading=Dt,Q.prototype.disableLoading=Dt,Q.prototype.showValidationMessage=Pi,Q.prototype.resetValidationMessage=yi,Q.prototype.close=je,Q.prototype.closePopup=je,Q.prototype.closeModal=je,Q.prototype.closeToast=je,Q.prototype.rejectPromise=mi,Q.prototype.update=Ai,Q.prototype._destroy=Ei,Object.assign(Q,ba),Object.keys(Jr).forEach(e=>{Q[e]=function(){return Ee&&Ee[e]?Ee[e](...arguments):null}}),Q.DismissReason=et,Q.version="11.19.1";let Ut=Q;return Ut.default=Ut,Ut});typeof Te<"u"&&Te.Sweetalert2&&(Te.swal=Te.sweetAlert=Te.Swal=Te.SweetAlert=Te.Sweetalert2);typeof document<"u"&&function(d,i){var t=d.createElement("style");if(d.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=i);else try{t.innerHTML=i}catch{t.innerText=i}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-confirm-button-background-color: #7066e0;--swal2-deny-button-background-color: #dc3741;--swal2-cancel-button-background-color: #6e7881}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-confirm-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-deny-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:var(--swal2-cancel-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-outline)}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});var Re=class d{constructor(i){this.socket=i;this.setupConnectionListeners()}configureSocket(i){this.socket.ioSocket.io.opts=j(j({},this.socket.ioSocket.io.opts),i.options),i.url&&(this.socket.ioSocket.io.uri=i.url),console.log("Socket configured with URL:",i.url)}setupConnectionListeners(){this.socket.on("connect",()=>console.log("Connected to socket server")),this.socket.on("disconnect",i=>console.error("Disconnected:",i)),this.socket.on("connect_error",i=>console.error("Connect error:",i)),this.socket.on("reconnect",i=>console.log("Reconnected:",i)),this.socket.on("reconnect_attempt",i=>console.log("Reconnect attempt:",i)),this.socket.on("reconnect_error",i=>console.error("Reconnect error:",i)),this.socket.on("reconnect_failed",()=>console.error("Reconnect failed"))}isConnected(){return this.socket.ioSocket.connected}listen(i){return this.socket.fromEvent(i)}emit(i,t){this.socket.emit(i,t)}joinRoom(i){this.socket.emit("registerDevice",{deviceId:i}),console.log("Registered device:",i)}leaveRoom(i){this.socket.emit("leave",i),console.log("Left room:",i)}getConnectionStatus(){return new En(i=>(this.socket.on("connect",()=>i.next(!0)),this.socket.on("disconnect",()=>i.next(!1)),i.next(this.isConnected()),()=>{this.socket.off("connect"),this.socket.off("disconnect")}))}disconnect(){this.socket.disconnect(),console.log("Socket disconnected")}connect(){this.socket.connect(),console.log("Socket connected")}onConnect(){return new En(i=>{this.isConnected()?(i.next(),i.complete()):this.socket.on("connect",()=>{i.next(),i.complete()})})}static \u0275fac=function(t){return new(t||d)(jt(Ji))};static \u0275prov=zt({token:d,factory:d.\u0275fac,providedIn:"root"})};var Ya=()=>["/admin/profile"];function qa(d,i){d&1&&(a(0,"li",12)(1,"a",36),f(2,"i",37),l(3," Users "),r(),a(4,"ul",38)(5,"li")(6,"a",39),f(7,"i",17),l(8," Users List "),r()(),a(9,"li")(10,"a",40),f(11,"i",41),l(12," Add User "),r()()()())}var Gt=class d{constructor(i,t,o){this.route=i;this.authService=t;this.socketService=o}logout(){sessionStorage.clear(),localStorage.clear(),this.socketService.disconnect(),this.route.navigate(["/login"])}static \u0275fac=function(t){return new(t||d)(S(W),S(be),S(Re))};static \u0275cmp=N({type:d,selectors:[["app-navbar"]],standalone:!1,decls:60,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","shadow-lg","sticky-top"],[1,"container"],["routerLink","/admin",1,"navbar-brand"],["src","https://iili.io/2gvDOlt.th.png","width","60","height","60",1,"d-inline-block","align-text-top","brand-logo"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/admin","routerLinkActive","active-link",1,"nav-link"],[1,"fas","fa-home","me-2"],["class","nav-item dropdown",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","advertisementDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-bullhorn","me-2"],["aria-labelledby","advertisementDropdown",1,"dropdown-menu","shadow-lg"],["routerLink","/admin/ads","routerLinkActive","active-link",1,"dropdown-item"],[1,"fas","fa-list","me-2"],["routerLink","/admin/newAds","routerLinkActive","active-link",1,"dropdown-item"],[1,"fas","fa-plus-circle","me-2"],["href","#","id","devicesDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-tablet-alt","me-2"],["aria-labelledby","devicesDropdown",1,"dropdown-menu","shadow-lg"],["routerLink","/admin/Devices","routerLinkActive","active-link",1,"dropdown-item"],["routerLink","/admin/addDevices","routerLinkActive","active-link",1,"dropdown-item"],["routerLink","/admin/archivedDevices","routerLinkActive","active-link",1,"dropdown-item"],[1,"fas","fa-archive","me-2"],["href","#","id","profileDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-user-circle","me-2"],["aria-labelledby","profileDropdown",1,"dropdown-menu","shadow-lg"],["routerLinkActive","active-link",1,"dropdown-item",3,"routerLink"],[1,"fas","fa-id-card","me-2"],["href","https://cloud.perfumatic.es/login",1,"btn","btn-warning","btn-sm","me-2"],[1,"fas","fa-cloud","me-1"],[1,"btn","btn-glow","ms-3",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],["href","#","id","usersDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-users","me-2"],["aria-labelledby","usersDropdown",1,"dropdown-menu","shadow-lg"],["routerLink","/admin/users","routerLinkActive","active-link",1,"dropdown-item"],["routerLink","/admin/addUser","routerLinkActive","active-link",1,"dropdown-item"],[1,"fas","fa-user-plus","me-2"]],template:function(t,o){t&1&&(a(0,"nav",0)(1,"div",1)(2,"a",2),f(3,"img",3),r(),a(4,"button",4),f(5,"span",5),r(),a(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),f(10,"i",10),l(11," Accueil "),r()(),y(12,qa,13,0,"li",11),a(13,"li",12)(14,"a",13),f(15,"i",14),l(16," Advertisement "),r(),a(17,"ul",15)(18,"li")(19,"a",16),f(20,"i",17),l(21," Advertisement List "),r()(),a(22,"li")(23,"a",18),f(24,"i",19),l(25," Add Advertisement "),r()()()(),a(26,"li",12)(27,"a",20),f(28,"i",21),l(29," Devices "),r(),a(30,"ul",22)(31,"li")(32,"a",23),f(33,"i",17),l(34," Device List "),r()(),a(35,"li")(36,"a",24),f(37,"i",19),l(38," Add Device "),r()(),a(39,"li")(40,"a",25),f(41,"i",26),l(42," View Archived "),r()()()(),a(43,"li",12)(44,"a",27),f(45,"i",28),l(46," Profile "),r(),a(47,"ul",29)(48,"li")(49,"a",30),f(50,"i",31),l(51," View Profile "),r()()()(),a(52,"li",8)(53,"a",32),f(54,"i",33),l(55," Perfumatic "),r()(),a(56,"li",8)(57,"a",34),C("click",function(){return o.logout()}),f(58,"i",35),l(59," Logout "),r()()()()()()),t&2&&(m(12),u("ngIf",o.authService.isAdmin),m(37),u("routerLink",$t(2,Ya)))},dependencies:[R,qt,Yi],styles:['.navbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1c1e,#2d3436);box-shadow:0 4px 20px #0003;padding:1rem 0;border-bottom:1px solid rgba(255,255,255,.1)}.navbar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:1.6rem;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease}.navbar-brand[_ngcontent-%COMP%]:hover{color:#00e5ff;transform:translateY(-1px)}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#ffffffe6;padding:.5rem 1rem;margin:0 .2rem;border-radius:6px;transition:all .3s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;margin-right:.5rem;color:#00e5ff;transition:all .3s ease}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#00e5ff;background:#00e5ff1a}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translateY(-2px)}.dropdown-menu[_ngcontent-%COMP%]{background:#2d3436;border:1px solid rgba(255,255,255,.1);border-radius:8px;margin-top:.5rem;box-shadow:0 4px 20px #0000004d;padding:.5rem}.dropdown-item[_ngcontent-%COMP%]{color:#ffffffe6;padding:.7rem 1rem;border-radius:6px;transition:all .3s ease}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00e5ff;margin-right:.5rem}.dropdown-item[_ngcontent-%COMP%]:hover{background:#00e5ff1a;color:#00e5ff}.active-link[_ngcontent-%COMP%]{color:#00e5ff!important;background:#00e5ff1a;position:relative}.active-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:30%;height:2px;background:#00e5ff;border-radius:2px}.btn-glow[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4757,#ff6b81);color:#fff;border:none;padding:.7rem 1.5rem;border-radius:50px;font-weight:600;letter-spacing:.5px;box-shadow:0 4px 15px #ff47574d;transition:all .3s ease}.btn-glow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;transition:all .3s ease}.btn-glow[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ff6b81,#ff4757);transform:translateY(-2px);box-shadow:0 6px 20px #ff475766}.btn-glow[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:rotate(180deg)}@media (max-width: 991px){.navbar-nav[_ngcontent-%COMP%]{padding:1rem 0}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.8rem 1rem;margin:.2rem 0}.btn-glow[_ngcontent-%COMP%]{margin-top:1rem;width:100%;text-align:center}.dropdown-menu[_ngcontent-%COMP%]{background:#2d3436f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}}']})};var Kt=class d{constructor(i){this.router=i}ngOnInit(){this.checkAuthentication()}checkAuthentication(){sessionStorage.getItem("authToken")||this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||d)(S(W))};static \u0275cmp=N({type:d,selectors:[["app-admin"]],standalone:!1,decls:2,vars:0,template:function(t,o){t&1&&f(0,"app-navbar")(1,"router-outlet")},dependencies:[$i,Gt],encapsulation:2})};var Qt=$a(lo());function Za(d,i){if(d&1){let t=E();a(0,"div",22)(1,"button",23),C("click",function(){_(t);let c=h();return x(c.switchTab("all"))}),f(2,"i",24),a(3,"span"),l(4,"All Advertisements"),r()(),a(5,"button",23),C("click",function(){_(t);let c=h();return x(c.switchTab("my"))}),f(6,"i",25),a(7,"span"),l(8,"My Advertisements"),r()()()}if(d&2){let t=h();m(),xe("active",t.activeTab==="all"),m(4),xe("active",t.activeTab==="my")}}function Ga(d,i){if(d&1){let t=E();a(0,"div",26)(1,"div",27)(2,"span",28),l(3),r(),a(4,"div",29)(5,"button",30),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openEditModal(c))}),f(6,"i",31),r(),a(7,"button",32),C("click",function(){let c=_(t).$implicit,g=h();return x(g.deleteAdvertisement(c._id))}),f(8,"i",33),r()()(),a(9,"div",34)(10,"h3",35),l(11),r(),a(12,"button",36),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openDetailsModal(c))}),f(13,"i",37),a(14,"span"),l(15,"View Details"),r()()()()}if(d&2){let t=i.$implicit,o=i.index;m(3),M("#",o+1,""),m(8),T(t.name)}}function Ka(d,i){if(d&1&&f(0,"video",46),d&2){let t=h(2);u("src",t.selectedVideoUrl,ze)}}function Qa(d,i){if(d&1){let t=E();a(0,"div",38)(1,"div",39),C("click",function(){_(t);let c=h();return x(c.closeModal())}),r(),a(2,"div",40)(3,"button",41),C("click",function(){_(t);let c=h();return x(c.closeModal())}),f(4,"i",42),r(),a(5,"h5",43),l(6,"Advertisement Preview"),r(),a(7,"div",44),y(8,Ka,1,1,"video",45),r()()()}if(d&2){let t=h();m(8),u("ngIf",t.selectedVideoUrl)}}function Xa(d,i){if(d&1&&(a(0,"div",73)(1,"span",74),l(2),r()()),d&2){let t=h(3);m(2),M("Selected file: ",t.selectedFile.name,"")}}function Ja(d,i){if(d&1){let t=E();a(0,"div",48)(1,"label",68),f(2,"i",69),l(3,"Choose Video File "),r(),a(4,"input",70,1),C("change",function(c){_(t);let g=h(2);return x(g.onFileSelected(c))}),r(),a(6,"small",71),l(7,"Maximum file size: 100MB"),r(),y(8,Xa,3,1,"div",72),r()}if(d&2){let t=h(2);m(8),u("ngIf",t.selectedFile)}}function es(d,i){if(d&1){let t=E();a(0,"div",48)(1,"label",75),l(2,"YouTube URL"),r(),a(3,"div",76)(4,"input",77),A("ngModelChange",function(c){_(t);let g=h(2);return I(g.youtubeUrl,c)||(g.youtubeUrl=c),x(c)}),r()()()}if(d&2){let t=h(2);m(4),k("ngModel",t.youtubeUrl)}}function ts(d,i){if(d&1&&(a(0,"div",78),l(1),r()),d&2){let t=h(2);m(),T(t.errorMessage)}}function ns(d,i){if(d&1&&(a(0,"div",79),l(1),r()),d&2){let t=h(2);m(),T(t.successMessage)}}function is(d,i){if(d&1&&(a(0,"div",80)(1,"div",81)(2,"div",82),l(3),r()(),a(4,"small",83),l(5),r()()),d&2){let t=h(2);m(2),at("width",t.uploadProgress,"%"),Wt("aria-valuenow",t.uploadProgress),m(),M(" ",t.uploadProgress,"% "),m(2),M(" ",t.uploadProgress<100?"Updating content...":"Processing..."," ")}}function os(d,i){if(d&1){let t=E();a(0,"button",84),C("click",function(){_(t);let c=h(2);return x(c.updateAdvertisement())}),f(1,"i",85),l(2),r()}if(d&2){let t=h(2);u("disabled",t.isUploading),m(2),M(" ",t.isUploading?"Updating...":"Update with New Video"," ")}}function rs(d,i){if(d&1){let t=E();a(0,"button",86),C("click",function(){_(t);let c=h(2);return x(c.updateAdvertisement())}),f(1,"i",87),l(2),r()}if(d&2){let t=h(2);u("disabled",t.isUploading),m(2),M(" ",t.isUploading?"Updating...":"Update Details"," ")}}function as(d,i){if(d&1){let t=E();a(0,"div",38)(1,"div",39),C("click",function(){_(t);let c=h();return x(c.closeEditModal())}),r(),a(2,"div",40)(3,"button",41),C("click",function(){_(t);let c=h();return x(c.closeEditModal())}),f(4,"i",42),r(),a(5,"h2",43),l(6,"Edit Advertisement"),r(),a(7,"form",47,0),C("ngSubmit",function(){_(t);let c=h();return x(c.updateAdvertisement())}),a(9,"div",48)(10,"label",49),l(11,"Name"),r(),a(12,"input",50),A("ngModelChange",function(c){_(t);let g=h();return I(g.editAdvertisementObject.name,c)||(g.editAdvertisementObject.name=c),x(c)}),r()(),a(13,"div",48)(14,"label",51),l(15,"Description"),r(),a(16,"textarea",52),A("ngModelChange",function(c){_(t);let g=h();return I(g.editAdvertisementObject.description,c)||(g.editAdvertisementObject.description=c),x(c)}),r()(),a(17,"div",48)(18,"label",53),l(19,"Video Source"),r(),a(20,"select",54),A("ngModelChange",function(c){_(t);let g=h();return I(g.selectedVideoSource,c)||(g.selectedVideoSource=c),x(c)}),a(21,"option",55),l(22,"Upload from Computer"),r(),a(23,"option",56),l(24,"YouTube Video"),r()()(),y(25,Ja,9,1,"div",57)(26,es,5,1,"div",57),a(27,"div",48)(28,"label",58),l(29,"Orientation"),r(),a(30,"select",59),A("ngModelChange",function(c){_(t);let g=h();return I(g.editAdvertisementObject.orientation,c)||(g.editAdvertisementObject.orientation=c),x(c)}),a(31,"option",60),l(32,"Portrait"),r(),a(33,"option",61),l(34,"Landscape"),r()()(),y(35,ts,2,1,"div",62)(36,ns,2,1,"div",63)(37,is,6,5,"div",64),a(38,"div",65),y(39,os,3,2,"button",66)(40,rs,3,2,"button",67),r()()()()}if(d&2){let t=h();m(12),k("ngModel",t.editAdvertisementObject.name),m(4),k("ngModel",t.editAdvertisementObject.description),m(4),k("ngModel",t.selectedVideoSource),m(5),u("ngIf",t.selectedVideoSource==="local"),m(),u("ngIf",t.selectedVideoSource==="youtube"),m(4),k("ngModel",t.editAdvertisementObject.orientation),m(5),u("ngIf",t.errorMessage),m(),u("ngIf",t.successMessage),m(),u("ngIf",t.isUploading),m(2),u("ngIf",t.selectedVideoSource==="local"&&t.selectedFile||t.selectedVideoSource==="youtube"&&t.youtubeUrl),m(),u("ngIf",!(t.selectedVideoSource==="local"&&t.selectedFile)&&!(t.selectedVideoSource==="youtube"&&t.youtubeUrl))}}function ss(d,i){if(d&1){let t=E();a(0,"div",38)(1,"div",39),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),r(),a(2,"div",40)(3,"h5",43),l(4,"Confirm Archive"),r(),a(5,"p"),l(6,"Are you sure you want to archive this advertisement?"),r(),a(7,"div",88)(8,"button",89),C("click",function(){_(t);let c=h();return x(c.archiveAd(c.archivingAdId))}),l(9,"Yes"),r(),a(10,"button",90),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),l(11,"No"),r()()()()}}function ls(d,i){if(d&1&&(a(0,"div",92)(1,"label"),f(2,"i",106),l(3," Created By"),r(),a(4,"div",107)(5,"div",108),l(6),r(),a(7,"div",109)(8,"span",110),l(9),r(),a(10,"span",111),l(11),r()()()()),d&2){let t=h(3);m(6),M(" ",(t.selectedAd.userId==null||t.selectedAd.userId.username==null?null:t.selectedAd.userId.username.charAt(0))||"U"," "),m(3),T((t.selectedAd.userId==null?null:t.selectedAd.userId.username)||"N/A"),m(2),T((t.selectedAd.userId==null?null:t.selectedAd.userId.email)||"N/A")}}function ds(d,i){if(d&1&&(a(0,"div",97)(1,"div",92)(2,"label"),f(3,"i",98),l(4," Name"),r(),a(5,"p"),l(6),r()(),y(7,ls,12,3,"div",99),a(8,"div",92)(9,"label"),f(10,"i",100),l(11," Description"),r(),a(12,"p"),l(13),r()(),a(14,"div",101)(15,"div",92)(16,"label"),f(17,"i",102),l(18," Created On"),r(),a(19,"p"),l(20),q(21,"date"),r()(),a(22,"div",92)(23,"label"),f(24,"i",103),l(25," Orientation"),r(),a(26,"span",104),f(27,"i",105),l(28),q(29,"titlecase"),r()()(),f(30,"br"),r()),d&2){let t=h(2);m(6),T(t.selectedAd.name),m(),u("ngIf",(t.userRole==="admin"||t.userRole==="SUPERADMIN")&&t.activeTab==="all"),m(6),T(t.selectedAd.description||"No description provided"),m(7),T(Ne(21,6,t.selectedAd.createdAt,"medium")),m(7),u("ngClass",t.selectedAd.orientation==="portrait"?"fa-mobile-alt":"fa-tablet-alt"),m(),M(" ",ce(29,9,t.selectedAd.orientation)," ")}}function cs(d,i){if(d&1&&f(0,"video",112),d&2){let t=h(2);u("src",t.selectedAd.videoUrl,ze)}}function ms(d,i){d&1&&(a(0,"div",113),l(1," No video available "),r())}function ps(d,i){if(d&1){let t=E();a(0,"div",38)(1,"div",39),C("click",function(){_(t);let c=h();return x(c.closeDetailsModal())}),r(),a(2,"div",40)(3,"button",41),C("click",function(){_(t);let c=h();return x(c.closeDetailsModal())}),f(4,"i",42),r(),a(5,"h2",43),l(6,"Advertisement Details"),r(),y(7,ds,31,11,"div",91),a(8,"div",92)(9,"label"),f(10,"i",93),l(11," Video Preview"),r(),a(12,"div",94),y(13,cs,1,1,"video",95)(14,ms,2,0,"div",96),r()()()()}if(d&2){let t=h();m(7),u("ngIf",t.selectedAd),m(5),u("ngClass",t.selectedAd.orientation),m(),u("ngIf",t.selectedAd.videoUrl),m(),u("ngIf",!t.selectedAd.videoUrl)}}var Xt=class d{constructor(i,t,o){this.adminService=i;this.router=t;this.authService=o;this.userRole=this.authService.userRole||"user",this.userId=this.authService.userId||"",this.userRole!=="admin"&&this.userRole!=="SUPERADMIN"&&(this.activeTab="my")}advertisements=[];successMessage="";searchTerm="";errorMessage="";selectedVideoUrl="";isModalOpen=!1;isEditModalOpen=!1;isConfirmDialogOpen=!1;archivingAdId="";editAdvertisementObject={};currentPage=1;itemsPerPage=20;filteredAds=[];userRole;userId;selectedVideoSource="local";videoSources=["local","youtube"];selectedFile=null;youtubeUrl="";isUploading=!1;uploadProgress=0;videoResolutionError="";activeTab="all";allAdvertisements=[];myAdvertisements=[];isDetailsModalOpen=!1;selectedAd=null;ngOnInit(){this.loadAdvertisements(),document.addEventListener("keydown",this.handleEscapeKey.bind(this))}switchTab(i){this.activeTab=i,this.currentPage=1,this.searchTerm="",this.filterAdvertisements()}loadAdvertisements(){this.userRole==="admin"||this.userRole==="SUPERADMIN"?this.adminService.getAds().subscribe(i=>{this.allAdvertisements=(i.data||[]).filter(t=>!t.isDeleted),this.adminService.getAdvertisementsByUserId(this.userId).subscribe(t=>{this.myAdvertisements=(t.data||[]).filter(o=>!o.isDeleted),this.filterAdvertisements()},t=>{this.errorMessage=t.error?.message||"Failed to load user advertisements."})},i=>{this.errorMessage=i.error?.message||"Failed to load advertisements."}):this.adminService.getAdvertisementsByUserId(this.userId).subscribe(i=>{this.myAdvertisements=(i.data||[]).filter(t=>!t.isDeleted),this.filterAdvertisements()},i=>{this.errorMessage=i.error?.message||"Failed to load advertisements."})}filterAdvertisements(){let i=this.activeTab==="all"?this.allAdvertisements:this.myAdvertisements;if(!this.searchTerm){this.filteredAds=[...i];return}let t=this.searchTerm.toLowerCase();this.filteredAds=i.filter(o=>o.name.toLowerCase().includes(t)||o.description.toLowerCase().includes(t)||o.userId?.username&&o.userId.username.toLowerCase().includes(t)||o.userId?.email&&o.userId.email.toLowerCase().includes(t))}filteredAdvertisements(){this.filterAdvertisements();let i=(this.currentPage-1)*this.itemsPerPage,t=i+this.itemsPerPage;return this.filteredAds.slice(i,t)}paginatedAdvertisements(){let i=(this.currentPage-1)*this.itemsPerPage,t=i+this.itemsPerPage;return this.filteredAds.slice(i,t)}get totalPages(){return Math.ceil(this.filteredAds.length/this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}openModal(i){this.selectedVideoUrl=i,this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}openEditModal(i){this.editAdvertisementObject=j({},i),this.selectedVideoSource="local",this.selectedFile=null,this.youtubeUrl="",this.uploadProgress=0,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}onFileSelected(i){let t=i.target.files[0];if(t){if(!t.type.startsWith("video/")){this.errorMessage="Please select a valid video file.";return}if(t.size>100*1024*1024){this.errorMessage="File size should not exceed 100MB.";return}this.selectedFile=t,this.errorMessage=""}}processYoutubeUrl(){return Ue(this,null,function*(){if(!this.youtubeUrl){this.errorMessage="Please enter a YouTube URL";return}if(!this.validateYoutubeUrl(this.youtubeUrl)){this.errorMessage="Please enter a valid YouTube URL";return}try{this.isUploading=!0,this.errorMessage="",this.isUploading=!1}catch{this.errorMessage="Failed to process YouTube URL",this.isUploading=!1}})}updateAdvertisement(){return Ue(this,null,function*(){try{if(this.isUploading=!0,this.errorMessage="",this.successMessage="",this.selectedVideoSource==="local"&&this.selectedFile||this.selectedVideoSource==="youtube"&&this.youtubeUrl){let t=new FormData;t.append("name",this.editAdvertisementObject.name||""),t.append("description",this.editAdvertisementObject.description||""),t.append("orientation",this.editAdvertisementObject.orientation||""),this.selectedVideoSource==="local"&&this.selectedFile?t.append("video",this.selectedFile):this.selectedVideoSource==="youtube"&&this.youtubeUrl&&t.append("youtubeUrl",this.youtubeUrl),console.log("FormData content:"),t.forEach((o,c)=>console.log(`${c}: ${o}`)),yield this.adminService.updateAdComplex(this.editAdvertisementObject._id,t).toPromise()}else{let t={name:this.editAdvertisementObject.name,description:this.editAdvertisementObject.description,orientation:this.editAdvertisementObject.orientation};console.log("Simple update data:",t),yield this.adminService.updateAdSimple(this.editAdvertisementObject._id,t).toPromise()}this.successMessage="Advertisement updated successfully!",this.isEditModalOpen=!1,this.loadAdvertisements()}catch(i){console.error("Error updating advertisement:",i),this.errorMessage=i.message||"Failed to update advertisement."}finally{this.isUploading=!1}})}confirmArchive(i){this.archivingAdId=i,this.isConfirmDialogOpen=!0}archiveAd(i){this.adminService.archiveAds(i).subscribe(()=>{this.successMessage="Advertisement archived successfully!",this.loadAdvertisements(),this.closeConfirmDialog()},t=>{console.error("Error archiving advertisement:",t),this.errorMessage=t.error?.message||"Failed to archive advertisement."})}closeConfirmDialog(){this.isConfirmDialogOpen=!1,this.archivingAdId="",document.body.style.overflow="auto"}navigateToAddAdvertisement(){this.router.navigate(["/admin/newAds"])}checkVideoResolution(i){let t={width:1920,height:1080},o=this.getVideoResolution(i);return o.width<=t.width&&o.height<=t.height}getVideoResolution(i){return{width:1280,height:720}}deleteAdvertisement(i){Qt.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(t=>{t.isConfirmed&&this.adminService.deleteAdById(i).subscribe(()=>{Qt.default.fire("Deleted!","Advertisement has been deleted.","success"),this.loadAdvertisements()},o=>{Qt.default.fire("Error!",o.error?.message||"Failed to delete advertisement.","error")})})}updateUploadProgress(i){i.lengthComputable&&(this.uploadProgress=Math.round(i.loaded/i.total*100))}validateYoutubeUrl(i){return/^(https?\:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/.test(i)}openDetailsModal(i){this.selectedAd=i,this.isDetailsModalOpen=!0,document.body.style.overflow="hidden"}closeDetailsModal(){this.isDetailsModalOpen=!1,this.selectedAd=null,document.body.style.overflow="auto"}openConfirmDialog(i){this.archivingAdId=i,this.isConfirmDialogOpen=!0,document.body.style.overflow="hidden"}ngOnDestroy(){document.removeEventListener("keydown",this.handleEscapeKey.bind(this)),document.body.style.overflow="auto"}handleEscapeKey(i){i.key==="Escape"&&(this.isDetailsModalOpen&&this.closeDetailsModal(),this.isConfirmDialogOpen&&this.closeConfirmDialog())}static \u0275fac=function(t){return new(t||d)(S($),S(W),S(be))};static \u0275cmp=N({type:d,selectors:[["app-advertisement"]],standalone:!1,decls:30,vars:11,consts:[["editForm","ngForm"],["fileInput",""],[1,"page-wrapper"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"header-actions"],[1,"btn-add",3,"click"],[1,"fas","fa-plus-circle"],[1,"search-box"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","Search advertisements...",3,"ngModelChange","ngModel"],["class","tabs-container",4,"ngIf"],[1,"content-wrapper"],[1,"ads-grid"],["class","ad-card",4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"pagination-info"],[1,"fas","fa-chevron-right"],["class","custom-modal",4,"ngIf"],[1,"tabs-container"],[1,"tab-btn",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-user-circle"],[1,"ad-card"],[1,"ad-card-header"],[1,"ad-number"],[1,"ad-actions"],[1,"action-btn","edit",3,"click"],[1,"fas","fa-edit"],[1,"action-btn","delete",3,"click"],[1,"fas","fa-trash-alt"],[1,"ad-card-content"],[1,"ad-name"],[1,"view-details-btn",3,"click"],[1,"fas","fa-info-circle"],[1,"custom-modal"],[1,"modal-overlay",3,"click"],[1,"modal-content"],[1,"modal-close",3,"click"],[1,"fas","fa-times"],[1,"modal-title"],[1,"video-container"],["controls","","class","modal-video","autoplay","",3,"src",4,"ngIf"],["controls","","autoplay","",1,"modal-video",3,"src"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","videoSource"],["id","videoSource","name","videoSource","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","local"],["value","youtube"],["class","form-group",4,"ngIf"],["for","orientation"],["id","orientation","name","orientation","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","portrait"],["value","landscape"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","upload-status",4,"ngIf"],[1,"mt-3"],["type","button","class","btn btn-primary me-2",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["for","videoFile",1,"file-upload-label"],[1,"fas","fa-cloud-upload-alt","me-2"],["type","file","id","videoFile","accept","video/*",1,"d-none",3,"change"],[1,"text-muted","d-block"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-success"],["for","youtubeUrl"],[1,"input-group"],["type","text","id","youtubeUrl","name","youtubeUrl","placeholder","Enter YouTube URL",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"upload-status"],[1,"progress","mt-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"text-muted"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"fas","fa-sync-alt","me-2"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-save","me-2"],[1,"dialog-actions"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"click"],["class","details-content",4,"ngIf"],[1,"detail-group"],[1,"fas","fa-film"],[1,"video-container",3,"ngClass"],["controls","","class","modal-video",3,"src",4,"ngIf"],["class","no-video",4,"ngIf"],[1,"details-content"],[1,"fas","fa-tag"],["class","detail-group",4,"ngIf"],[1,"fas","fa-align-left"],[1,"detail-row"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-mobile-alt"],[1,"orientation-badge"],[1,"fas",3,"ngClass"],[1,"fas","fa-user"],[1,"user-info"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],[1,"user-email"],["controls","",1,"modal-video",3,"src"],[1,"no-video"]],template:function(t,o){t&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),l(4,"Advertisement Management"),r(),a(5,"div",6)(6,"button",7),C("click",function(){return o.navigateToAddAdvertisement()}),f(7,"i",8),a(8,"span"),l(9,"New Advertisement"),r()(),a(10,"div",9),f(11,"i",10),a(12,"input",11),A("ngModelChange",function(g){return I(o.searchTerm,g)||(o.searchTerm=g),g}),r()()()(),y(13,Za,9,4,"div",12),r(),a(14,"div",13)(15,"div",14),y(16,Ga,16,2,"div",15),r(),a(17,"div",16)(18,"button",17),C("click",function(){return o.previousPage()}),f(19,"i",18),l(20," Previous "),r(),a(21,"span",19),l(22),r(),a(23,"button",17),C("click",function(){return o.nextPage()}),l(24," Next "),f(25,"i",20),r()()(),y(26,Qa,9,1,"div",21)(27,as,41,11,"div",21)(28,ss,12,0,"div",21)(29,ps,15,4,"div",21),r()),t&2&&(m(12),k("ngModel",o.searchTerm),m(),u("ngIf",o.userRole==="admin"||o.userRole==="SUPERADMIN"),m(3),u("ngForOf",o.filteredAdvertisements()),m(2),u("disabled",o.currentPage===1),m(4),Oe("Page ",o.currentPage," of ",o.totalPages,""),m(),u("disabled",o.currentPage===o.totalPages),m(3),u("ngIf",o.isModalOpen),m(),u("ngIf",o.isEditModalOpen),m(),u("ngIf",o.isConfirmDialogOpen),m(),u("ngIf",o.isDetailsModalOpen))},dependencies:[De,H,R,ee,ae,se,Z,re,G,X,le,J,oe,he,ct],styles:['.page-wrapper[_ngcontent-%COMP%]{min-height:100vh;background:#f8fafc;padding:2rem;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem}.page-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#1e293b;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.btn-add[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2563eb33}.search-box[_ngcontent-%COMP%]{position:relative;width:300px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#64748b}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:1px solid #e2e8f0;border-radius:8px;background:#fff;transition:all .3s ease}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.tabs-container[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.tab-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:#fff;border:1px solid #e2e8f0;border-radius:8px;color:#64748b;font-weight:500;cursor:pointer;transition:all .2s ease}.tab-btn.active[_ngcontent-%COMP%]{background:#f1f5f9;color:#1e293b;border-color:#cbd5e1}.ads-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:1rem;margin-bottom:2rem}.ad-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #00000014;overflow:hidden;transition:all .3s ease;border:1px solid rgba(226,232,240,.8)}.ad-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #0000001a}.ad-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f8fafc;border-bottom:1px solid #e2e8f0}.ad-number[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#64748b}.ad-actions[_ngcontent-%COMP%]{display:flex;gap:.35rem}.action-btn[_ngcontent-%COMP%]{padding:.4rem;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease}.action-btn.edit[_ngcontent-%COMP%]{background:#e0f2fe;color:#0284c7}.action-btn.edit[_ngcontent-%COMP%]:hover{background:#bae6fd}.action-btn.delete[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#fecaca}.ad-card-content[_ngcontent-%COMP%]{padding:.85rem;text-align:center}.ad-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#1e293b;margin:0 0 .75rem;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;height:2.6em}.view-details-btn[_ngcontent-%COMP%]{display:inline-block;padding:.5rem 1rem;background:#eff6ff;color:#3b82f6;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;font-size:.85rem;font-weight:500;width:100%}.view-details-btn[_ngcontent-%COMP%]:hover{background:#dbeafe}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:2rem}.pagination-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:#fff;border:1px solid #e2e8f0;border-radius:8px;color:#64748b;font-weight:500;cursor:pointer;transition:all .2s ease}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f1f5f9;color:#1e293b}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.custom-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000bf;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:1rem;border-radius:8px;width:95%;max-width:1400px;max-height:90vh;overflow-y:auto;z-index:1051;box-shadow:0 3px 15px #0000001f;animation:_ngcontent-%COMP%_modalFadeIn .3s ease forwards}.modal-close[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#f1f5f9;border:none;color:#64748b;cursor:pointer;width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.9rem;transition:all .2s ease;box-shadow:0 2px 5px #0000001a}.modal-close[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#1e293b;transform:rotate(90deg)}.modal-title[_ngcontent-%COMP%]{margin:0 0 .8rem;color:#1e293b;font-size:1.1rem;font-weight:700;position:relative;padding-bottom:.4rem}.modal-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:2px;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:3px}.details-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}.detail-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem;background:#f8fafc;padding:.6rem;border-radius:4px;border-left:2px solid #e2e8f0;transition:all .2s ease}.detail-group[_ngcontent-%COMP%]:hover{border-left-color:#3b82f6;background:#f1f5f9}.detail-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.65rem;text-transform:uppercase;color:#64748b;letter-spacing:.2px;font-weight:600;margin-bottom:0;display:flex;align-items:center;gap:.5rem}.detail-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3b82f6}.detail-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#334155;line-height:1.1;font-size:.75rem}.detail-row[_ngcontent-%COMP%]{display:flex;gap:.6rem;flex-wrap:wrap}.detail-row[_ngcontent-%COMP%]   .detail-group[_ngcontent-%COMP%]{min-width:130px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;margin-top:.2rem}.user-avatar[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#64748b;font-weight:600;font-size:.65rem}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#334155;font-size:.7rem}.user-email[_ngcontent-%COMP%]{font-size:.6rem;color:#64748b}.orientation-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.15rem .4rem;background:#eff6ff;color:#3b82f6;border-radius:12px;font-size:.65rem;font-weight:500;border:1px solid #dbeafe}.video-preview[_ngcontent-%COMP%]{margin-top:1rem}.video-container[_ngcontent-%COMP%]{margin-top:.6rem;border-radius:8px;overflow:hidden;background:#000;box-shadow:0 4px 12px #0000001a;position:relative;width:100%}.video-container.landscape[_ngcontent-%COMP%]{height:550px}.video-container.portrait[_ngcontent-%COMP%]{height:700px}.modal-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background:#000}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.6rem;margin-top:.8rem}.modal-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:5px;font-size:.8rem;gap:.3rem;border:none;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center}.modal-btn.edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.modal-btn.edit[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #2563eb33}.modal-btn.delete[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.modal-btn.delete[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #dc262633}.modal-btn.secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:1px solid #e2e8f0}.modal-btn.secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFadeIn .3s ease forwards}.dialog-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1.5rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s ease;border:none}.btn-danger[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#b91c1c}.btn-secondary[_ngcontent-%COMP%]{background:#e2e8f0;color:#1e293b}.btn-secondary[_ngcontent-%COMP%]:hover{background:#cbd5e1}@media (max-width: 1200px){.ads-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 992px){.ads-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.ads-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.ads-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.navbar[_ngcontent-%COMP%]{z-index:1000}@media (max-width: 768px){.details-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.video-container[_ngcontent-%COMP%]{padding-top:56.25%}}']})};function gs(d,i){if(d&1&&(a(0,"div",40)(1,"span",41),l(2),r()()),d&2){let t=h(2);m(2),M("Selected file: ",t.selectedFile.name,"")}}function us(d,i){if(d&1){let t=E();a(0,"div",8)(1,"label",35),f(2,"i",36),l(3,"Choose Video File "),r(),a(4,"input",37,1),C("change",function(c){_(t);let g=h();return x(g.onFileSelected(c))}),r(),a(6,"small",38),l(7,"Maximum file size: 100MB"),r(),y(8,gs,3,1,"div",39),r()}if(d&2){let t=h();m(8),u("ngIf",t.selectedFile)}}function fs(d,i){if(d&1&&(a(0,"div",42)(1,"div",43)(2,"div",44),l(3),r()(),a(4,"div",45)(5,"span",46),f(6,"i",47),l(7),r()()()),d&2){let t=h();m(2),at("width",t.uploadProgress,"%"),Wt("aria-valuenow",t.uploadProgress),m(),M(" ",t.uploadProgress,"% "),m(4),M(" ",t.successMessage||"Uploading video..."," ")}}function hs(d,i){if(d&1&&(a(0,"div",48),l(1),r()),d&2){let t=h();m(),M(" Estimated upload time: ",t.estimatedUploadTime," seconds ")}}function bs(d,i){if(d&1){let t=E();a(0,"div",49),f(1,"i",50),l(2),a(3,"button",51),C("click",function(){_(t);let c=h();return x(c.successMessage="")}),r()()}if(d&2){let t=h();m(2),M("",t.successMessage," ")}}function vs(d,i){if(d&1){let t=E();a(0,"div",52),f(1,"i",53),l(2),a(3,"button",51),C("click",function(){_(t);let c=h();return x(c.errorMessage="")}),r()()}if(d&2){let t=h();m(2),M("",t.errorMessage," ")}}function ws(d,i){if(d&1&&(a(0,"option",54),l(1),r()),d&2){let t=i.$implicit;u("value",t),m(),M(" ",t," ")}}var Jt=class d{constructor(i,t,o,c){this.adminService=i;this.videoDownloadService=t;this.router=o;this.ngZone=c}advertisementObject={name:"",description:"",videoUrl:"",orientation:""};orientations=["portrait","landscape"];videoSources=["local","youtube"];selectedVideoSource="local";selectedFile=null;isSubmitting=!1;successMessage="";errorMessage="";videoResolutionError="";youtubeUrl="";estimatedUploadTime=null;availableQualities=[];showQualitySelector=!1;selectedQuality=null;videoInfo=null;uploadProgress=0;isUploading=!1;isVideoProcessed=!1;uploadedVideoUrl=null;advertisementId=null;onFileSelected(i){let t=i.target.files[0];if(t){if(console.log("File selected:",{name:t.name,type:t.type,size:t.size}),t.size>100*1024*1024){this.errorMessage="File size should not exceed 100MB.",console.error("File too large:",t.size),this.selectedFile=null;return}this.selectedFile=t,this.errorMessage="",console.log("File accepted:",t.name)}}measureUploadSpeedAndEstimateTime(i){return Ue(this,null,function*(){try{let t=new FormData;t.append("file",new Blob([new Uint8Array(1e5)]));let o=Date.now();yield this.adminService.uploadVideo(t).toPromise();let g=(Date.now()-o)/1e3,ue=1e5*8/g,D=i.size*8/ue;this.estimatedUploadTime=Math.round(D)}catch(t){console.error("Error estimating upload time:",t),this.estimatedUploadTime=null}})}processYoutubeUrl(){return Ue(this,null,function*(){if(!this.youtubeUrl){this.errorMessage="Please enter a YouTube URL";return}if(!this.videoDownloadService.isValidYoutubeUrl(this.youtubeUrl)){this.errorMessage="Please enter a valid YouTube URL";return}try{this.isSubmitting=!0,this.successMessage="Processing YouTube video...",this.errorMessage="",this.showQualitySelector=!1,this.availableQualities=[];let i=yield this.videoDownloadService.downloadYoutubeVideo(this.youtubeUrl).toPromise();if(i&&Array.isArray(i)&&i.length>0)if(this.videoInfo=i[0],this.videoInfo.urls&&Array.isArray(this.videoInfo.urls))if(this.availableQualities=this.videoInfo.urls.filter(t=>t.extension==="mp4").sort((t,o)=>{let c=parseInt(t.quality)||0;return(parseInt(o.quality)||0)-c}),this.availableQualities.length>0)this.showQualitySelector=!0,this.successMessage=`${this.videoInfo.meta.title} - Select a video quality`;else throw new Error("No MP4 formats available for this video");else throw new Error("Invalid video URLs in response");else throw new Error("Invalid response from YouTube API")}catch(i){console.error("Error processing YouTube URL:",i),this.errorMessage=i.message||"Failed to process YouTube video. Please try again.",this.successMessage=""}finally{this.isSubmitting=!1}})}onQualitySelected(){if(this.selectedQuality){let i=this.availableQualities.find(t=>t.quality===this.selectedQuality);i&&(this.advertisementObject.videoUrl=i.url,this.successMessage=`Selected quality: ${i.quality}p - Ready to submit`)}}downloadVideo(){if(this.selectedQuality){let i=this.availableQualities.find(t=>t.quality===this.selectedQuality);if(i&&i.url){let t=document.createElement("a");t.href=i.url,t.target="_blank",t.download=`video_${this.selectedQuality}p.mp4`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}uploadVideo(){return Ue(this,null,function*(){if(console.log("=== UPLOAD VIDEO STARTED ==="),!this.selectedFile){console.error("No file selected"),this.errorMessage="Please select a video file";return}console.log("Selected file:",{name:this.selectedFile.name,type:this.selectedFile.type,size:this.formatBytes(this.selectedFile.size)});let i=new FormData,t=this.selectedFile.name,o=t.split(".").pop()?.toLowerCase();if(!this.isValidVideoExtension(o)){console.warn("File has invalid or missing extension:",o);let ue={"video/mp4":"mp4","video/mpeg":"mpeg","video/x-matroska":"mkv","video/x-msvideo":"avi","video/quicktime":"mov","video/webm":"webm","video/x-flv":"flv","video/3gpp":"3gp","video/3gpp2":"3g2","video/x-ms-wmv":"wmv"}[this.selectedFile.type]||"mp4";t=`${t.split(".")[0]}.${ue}`,console.log("Renamed file to ensure proper extension:",t)}let c=t!==this.selectedFile.name?new File([this.selectedFile],t,{type:this.selectedFile.type}):this.selectedFile;i.append("video",c),i.append("name",this.advertisementObject.name||t),i.append("description",this.advertisementObject.description||""),i.append("orientation",this.advertisementObject.orientation||""),console.log("Form data prepared with file:",t),this.uploadProgress=0,this.isUploading=!0,this.successMessage="",this.errorMessage="";let g=sessionStorage.getItem("authToken");if(!g){this.errorMessage="Authentication token not found",this.isUploading=!1;return}try{let b=Date.now().toString();i.append("uploadId",b);let ue=new Headers;ue.append("Authorization",`Bearer ${g}`);let O=yield fetch(`${qi.baseUrl}/api/cloudinary-advertisements/upload-with-progress`,{method:"POST",headers:ue,body:i});if(!O.ok)throw new Error(`HTTP error! Status: ${O.status}`);let D=O.body?.getReader();if(!D)throw new Error("Response body is not readable");let U=new TextDecoder,w="";Ue(this,null,function*(){try{for(;;){let{done:Me,value:xt}=yield D.read();if(Me){console.log("Stream complete");break}w+=U.decode(xt,{stream:!0});let Ke=w.split(`

`);w=Ke.pop()||"";for(let te of Ke)if(te.startsWith("data: "))try{let ne=JSON.parse(te.substring(6));this.ngZone.run(()=>{ne.event==="progress"?(this.uploadProgress=ne.percentage,this.successMessage=`Uploading: ${this.uploadProgress}%`):ne.event==="complete"?(this.uploadedVideoUrl=ne.data.fileInfo.url,this.advertisementId=ne.data.advertisementId,this.successMessage=ne.message||"Video uploaded successfully!",this.isVideoProcessed=!0,this.isUploading=!1):ne.event==="error"&&(this.errorMessage=ne.message||"Upload failed",this.isUploading=!1)})}catch(ne){console.error("Error parsing SSE message:",ne,te)}}}catch(Me){console.error("Error reading stream:",Me),this.ngZone.run(()=>{this.errorMessage="Error processing upload stream",this.isUploading=!1})}})}catch(b){console.error("Error in upload process:",b),this.errorMessage="Failed to upload video. Please try again.",this.isUploading=!1}})}generateRandomString(i=5){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o="";for(let c=0;c<i;c++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}sanitizeFileName(i){let t=i.replace(/\(\d+\)/g,()=>this.generateRandomString());return t=t.replace(/[^a-zA-Z0-9._-]/g,"_"),t=t.replace(/_+/g,"_"),t}addAdvertisement(){return Ue(this,null,function*(){if(!this.isVideoProcessed||!this.advertisementId){this.errorMessage="Please process the video first";return}this.isSubmitting=!0,this.successMessage="",this.errorMessage="";try{this.advertisementObject.videoUrl=this.uploadedVideoUrl;let i=yield this.adminService.completeAdvertisement(this.advertisementId,this.advertisementObject).toPromise();console.log("Advertisement added:",i),this.successMessage="Advertisement added successfully!",this.resetForm()}catch(i){console.error("Error adding advertisement:",i),this.errorMessage=i.error?.message||"Failed to add advertisement. Please try again."}finally{this.isSubmitting=!1}})}resetForm(){this.advertisementObject={name:"",description:"",videoUrl:"",orientation:""},this.selectedFile=null,this.youtubeUrl="",this.selectedVideoSource="local",this.availableQualities=[],this.showQualitySelector=!1,this.selectedQuality=null,this.videoInfo=null,this.advertisementId=null,this.isVideoProcessed=!1,this.uploadProgress=0}isValidVideoType(i){let t=["video/mp4","video/mpeg","video/x-matroska","video/x-msvideo","video/quicktime","video/webm","video/x-flv","video/3gpp","video/3gpp2","video/x-ms-wmv"];return console.log("Checking if mimetype is valid:",i),t.includes(i)}isValidVideoExtension(i){return i?["mp4","mpeg","mpg","mkv","avi","mov","webm","flv","3gp","3g2","wmv"].includes(i.toLowerCase()):!1}formatBytes(i,t=2){if(i===0)return"0 Bytes";let o=1024,c=t<0?0:t,g=["Bytes","KB","MB","GB","TB"],b=Math.floor(Math.log(i)/Math.log(o));return parseFloat((i/Math.pow(o,b)).toFixed(c))+" "+g[b]}static \u0275fac=function(t){return new(t||d)(S($),S(eo),S(W),S(Nt))};static \u0275cmp=N({type:d,selectors:[["app-add-advertisement"]],standalone:!1,decls:51,vars:20,consts:[["advertisementForm","ngForm"],["fileInput",""],[1,"page-container"],[1,"content-wrapper"],[1,"page-header"],[1,"page-title"],[1,"page-subtitle"],[1,"container","card","pt-5","mt-5","shadow"],[1,"form-group"],["for","videoSource"],[1,"fas","fa-film","me-2"],["id","videoSource","name","videoSource","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","local","selected",""],["class","form-group",4,"ngIf"],[1,"mt-3"],["class","upload-progress-container",4,"ngIf"],["class","text-muted mb-2",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"btn","btn-primary","upload-btn",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"ms-2"],["for","name"],[1,"fas","fa-tag","me-2"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","description"],[1,"fas","fa-align-left","me-2"],["id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","orientation"],[1,"fas","fa-mobile-alt","me-2"],["id","orientation","name","orientation","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","mt-3",3,"click","disabled"],[1,"fas","fa-save","me-2"],["for","videoFile",1,"file-upload-label"],[1,"fas","fa-cloud-upload-alt","me-2"],["type","file","id","videoFile","accept","video/*",3,"change"],[1,"text-muted","d-block"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"text-success"],[1,"upload-progress-container"],[1,"progress","mb-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated"],[1,"upload-details","text-center","mb-3"],[1,"upload-status"],[1,"fas","fa-sync","fa-spin","me-2"],[1,"text-muted","mb-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"fas","fa-check-circle","me-2"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"fas","fa-exclamation-circle","me-2"],[3,"value"]],template:function(t,o){if(t&1){let c=E();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),l(4,"Add New Advertisement"),r(),a(5,"p",6),l(6,"Upload and configure your advertisement details"),r()(),a(7,"div",7)(8,"form",null,0)(10,"div",8)(11,"label",9),f(12,"i",10),l(13,"Video Source "),r(),a(14,"select",11),A("ngModelChange",function(b){return _(c),I(o.selectedVideoSource,b)||(o.selectedVideoSource=b),x(b)}),a(15,"option",12),l(16,"Upload from Computer"),r()()(),y(17,us,9,1,"div",13),a(18,"div",14),y(19,fs,8,5,"div",15)(20,hs,2,1,"div",16)(21,bs,4,1,"div",17)(22,vs,4,1,"div",18),r(),a(23,"div",14)(24,"button",19),C("click",function(){return _(c),x(o.uploadVideo())}),f(25,"i",20),a(26,"span",21),l(27),r()()(),a(28,"div")(29,"div",8)(30,"label",22),f(31,"i",23),l(32,"Advertisement Name "),r(),a(33,"input",24),A("ngModelChange",function(b){return _(c),I(o.advertisementObject.name,b)||(o.advertisementObject.name=b),x(b)}),r()(),a(34,"div",8)(35,"label",25),f(36,"i",26),l(37,"Description "),r(),a(38,"textarea",27),A("ngModelChange",function(b){return _(c),I(o.advertisementObject.description,b)||(o.advertisementObject.description=b),x(b)}),l(39,"            "),r()(),a(40,"div",8)(41,"label",28),f(42,"i",29),l(43,"Orientation "),r(),a(44,"select",30),A("ngModelChange",function(b){return _(c),I(o.advertisementObject.orientation,b)||(o.advertisementObject.orientation=b),x(b)}),a(45,"option",31),l(46,"Select orientation"),r(),y(47,ws,2,2,"option",32),r()(),a(48,"button",33),C("click",function(){return _(c),x(o.addAdvertisement())}),f(49,"i",34),l(50),r()()()()()()}if(t&2){let c=ye(9);m(14),k("ngModel",o.selectedVideoSource),m(3),u("ngIf",o.selectedVideoSource==="local"),m(2),u("ngIf",o.isUploading),m(),u("ngIf",o.estimatedUploadTime&&!o.isUploading),m(),u("ngIf",o.successMessage&&!o.isUploading),m(),u("ngIf",o.errorMessage),m(2),u("disabled",o.isUploading||!o.selectedFile&&!o.youtubeUrl||o.isVideoProcessed),m(),u("ngClass",o.isUploading?"fa-spinner fa-spin":"fa-upload"),m(2),M(" ",o.isVideoProcessed?"Video Uploaded":o.isUploading?"Uploading...":"Upload Video"," "),m(),xe("disabled-form",!o.isVideoProcessed),m(5),k("ngModel",o.advertisementObject.name),u("disabled",!o.isVideoProcessed),m(5),k("ngModel",o.advertisementObject.description),u("disabled",!o.isVideoProcessed),m(6),k("ngModel",o.advertisementObject.orientation),u("disabled",!o.isVideoProcessed),m(3),u("ngForOf",o.orientations),m(),u("disabled",!o.isVideoProcessed||o.isSubmitting||!c.form.valid),m(2),M(" ",o.isSubmitting?"Saving...":"Save Advertisement"," ")}},dependencies:[De,H,R,ee,ae,se,Z,re,G,X,le,J,oe],styles:['.confirmation-dialog[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.confirmation-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:4px;box-shadow:0 4px 20px #00000026;max-width:400px;width:90%;text-align:center;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.confirmation-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;margin-bottom:1rem}.confirmation-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;margin-bottom:1.5rem}.confirmation-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.confirmation-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:4px;border:none;cursor:pointer;font-weight:500;transition:all .3s ease}.confirmation-actions[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.confirmation-actions[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]:hover{background:#bd2130}.confirmation-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.confirmation-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]:hover{background:#545b62}.waiting-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#ffffffe6;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.waiting-content[_ngcontent-%COMP%]{text-align:center;animation:_ngcontent-%COMP%_pulse 2s infinite}.waiting-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(0,123,255,.1);border-left-color:#007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.waiting-content[_ngcontent-%COMP%]   .waiting-text[_ngcontent-%COMP%]{color:#2d3748;font-weight:500;margin-top:1rem}.waiting-content[_ngcontent-%COMP%]   .waiting-subtext[_ngcontent-%COMP%]{color:#718096;font-size:.9rem;margin-top:.5rem}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.progress-bar-container[_ngcontent-%COMP%]{width:100%;max-width:300px;margin:1rem auto;background:#007bff1a;border-radius:999px;overflow:hidden;height:6px}.progress-bar[_ngcontent-%COMP%]{height:100%;background:#007bff;transition:width .3s ease;border-radius:999px}.status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:.5rem}.status-dot.status-waiting[_ngcontent-%COMP%]{background:gold;animation:_ngcontent-%COMP%_blink 1s infinite}.status-dot.status-success[_ngcontent-%COMP%]{background:#28a745}.status-dot.status-error[_ngcontent-%COMP%]{background:#dc3545}@keyframes _ngcontent-%COMP%_blink{0%{opacity:.4}50%{opacity:1}to{opacity:.4}}.upload-alert[_ngcontent-%COMP%]{position:fixed;top:0;left:50%;transform:translate(-50%);z-index:1050;background:#fff;padding:1rem 2rem;border-radius:0 0 4px 4px;box-shadow:0 4px 20px #00000026;display:flex;align-items:center;gap:1rem;min-width:300px;animation:_ngcontent-%COMP%_slideDown .3s ease-out forwards;border:1px solid rgba(220,53,69,.2);border-top:none}.upload-alert[_ngcontent-%COMP%]:before{content:"\\f071";font-family:"Font Awesome 5 Free";font-weight:900;color:#dc3545;font-size:1.2rem}.upload-alert[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{color:#bd2130;font-weight:500;margin:0}.upload-alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin-left:auto;background:transparent;border:none;color:#00000080;cursor:pointer;padding:.25rem;font-size:1.2rem;transition:all .3s ease}.upload-alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#000c}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}.page-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e4e8eb);padding:2rem 1rem}.content-wrapper[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#2d3748;margin-bottom:.5rem;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#718096;font-size:1.1rem}.container[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:4px;transition:all .3s ease}.container[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 15px 35px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:600;color:#2d3748;margin-bottom:.75rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#007bff}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:4px;border:2px solid #e0e0e0;padding:.75rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.upload-btn-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%}.file-upload-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1.5rem;background:#f8f9fa;border:2px dashed #cfd8dc;border-radius:4px;cursor:pointer;transition:all .3s ease;width:100%}.file-upload-label[_ngcontent-%COMP%]:hover{border-color:#007bff;background:#007bff0d}.file-upload-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.75rem;color:#007bff}.file-upload-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#718096;font-weight:500}.selected-file-info[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:#28a7451a;border-radius:4px;display:flex;align-items:center;color:#28a745}.selected-file-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.progress[_ngcontent-%COMP%]{height:.75rem;border-radius:4px;background:#e9ecef;overflow:hidden;margin-top:1rem}.progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#6c757d);transition:width .3s ease}.alert[_ngcontent-%COMP%]{border-radius:4px;padding:1.25rem;margin-bottom:1.25rem;display:flex;align-items:center;position:relative;overflow:hidden}.alert[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:1rem;font-size:1.25rem}.alert.alert-success[_ngcontent-%COMP%]{background:#28a7451a;color:#1e7e34;border:1px solid rgba(40,167,69,.2)}.alert.alert-success[_ngcontent-%COMP%]:before{background:#28a745}.alert.alert-danger[_ngcontent-%COMP%]{background:#dc35451a;color:#bd2130;border:1px solid rgba(220,53,69,.2)}.alert.alert-danger[_ngcontent-%COMP%]:before{background:#dc3545}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin-left:auto;padding:.5rem;background:transparent;border:none;color:inherit;opacity:.7;cursor:pointer;transition:all .3s ease}.alert[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1}.message[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;align-items:center;gap:.75rem}.message.info[_ngcontent-%COMP%]{background:#007bff1a;color:#0062cc;border:1px solid rgba(0,123,255,.2)}.message.warning[_ngcontent-%COMP%]{background:#ff98001a;color:#cc7a00;border:1px solid rgba(255,152,0,.2)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:4px;font-weight:600;display:inline-flex;align-items:center;justify-content:center;transition:all .3s ease}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#007bff,#6c757d);border:none;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 15px #007bff4d}.btn.btn-success[_ngcontent-%COMP%]{background:linear-gradient(45deg,#28a745,#1e7e34);border:none;color:#fff}.btn.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 15px #28a7454d}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.disabled-form[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}@keyframes _ngcontent-%COMP%_alertPulse{0%{transform:translate(-50%,-50%) scale(1);box-shadow:0 8px 25px #00000026}50%{transform:translate(-50%,-50%) scale(1.02);box-shadow:0 12px 30px #dc354533}to{transform:translate(-50%,-50%) scale(1);box-shadow:0 8px 25px #00000026}}.alert-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);z-index:5;opacity:0;animation:_ngcontent-%COMP%_fadeIn .3s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.upload-progress-container[_ngcontent-%COMP%]{background:#00000008;border-radius:8px;padding:1rem;margin-bottom:1rem;border:1px solid rgba(0,0,0,.08)}.progress[_ngcontent-%COMP%]{height:.75rem;border-radius:999px;background:#0000000d;overflow:hidden}.progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(45deg,#3949ab,#1e88e5);box-shadow:0 0 10px #3949ab80}.upload-details[_ngcontent-%COMP%]{font-size:.9rem;color:#455a64}.upload-details[_ngcontent-%COMP%]   .upload-status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:#3949ab1a;padding:.5rem 1rem;border-radius:999px;font-weight:500}.upload-details[_ngcontent-%COMP%]   .upload-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3949ab}@keyframes _ngcontent-%COMP%_progressPulse{0%{box-shadow:0 0 #3949abb3}70%{box-shadow:0 0 0 10px #3949ab00}to{box-shadow:0 0 #3949ab00}}.progress-bar-animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_progressPulse 2s infinite cubic-bezier(.66,0,0,1)!important}@media (max-width: 768px){.page-container[_ngcontent-%COMP%]{padding:1rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}.container[_ngcontent-%COMP%]{padding:1.5rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}}']})};function _s(d,i){if(d&1){let t=E();a(0,"tr")(1,"td"),l(2),r(),a(3,"td"),l(4),r(),a(5,"td"),l(6),r(),a(7,"td"),l(8),q(9,"titlecase"),r(),a(10,"td")(11,"a",13),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openModal(c.videoUrl))}),f(12,"i",14),l(13," View Video "),r()(),a(14,"td")(15,"button",15),C("click",function(){let c=_(t).$implicit,g=h();return x(g.confirmArchive(c._id))}),f(16,"i",16),l(17," Unarchive "),r()()()}if(d&2){let t=i.$implicit,o=i.index,c=h();m(2),T(o+1+(c.currentPage-1)*c.itemsPerPage),m(2),T(t.name),m(2),T(t.description),m(2),T(ce(9,4,t.orientation))}}function xs(d,i){if(d&1&&f(0,"video",24),d&2){let t=h(2);u("src",t.selectedVideoUrl,ze)}}function Cs(d,i){if(d&1){let t=E();a(0,"div",17)(1,"div",18),C("click",function(){_(t);let c=h();return x(c.closeModal())}),r(),a(2,"div",19)(3,"button",20),C("click",function(){_(t);let c=h();return x(c.closeModal())}),l(4,"\u2716"),r(),a(5,"h5",21),l(6,"Advertisement Video"),r(),a(7,"div",22),y(8,xs,1,1,"video",23),r()()()}if(d&2){let t=h();m(8),u("ngIf",t.selectedVideoUrl)}}function Ms(d,i){if(d&1){let t=E();a(0,"div",17)(1,"div",18),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),r(),a(2,"div",19)(3,"h5",21),l(4,"Confirm Unarchive"),r(),a(5,"p"),l(6,"Are you sure you want to unarchive this advertisement?"),r(),a(7,"div",25)(8,"button",15),C("click",function(){_(t);let c=h();return x(c.unarchiveAd(c.archivingAdId))}),l(9," Yes "),r(),a(10,"button",26),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),l(11," No "),r()()()()}}var en=class d{constructor(i,t){this.adminService=i;this.authService=t;this.userRole=this.authService.userRole||"user",this.userId=this.authService.userId||""}advertisements=[];filteredAds=[];userRole="";userId="";successMessage="";errorMessage="";selectedVideoUrl="";isModalOpen=!1;isConfirmDialogOpen=!1;archivingAdId="";currentPage=1;itemsPerPage=5;searchTerm="";ngOnInit(){this.loadAdvertisements()}loadAdvertisements(){this.userRole==="admin"?this.adminService.getAds().subscribe(i=>{this.advertisements=(i.data||[]).filter(t=>t.isDeleted===!0),this.filteredAds=[...this.advertisements]},i=>{console.error("Error fetching advertisements:",i),this.errorMessage=i.error?.message||"Failed to load advertisements."}):this.adminService.getAdvertisementsByUserId(this.userId).subscribe(i=>{this.advertisements=(i.data||[]).filter(t=>t.isDeleted===!0),this.filteredAds=[...this.advertisements]},i=>{console.error("Error fetching advertisements:",i),this.errorMessage=i.error?.message||"Failed to load advertisements."})}filteredAdvertisements(){if(!this.searchTerm)this.filteredAds=this.advertisements;else{let i=this.searchTerm.toLowerCase();this.filteredAds=this.advertisements.filter(t=>t.name.toLowerCase().includes(i)||t.description.toLowerCase().includes(i)||t.orientation.toLowerCase().includes(i))}return this.paginatedAdvertisements()}paginatedAdvertisements(){let i=(this.currentPage-1)*this.itemsPerPage,t=i+this.itemsPerPage;return this.filteredAds.slice(i,t)}get totalPages(){return Math.ceil(this.filteredAds.length/this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}openModal(i){this.selectedVideoUrl=i,this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}confirmArchive(i){this.archivingAdId=i,this.isConfirmDialogOpen=!0}unarchiveAd(i){this.adminService.unarchiveAds(i).subscribe(()=>{this.successMessage="Advertisement unarchived successfully!",this.loadAdvertisements(),this.closeConfirmDialog()},t=>{console.error("Error unarchiving advertisement:",t),this.errorMessage=t.error?.message||"Failed to unarchive advertisement."})}closeConfirmDialog(){this.isConfirmDialogOpen=!1,this.archivingAdId=""}static \u0275fac=function(t){return new(t||d)(S($),S(be))};static \u0275cmp=N({type:d,selectors:[["app-archiv-ads"]],standalone:!1,decls:34,vars:8,consts:[[1,"container","ad-list-container"],[1,"list-title"],[1,"row","mb-3"],[1,"col-md-6"],[1,"search-container"],["type","text","placeholder","Search advertisements...",1,"form-control","search-input",3,"ngModelChange","ngModel"],[1,"table-responsive"],[1,"table","ad-table"],[4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"btn","btn-secondary","me-2",3,"click","disabled"],[1,"btn","btn-secondary","ms-2",3,"click","disabled"],["class","custom-modal",4,"ngIf"],["href","javascript:void(0)",1,"video-link",3,"click"],[1,"fas","fa-video","me-2"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-undo","me-2"],[1,"custom-modal"],[1,"modal-overlay",3,"click"],[1,"modal-content"],[1,"modal-close",3,"click"],[1,"modal-title"],[1,"video-container"],["controls","","class","modal-video",3,"src",4,"ngIf"],["controls","",1,"modal-video",3,"src"],[1,"dialog-actions"],[1,"btn","btn-secondary",3,"click"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"h2",1),l(2,"Archived Advertisement List"),r(),a(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),A("ngModelChange",function(g){return I(o.searchTerm,g)||(o.searchTerm=g),g}),r()()()(),a(7,"div",6)(8,"table",7)(9,"thead")(10,"tr")(11,"th"),l(12,"#"),r(),a(13,"th"),l(14,"Name"),r(),a(15,"th"),l(16,"Description"),r(),a(17,"th"),l(18,"Orientation"),r(),a(19,"th"),l(20,"Video URL"),r(),a(21,"th"),l(22,"Actions"),r()()(),a(23,"tbody"),y(24,_s,18,6,"tr",8),r()()(),a(25,"div",9)(26,"button",10),C("click",function(){return o.previousPage()}),l(27," Previous "),r(),a(28,"span"),l(29),r(),a(30,"button",11),C("click",function(){return o.nextPage()}),l(31," Next "),r()(),y(32,Cs,9,1,"div",12)(33,Ms,12,0,"div",12),r()),t&2&&(m(6),k("ngModel",o.searchTerm),m(18),u("ngForOf",o.filteredAdvertisements()),m(2),u("disabled",o.currentPage===1),m(3),Oe("Page ",o.currentPage," of ",o.totalPages,""),m(),u("disabled",o.currentPage===o.totalPages),m(2),u("ngIf",o.isModalOpen),m(),u("ngIf",o.isConfirmDialogOpen))},dependencies:[H,R,Z,G,J,he],styles:[".ad-list-container[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#f9f9f9;border-radius:15px;box-shadow:0 8px 20px #0003}.list-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;text-align:center;margin-bottom:20px;color:#333}.ad-table[_ngcontent-%COMP%]{width:100%;border-radius:15px;overflow:hidden;box-shadow:0 8px 15px #0000001a;margin-bottom:30px}.table-header[_ngcontent-%COMP%]{background:#007bff;color:#fff;font-size:1.2rem;text-transform:uppercase}.ad-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ad-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:20px;vertical-align:middle;font-size:1rem}.ad-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s ease,box-shadow .3s ease;height:60px}.ad-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;box-shadow:0 5px 10px #0000001a}.video-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-weight:700}.video-link[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.btn[_ngcontent-%COMP%]{padding:8px 15px;font-size:1rem;border-radius:50px;transition:background .3s ease,transform .2s ease}.btn-archive[_ngcontent-%COMP%]{background:#168c57;color:#fff;border:none}.btn-archive[_ngcontent-%COMP%]:hover{background:#0f6b42;transform:translateY(-2px)}.btn-unarchive[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none}.btn-unarchive[_ngcontent-%COMP%]:hover{background:#1e7e34;transform:translateY(-2px)}.alert[_ngcontent-%COMP%]{margin-bottom:15px;border-radius:5px;padding:10px 15px;text-align:center}@media (max-width: 768px){.ad-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ad-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:.9rem}.ad-list-container[_ngcontent-%COMP%]{padding:10px}}.custom-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:1}.modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;z-index:2;text-align:center;width:70%;max-width:500px}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15px;color:#333}.modal-video[_ngcontent-%COMP%]{width:100%;height:auto;max-height:400px;border-radius:10px}.modal-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:1.5rem;cursor:pointer;color:#666}.modal-close[_ngcontent-%COMP%]:hover{color:#000}.confirmation-dialog[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.confirmation-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080}.confirmation-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;z-index:2;text-align:center;width:90%;max-width:400px}.confirmation-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:20px}.btn-confirm-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer}.btn-confirm-danger[_ngcontent-%COMP%]:hover{background-color:#a71d2a}.btn-confirm-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer}.btn-confirm-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.edit-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.edit-modal-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080}.edit-modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;z-index:2;width:90%;max-width:500px;text-align:center}.edit-modal[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:1.5rem;cursor:pointer}.edit-modal[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:#000}.edit-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{text-align:left}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;color:#333;display:block;margin-bottom:5px}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:1rem}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}.edit-modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;background:#fff}.edit-modal[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 15px;border-radius:5px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s ease}.edit-modal[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};function Ps(d,i){if(d&1&&(a(0,"div",25),f(1,"i",26),l(2),r()),d&2){let t=h();m(2),M("",t.successMessage," ")}}function ys(d,i){if(d&1&&(a(0,"div",27),f(1,"i",28),l(2),r()),d&2){let t=h();m(2),M("",t.errorMessage," ")}}function Os(d,i){if(d&1&&(a(0,"option",29),l(1),q(2,"titlecase"),r()),d&2){let t=i.$implicit;u("value",t),m(),M(" ",ce(2,2,t)," ")}}function Ss(d,i){d&1&&f(0,"span",30)}function ks(d,i){d&1&&f(0,"i",31)}function Is(d,i){d&1&&(a(0,"span"),l(1,"Submit"),r())}var tn=class d{constructor(i,t){this.adminService=i;this.router=t}deviceObject={name:"",description:"",orientation:""};orientations=["portrait","landscape"];isSubmitting=!1;successMessage="";errorMessage="";addDevice(){this.isSubmitting=!0,this.successMessage="",this.errorMessage="",this.adminService.addDevices(this.deviceObject).subscribe(i=>{console.log("Device added:",i),this.successMessage="Device added successfully!",this.isSubmitting=!1,this.deviceObject={name:"",description:"",orientation:""}},i=>{console.error("Error adding device:",i),this.errorMessage=i.error?.message||"Failed to add device. Please try again.",this.isSubmitting=!1})}navigateToList(){this.router.navigate(["/admin/Devices"])}static \u0275fac=function(t){return new(t||d)(S($),S(W))};static \u0275cmp=N({type:d,selectors:[["app-add-devices"]],standalone:!1,decls:32,vars:10,consts:[[1,"container","device-form-container"],[1,"form-card"],[1,"back-button","mb-5"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left","me-2"],[1,"form-title"],[1,"fas","fa-tablet-alt","me-2"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","name"],[1,"fas","fa-tag","me-2"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description"],[1,"fas","fa-align-left","me-2"],["id","description","name","description","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","orientation"],[1,"fas","fa-arrows-alt","me-2"],["id","orientation","name","orientation","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn-submit",3,"disabled"],["class","spinner",4,"ngIf"],["class","fas fa-paper-plane me-2",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"fas","fa-check-circle","me-2"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-circle","me-2"],[3,"value"],[1,"spinner"],[1,"fas","fa-paper-plane","me-2"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),C("click",function(){return o.navigateToList()}),f(4,"i",4),l(5,"Back to List "),r()(),a(6,"h2",5),f(7,"i",6),l(8,"Add Device "),r(),y(9,Ps,3,1,"div",7)(10,ys,3,1,"div",8),a(11,"form",9),C("ngSubmit",function(){return o.addDevice()}),a(12,"div",10)(13,"label",11),f(14,"i",12),l(15,"Name "),r(),a(16,"input",13),A("ngModelChange",function(g){return I(o.deviceObject.name,g)||(o.deviceObject.name=g),g}),r()(),a(17,"div",10)(18,"label",14),f(19,"i",15),l(20,"Description "),r(),a(21,"textarea",16),A("ngModelChange",function(g){return I(o.deviceObject.description,g)||(o.deviceObject.description=g),g}),r()(),a(22,"div",10)(23,"label",17),f(24,"i",18),l(25,"Orientation "),r(),a(26,"select",19),A("ngModelChange",function(g){return I(o.deviceObject.orientation,g)||(o.deviceObject.orientation=g),g}),y(27,Os,3,4,"option",20),r()(),a(28,"button",21),y(29,Ss,1,0,"span",22)(30,ks,1,0,"i",23)(31,Is,2,0,"span",24),r()()()()),t&2&&(m(9),u("ngIf",o.successMessage),m(),u("ngIf",o.errorMessage),m(6),k("ngModel",o.deviceObject.name),m(5),k("ngModel",o.deviceObject.description),m(5),k("ngModel",o.deviceObject.orientation),m(),u("ngForOf",o.orientations),m(),u("disabled",o.isSubmitting),m(),u("ngIf",o.isSubmitting),m(),u("ngIf",!o.isSubmitting),m(),u("ngIf",!o.isSubmitting))},dependencies:[H,R,ee,ae,se,Z,re,G,X,le,J,oe,he],styles:[".device-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;color:#fff}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 10px 30px #0003;padding:40px 30px;width:100%;max-width:500px;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.form-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #0000004d}.form-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333;margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:10px}.form-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#007bff}.alert[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:10px;padding:10px 15px;font-size:1rem;text-align:center}.alert-success[_ngcontent-%COMP%]{background-color:#e6f7e6;color:#28a745;border:1px solid #28a745}.alert-danger[_ngcontent-%COMP%]{background-color:#fdeaea;color:#dc3545;border:1px solid #dc3545}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:600;margin-bottom:5px;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:2px solid #ddd;border-radius:10px;font-size:1rem;transition:border-color .3s ease,box-shadow .3s ease;background:#f9f9f9}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 8px #007bff4d;background:#fff}.btn-submit[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:none;padding:12px 20px;border-radius:25px;font-size:1rem;font-weight:600;text-transform:uppercase;cursor:pointer;transition:all .3s ease;box-shadow:0 5px 15px #007bff66}.btn-submit[_ngcontent-%COMP%]:hover{background:#0056b3;box-shadow:0 10px 25px #0056b380;transform:translateY(-2px)}.btn-submit[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 3px 8px #007bff4d}.btn-submit[_ngcontent-%COMP%]:disabled{background:#ccc;color:#999;cursor:not-allowed;box-shadow:none}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border:3px solid #f3f3f3;border-top:3px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.back-button[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.btn-back[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:10px 20px;border-radius:50px;font-size:1rem;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px;box-shadow:0 8px 15px #6c757d66}.btn-back[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px);box-shadow:0 10px 20px #5a626880}.btn-back[_ngcontent-%COMP%]:active{transform:translateY(2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.form-card[_ngcontent-%COMP%]{padding:20px 30px}.btn-submit[_ngcontent-%COMP%], .btn-back[_ngcontent-%COMP%]{padding:10px 15px}}"]})};var As=(d,i)=>({paired:d,unpaired:i}),co=(d,i)=>({"fa-solid fa-link":d,"fas fa-times-circle":i}),Es=(d,i)=>({"text-success":d,"text-danger":i});function Ds(d,i){if(d&1){let t=E();a(0,"ul",22)(1,"li",23)(2,"a",24),C("click",function(){_(t);let c=h();return x(c.switchTab("all"))}),f(3,"i",25),l(4,"All Devices "),r()(),a(5,"li",23)(6,"a",24),C("click",function(){_(t);let c=h();return x(c.switchTab("my"))}),f(7,"i",26),l(8,"My Devices "),r()()()}if(d&2){let t=h();m(2),xe("active",t.activeTab==="all"),m(4),xe("active",t.activeTab==="my")}}function Ts(d,i){if(d&1){let t=E();a(0,"li")(1,"button",46),C("click",function(){_(t);let c=h().$implicit,g=h();return x(g.unpairageDevice(c.deviceId))}),f(2,"i",51),l(3," Unpair "),r()()}}function Vs(d,i){if(d&1){let t=E();a(0,"div",27)(1,"div",28)(2,"div",29),l(3),r(),a(4,"div",30),f(5,"i",31),a(6,"span"),l(7),r()()(),a(8,"div",32)(9,"div",33)(10,"div",34)(11,"label"),l(12,"Device ID"),r(),a(13,"h3"),l(14),r()(),a(15,"div",34)(16,"label"),l(17,"Name"),r(),a(18,"h4"),l(19),r()(),a(20,"button",35),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openDetailModal(c))}),f(21,"i",36),l(22," View Details "),r()()(),a(23,"div",37)(24,"button",38),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openEditModal(c))}),f(25,"i",39),r(),a(26,"button",40),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openScheduleModal(c))}),f(27,"i",41),r(),a(28,"div",42)(29,"button",43),f(30,"i",44),r(),a(31,"ul",45)(32,"li")(33,"button",46),C("click",function(){let c=_(t).$implicit,g=h();return x(g.confirmArchive(c._id))}),f(34,"i",47),l(35," Archive "),r()(),y(36,Ts,4,0,"li",48),a(37,"li")(38,"button",49),C("click",function(){let c=_(t).$implicit,g=h();return x(g.deleteDevice(c._id))}),f(39,"i",50),l(40," Delete "),r()()()()()()}if(d&2){let t=i.$implicit,o=i.index,c=h();m(3),M("#",(c.currentPage-1)*c.itemsPerPage+o+1,""),m(),u("ngClass",He(9,As,t.isPaired,!t.isPaired)),m(),u("ngClass",He(12,co,t.isPaired===!0,t.isPaired===!1)),m(2),T(t.isPaired?"Paired":"Unpaired"),m(7),T(t.deviceId),m(5),T(t.name),m(7),u("disabled",c.isScheduleButtonDisabled(t))("title",c.getScheduleButtonTooltip(t)),m(10),u("ngIf",t.isPaired)}}function Ls(d,i){if(d&1&&(a(0,"span",66),l(1),r()),d&2){let t=h(2);m(),M("(",t.selectedDevice==null||t.selectedDevice.userId==null?null:t.selectedDevice.userId.email,")")}}function Us(d,i){if(d&1){let t=E();a(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",55)(4,"h5",56),l(5,"Device Details"),r(),a(6,"button",57),C("click",function(){_(t);let c=h();return x(c.closeDetailModal())}),r()(),a(7,"div",58)(8,"div",59)(9,"div",34)(10,"label"),l(11,"Device ID"),r(),a(12,"h3"),l(13),r()(),a(14,"div",34)(15,"label"),l(16,"Name"),r(),a(17,"h4"),l(18),r()(),a(19,"div",34)(20,"label"),l(21,"Status"),r(),a(22,"p",31),f(23,"i",31),l(24),r()(),a(25,"div",34)(26,"label"),l(27,"Description"),r(),a(28,"p"),l(29),r()(),a(30,"div",34)(31,"label"),l(32,"Orientation"),r(),a(33,"span",60),l(34),q(35,"titlecase"),r()(),a(36,"div",34)(37,"label"),l(38,"Owner"),r(),a(39,"span",61),f(40,"i",62),l(41),y(42,Ls,2,1,"span",63),r()(),a(43,"div",34)(44,"label"),l(45,"Created At"),r(),a(46,"p"),l(47),q(48,"date"),r()(),a(49,"div",34)(50,"label"),l(51,"Last Updated"),r(),a(52,"p"),l(53),q(54,"date"),r()()()(),a(55,"div",64)(56,"button",65),C("click",function(){_(t);let c=h();return x(c.closeDetailModal())}),l(57,"Close"),r()()()()()}if(d&2){let t=h();m(13),T(t.selectedDevice==null?null:t.selectedDevice.deviceId),m(5),T(t.selectedDevice==null?null:t.selectedDevice.name),m(4),u("ngClass",He(19,Es,t.selectedDevice==null?null:t.selectedDevice.isPaired,!(t.selectedDevice!=null&&t.selectedDevice.isPaired))),m(),u("ngClass",He(22,co,(t.selectedDevice==null?null:t.selectedDevice.isPaired)===!0,(t.selectedDevice==null?null:t.selectedDevice.isPaired)===!1)),m(),M(" ",t.selectedDevice!=null&&t.selectedDevice.isPaired?"Paired":"Not Paired"," "),m(5),T((t.selectedDevice==null?null:t.selectedDevice.description)||"No description provided"),m(5),T(ce(35,11,t.selectedDevice==null?null:t.selectedDevice.orientation)),m(7),M(" ",(t.selectedDevice==null||t.selectedDevice.userId==null?null:t.selectedDevice.userId.username)||"Unknown User"," "),m(),u("ngIf",t.selectedDevice==null||t.selectedDevice.userId==null?null:t.selectedDevice.userId.email),m(5),T(Ne(48,13,t.selectedDevice==null?null:t.selectedDevice.createdAt,"medium")),m(6),T(Ne(54,16,t.selectedDevice==null?null:t.selectedDevice.updatedAt,"medium"))}}function zs(d,i){if(d&1){let t=E();a(0,"div",52)(1,"div",67)(2,"div",54)(3,"div",55)(4,"h5",56),l(5,"Edit Device"),r(),a(6,"button",57),C("click",function(){_(t);let c=h();return x(c.closeEditModal())}),r()(),a(7,"div",58)(8,"form",null,0)(10,"div",68)(11,"label",69),l(12,"Device ID"),r(),a(13,"input",70),A("ngModelChange",function(c){_(t);let g=h();return I(g.editDeviceObject.deviceId,c)||(g.editDeviceObject.deviceId=c),x(c)}),r()(),a(14,"div",68)(15,"label",71),l(16,"Name"),r(),a(17,"input",72),A("ngModelChange",function(c){_(t);let g=h();return I(g.editDeviceObject.name,c)||(g.editDeviceObject.name=c),x(c)}),r()(),a(18,"div",68)(19,"label",73),l(20,"Description"),r(),a(21,"textarea",74),A("ngModelChange",function(c){_(t);let g=h();return I(g.editDeviceObject.description,c)||(g.editDeviceObject.description=c),x(c)}),r()(),a(22,"div",68)(23,"label",75),l(24,"Orientation"),r(),a(25,"select",76),A("ngModelChange",function(c){_(t);let g=h();return I(g.editDeviceObject.orientation,c)||(g.editDeviceObject.orientation=c),x(c)}),a(26,"option",77),l(27,"Landscape"),r(),a(28,"option",78),l(29,"Portrait"),r()()()()(),a(30,"div",64)(31,"button",65),C("click",function(){_(t);let c=h();return x(c.closeEditModal())}),l(32,"Cancel"),r(),a(33,"button",79),C("click",function(){_(t);let c=h();return x(c.updateDevice())}),l(34," Save Changes "),r()()()()()}if(d&2){let t=ye(9),o=h();m(13),k("ngModel",o.editDeviceObject.deviceId),m(4),k("ngModel",o.editDeviceObject.name),m(4),k("ngModel",o.editDeviceObject.description),m(4),k("ngModel",o.editDeviceObject.orientation),m(8),u("disabled",!t.form.valid)}}function Fs(d,i){if(d&1){let t=E();a(0,"div",82)(1,"p"),l(2,"No advertisements available to schedule."),r(),a(3,"button",83),C("click",function(){_(t);let c=h(2);return x(c.navigateToAddAd())}),f(4,"i",84),l(5,"Create New Ad "),r()()}}function js(d,i){d&1&&(a(0,"div",97),f(1,"div",98),r())}function Ns(d,i){if(d&1){let t=E();a(0,"video",99),C("loadeddata",function(){_(t);let c=h().$implicit;return x(c.videoLoaded=!0)}),r()}if(d&2){let t=h().$implicit;xe("hidden",!t.videoLoaded),u("src",t.videoUrl,ze)}}function Bs(d,i){if(d&1){let t=E();a(0,"div",87)(1,"div",88)(2,"div",89),y(3,js,2,0,"div",90)(4,Ns,1,3,"video",91),r(),a(5,"div",92)(6,"div",93)(7,"input",94,1),C("change",function(){let c=_(t).$implicit,g=ye(8),b=h(3);return x(b.toggleAdSelection(c._id,g.checked))}),r(),a(9,"label",95),l(10),r()(),a(11,"p",96),l(12),r()()()()}if(d&2){let t=i.$implicit;m(3),u("ngIf",!t.videoLoaded),m(),u("ngIf",t.videoUrl),m(3),u("id","checkbox-"+t._id)("value",t._id),m(2),u("for","checkbox-"+t._id),m(),M(" ",t.name," "),m(),dt("title",t.description),m(),M(" ",t.description," ")}}function Rs(d,i){if(d&1&&(a(0,"div",85),y(1,Bs,13,8,"div",86),r()),d&2){let t=h(2);m(),u("ngForOf",t.ads)}}function Ws(d,i){if(d&1){let t=E();a(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",55)(4,"h5",56),l(5),r(),a(6,"button",57),C("click",function(){_(t);let c=h();return x(c.isScheduleModalOpen=!1)}),r()(),a(7,"div",58),y(8,Fs,6,0,"div",80)(9,Rs,2,1,"div",81),r(),a(10,"div",64)(11,"button",65),C("click",function(){_(t);let c=h();return x(c.isScheduleModalOpen=!1)}),l(12,"Cancel"),r(),a(13,"button",79),C("click",function(){_(t);let c=h();return x(c.navigateToSchedule())}),l(14," Schedule Selected Ads "),r()()()()()}if(d&2){let t=h();m(5),M("Schedule Ads for ",t.selectedDevice==null?null:t.selectedDevice.name,""),m(3),u("ngIf",t.ads.length===0),m(),u("ngIf",t.ads.length>0),m(4),u("disabled",t.selectedAds.length===0)}}function $s(d,i){if(d&1){let t=E();a(0,"div",52)(1,"div",67)(2,"div",54)(3,"div",100)(4,"h5",56),l(5,"Confirm Action"),r(),a(6,"button",57),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),r()(),a(7,"div",58)(8,"p"),l(9,"Are you sure you want to perform this action?"),r()(),a(10,"div",64)(11,"button",65),C("click",function(){_(t);let c=h();return x(c.closeConfirmDialog())}),l(12,"Cancel"),r(),a(13,"button",101),C("click",function(){_(t);let c=h();return x(c.archiveDevice())}),l(14,"Confirm"),r()()()()()}}var wt=class d{constructor(i,t,o,c){this.adminService=i;this.router=t;this.authService=o;this.route=c;this.userRole=this.authService.userRole||"user",this.userId=this.authService.userId||""}devices=[];filteredDevices=[];ads=[];searchTerm="";currentPage=1;itemsPerPage=20;totalPages=0;errorMessage="";editDeviceObject={};isEditModalOpen=!1;isConfirmDialogOpen=!1;archivingDeviceId="";selectedDevice=null;selectedAds=[];isScheduleModalOpen=!1;isDetailModalOpen=!1;userId;userRole;activeTab="all";allDevices=[];myDevices=[];ngOnInit(){this.route.params.subscribe(i=>{this.loadDevices()})}loadDevices(){this.userRole==="admin"||this.userRole==="SUPERADMIN"?this.adminService.getDevices().subscribe(i=>{i&&Array.isArray(i.data)&&(this.allDevices=i.data.filter(t=>t.isDeleted===!1),this.myDevices=this.allDevices.filter(t=>t.userId?._id===this.userId||t.userId===this.userId),this.devices=this.activeTab==="all"?this.allDevices:this.myDevices,this.filteredDevices=[...this.devices],this.calculatePagination())},i=>{this.errorMessage=i.error?.message||"Failed to load devices. Please try again."}):this.adminService.getDevices().subscribe(i=>{i&&Array.isArray(i.data)&&(this.devices=i.data.filter(t=>t.isDeleted===!1),this.myDevices=[...this.devices],this.allDevices=[...this.devices],this.filteredDevices=[...this.devices],this.calculatePagination())},i=>{this.errorMessage=i.error?.message||"Failed to load devices. Please try again."})}unpairageDevice(i){this.adminService.isPaired(i).subscribe(()=>{this.loadDevices()})}loadAds(){this.userRole==="admin"||this.userRole==="SUPERADMIN"?this.adminService.getAds().subscribe(i=>{this.ads=(i.data||[]).filter(t=>t.isDeleted===!1)},i=>{console.error("Error fetching ads:",i),this.errorMessage=i.error?.message||"Failed to load ads."}):this.adminService.getAdvertisementsByUserId(this.userId).subscribe(i=>{this.ads=(i.data||[]).filter(t=>t.isDeleted===!1)},i=>{console.error("Error fetching ads:",i),this.errorMessage=i.error?.message||"Failed to load ads."})}onSearch(){let i=this.searchTerm.toLowerCase();this.filteredDevices=this.devices.filter(t=>t.name.toLowerCase().includes(i)||t.description.toLowerCase().includes(i)||t.orientation.toLowerCase().includes(i)||t.deviceId.toLowerCase().includes(i)),this.calculatePagination()}calculatePagination(){this.totalPages=Math.ceil(this.filteredDevices.length/this.itemsPerPage),this.currentPage=Math.min(this.currentPage,this.totalPages||1)}getPaginatedDevices(){let i=(this.currentPage-1)*this.itemsPerPage,t=i+this.itemsPerPage;return this.filteredDevices.slice(i,t)}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}openEditModal(i){this.editDeviceObject=j({},i),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}updateDevice(){this.adminService.updateDevices(this.editDeviceObject._id,this.editDeviceObject).subscribe(()=>{this.loadDevices(),this.isEditModalOpen=!1},i=>{this.errorMessage=i.error?.message||"Failed to update device. Please try again."})}confirmArchive(i){this.archivingDeviceId=i,this.isConfirmDialogOpen=!0}archiveDevice(){this.adminService.archiveDevices(this.archivingDeviceId).subscribe(()=>{this.loadDevices(),this.isConfirmDialogOpen=!1},i=>{this.errorMessage=i.error?.message||"Failed to archive device. Please try again."})}closeConfirmDialog(){this.isConfirmDialogOpen=!1,this.archivingDeviceId=""}openDetailModal(i){this.selectedDevice=i,this.isDetailModalOpen=!0}closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDevice=null}isScheduleButtonDisabled(i){return(this.userRole==="admin"||this.userRole==="SUPERADMIN")&&i.userId?._id!==this.userId}getScheduleButtonTooltip(i){return this.isScheduleButtonDisabled(i)?"Only the device owner can create schedules":"Schedule ads for this device"}openScheduleModal(i){this.isScheduleButtonDisabled(i)||(this.selectedDevice=i,this.loadAds(),this.isScheduleModalOpen=!0)}navigateToSchedule(){this.isScheduleModalOpen=!1;let i={deviceId:this.selectedDevice._id,ads:this.selectedAds.join(",")};this.router.navigate(["/admin/Makeschedule"],{queryParams:i})}toggleAdSelection(i,t){t?this.selectedAds.push(i):this.selectedAds=this.selectedAds.filter(o=>o!==i)}navigateToAddDevice(){this.router.navigate(["/admin/addDevices"])}navigateToAddAd(){this.router.navigate(["/admin/addAdvertisements"]),this.isScheduleModalOpen=!1}deleteDevice(i){this.adminService.deleteDeviceById(i).subscribe(()=>{this.loadDevices()},t=>{this.errorMessage=t.error?.message||"Failed to delete device."})}switchTab(i){this.activeTab=i,this.devices=i==="all"?this.allDevices:this.myDevices,this.filteredDevices=[...this.devices],this.calculatePagination(),this.currentPage=1}static \u0275fac=function(t){return new(t||d)(S($),S(W),S(be),S(Be))};static \u0275cmp=N({type:d,selectors:[["app-devices"]],standalone:!1,decls:29,vars:11,consts:[["editForm","ngForm"],["adCheckbox",""],[1,"container","py-4","ad-list-container"],[1,"list-title","text-center"],["class","nav nav-tabs mb-4",4,"ngIf"],[1,"row","align-items-center","mb-3"],[1,"col-md-6","text-start"],[1,"btn","btn-primary","add-ad-btn",3,"click"],[1,"fas","fa-plus-circle","me-2"],[1,"col-md-6"],[1,"input-group"],["type","text","placeholder","Search devices...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],[1,"input-group-text"],[1,"fas","fa-search"],[1,"devices-grid"],["class","device-card",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"fw-bold","text-primary"],[1,"fas","fa-chevron-right"],["class","modal fade show","style","display: block;",4,"ngIf"],[1,"nav","nav-tabs","mb-4"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-list","me-2"],[1,"fas","fa-user-circle","me-2"],[1,"device-card"],[1,"device-card-header"],[1,"device-number"],[1,"device-status",3,"ngClass"],[3,"ngClass"],[1,"device-card-body"],[1,"device-info"],[1,"info-group"],[1,"btn-details",3,"click"],[1,"fas","fa-eye"],[1,"device-card-footer"],["title","Edit",1,"action-btn","edit",3,"click"],[1,"fas","fa-edit"],[1,"action-btn","schedule",3,"click","disabled","title"],[1,"fas","fa-tv"],[1,"dropdown"],["data-bs-toggle","dropdown","title","More options",1,"action-btn","more"],[1,"fas","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"fas","fa-archive","me-2"],[4,"ngIf"],[1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-trash-alt","me-2"],[1,"fas","fa-unlink","me-2"],[1,"modal","fade","show",2,"display","block"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"detail-info"],[1,"orientation-badge"],[1,"owner-info"],[1,"fas","fa-user","me-1"],["class","owner-email",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"owner-email"],[1,"modal-dialog","modal-dialog-centered"],[1,"mb-3"],["for","deviceId",1,"form-label"],["type","text","id","deviceId","name","deviceId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","name","description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","orientation",1,"form-label"],["id","orientation","name","orientation","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","landscape"],["value","portrait"],[1,"btn","btn-primary",3,"click","disabled"],["class","text-center py-4",4,"ngIf"],["class","row g-3",4,"ngIf"],[1,"text-center","py-4"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"fas","fa-plus","me-2"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","h-100","shadow-sm"],[1,"video-container"],["class","loading-spinner",4,"ngIf"],["class","card-img-top rounded-top","controls","","muted","","height","130","preload","metadata",3,"src","hidden","loadeddata",4,"ngIf"],[1,"card-body"],[1,"form-check","mb-2"],["type","checkbox",1,"form-check-input",3,"change","id","value"],[1,"form-check-label","text-truncate",3,"for"],[1,"card-text","text-truncate",3,"title"],[1,"loading-spinner"],[1,"spinner"],["controls","","muted","","height","130","preload","metadata",1,"card-img-top","rounded-top",3,"loadeddata","src"],[1,"modal-header","bg-warning","text-white"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){t&1&&(a(0,"div",2)(1,"h2",3),l(2,"Devices List"),r(),y(3,Ds,9,4,"ul",4),a(4,"div",5)(5,"div",6)(6,"button",7),C("click",function(){return o.navigateToAddDevice()}),f(7,"i",8),l(8," Add Device "),r()(),a(9,"div",9)(10,"div",10)(11,"input",11),A("ngModelChange",function(g){return I(o.searchTerm,g)||(o.searchTerm=g),g}),C("input",function(){return o.onSearch()}),r(),a(12,"span",12),f(13,"i",13),r()()()(),a(14,"div",14),y(15,Vs,41,15,"div",15),r(),a(16,"div",16)(17,"button",17),C("click",function(){return o.previousPage()}),f(18,"i",18),l(19," Previous "),r(),a(20,"span",19),l(21),r(),a(22,"button",17),C("click",function(){return o.nextPage()}),l(23," Next "),f(24,"i",20),r()(),y(25,Us,58,25,"div",21)(26,zs,35,5,"div",21)(27,Ws,15,4,"div",21)(28,$s,15,0,"div",21),r()),t&2&&(m(3),u("ngIf",o.userRole==="admin"||o.userRole==="SUPERADMIN"),m(8),k("ngModel",o.searchTerm),m(4),u("ngForOf",o.getPaginatedDevices()),m(2),u("disabled",o.currentPage===1),m(4),Oe(" Page ",o.currentPage," of ",o.totalPages," "),m(),u("disabled",o.currentPage===o.totalPages),m(3),u("ngIf",o.isDetailModalOpen),m(),u("ngIf",o.isEditModalOpen),m(),u("ngIf",o.isScheduleModalOpen),m(),u("ngIf",o.isConfirmDialogOpen))},dependencies:[De,H,R,ee,ae,se,Z,re,G,X,le,J,oe,he,ct],styles:[`.devices-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:2.5rem;font-family:Segoe UI,Roboto,Helvetica Neue,sans-serif}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.dashboard-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;color:#1a2b3c;margin-bottom:.75rem;display:flex;align-items:center;gap:1.25rem;letter-spacing:-.5px}.dashboard-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db;font-size:2rem;background:#3498db1a;width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;border-radius:50%;box-shadow:0 4px 6px #3498db26}.dashboard-subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1.05rem;max-width:70ch;line-height:1.6}.control-panel[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 30px #0000000f;margin-bottom:2.5rem;display:flex;flex-wrap:wrap;gap:2rem;border:1px solid rgba(0,0,0,.04);animation:_ngcontent-%COMP%_slideUp .5s ease-out}.panel-section[_ngcontent-%COMP%]{flex:1;min-width:300px}.custom-tabs[_ngcontent-%COMP%]{display:flex;gap:1.25rem;border-bottom:2px solid rgba(233,236,239,.5);padding-bottom:1.25rem;position:relative}.tab-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.85rem 1.75rem;color:#6c757d;font-weight:600;border-radius:12px;transition:all .3s cubic-bezier(.25,.8,.25,1);display:flex;align-items:center;gap:.75rem;position:relative;overflow:hidden}.tab-btn[_ngcontent-%COMP%]:hover{background:#f8f9facc;color:#3498db;transform:translateY(-2px)}.tab-btn.active[_ngcontent-%COMP%]{background:#e3f2fd;color:#2196f3;box-shadow:0 4px 8px #2196f326}.tab-btn.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1.25rem;left:50%;transform:translate(-50%);width:60%;height:3px;background:#2196f3;border-radius:3px 3px 0 0}.actions-group[_ngcontent-%COMP%]{display:flex;gap:1.25rem;align-items:center;margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-wrapper[_ngcontent-%COMP%]{position:relative;transition:all .3s ease}.search-wrapper[_ngcontent-%COMP%]:focus-within{transform:translateY(-1px)}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1.25rem;top:50%;transform:translateY(-50%);color:#6c757d;z-index:2}.search-input[_ngcontent-%COMP%]{width:100%;padding:.85rem 1.25rem .85rem 3rem;border:1px solid rgba(233,236,239,.8);border-radius:12px;font-size:1rem;transition:all .3s cubic-bezier(.25,.8,.25,1);background:#ffffffe6;box-shadow:0 2px 8px #00000008}.search-input[_ngcontent-%COMP%]:focus{border-color:#3498db80;box-shadow:0 4px 15px #3498db26;outline:none;background:#fff}.btn-add[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;border:none;padding:.85rem 1.75rem;border-radius:12px;font-weight:600;display:flex;align-items:center;gap:.75rem;transition:all .3s cubic-bezier(.25,.8,.25,1);box-shadow:0 4px 12px #3498db40;font-size:.95rem;min-width:180px;justify-content:center}.btn-add[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2980b9,#3498db);transform:translateY(-2px);box-shadow:0 6px 18px #3498db59}.btn-add[_ngcontent-%COMP%]:active{transform:translateY(0)}.devices-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.25rem;padding:.75rem 0;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.device-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000000d;transition:all .3s cubic-bezier(.25,.8,.25,1);overflow:hidden;height:220px;display:flex;flex-direction:column;position:relative;border:1px solid rgba(0,0,0,.04);transform:scale(.95)}.device-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#3498db,#2ecc71);opacity:0;transition:opacity .3s ease}.device-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(.95);box-shadow:0 8px 20px #0000001a}.device-card-header[_ngcontent-%COMP%]{padding:.85rem 1rem;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(to right,#f8f9fa,#fff);border-bottom:1px solid rgba(233,236,239,.5);min-height:40px}.device-number[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#6c757d;letter-spacing:.5px}.device-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;padding:.3rem .75rem;border-radius:16px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 2px 4px #0000000d}.device-status.paired[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);color:#2e7d32}.device-status.unpaired[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffebee,#ffcdd2);color:#c62828}.device-card-body[_ngcontent-%COMP%]{padding:1rem;flex-grow:1;display:flex;flex-direction:column;overflow:hidden}.device-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.info-group[_ngcontent-%COMP%]{margin-bottom:.5rem}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;color:#6c757d;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:.2rem}.info-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700;color:#2c3e50;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#34495e;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.btn-details[_ngcontent-%COMP%]{background:none;border:none;color:#3498db;font-size:.75rem;font-weight:500;cursor:pointer;padding:.25rem 0;text-align:left;width:fit-content;display:flex;align-items:center;gap:.3rem;margin-top:.5rem;transition:all .2s ease}.btn-details[_ngcontent-%COMP%]:hover{color:#2980b9;transform:translate(3px)}.btn-details[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem;transition:transform .2s ease}.btn-details[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(2px)}.device-card-footer[_ngcontent-%COMP%]{padding:.75rem;display:flex;gap:.5rem;border-top:1px solid rgba(238,240,242,.8);background:linear-gradient(to right,#f8f9fa,#fff)}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.5rem;border:none;border-radius:8px;font-size:.75rem;cursor:pointer;transition:all .3s cubic-bezier(.25,.8,.25,1);width:30px;height:30px;box-shadow:0 2px 4px #0000000d}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.action-btn.edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb);color:#1976d2}.action-btn.edit[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bbdefb,#90caf9);transform:translateY(-2px);box-shadow:0 4px 8px #1976d233}.action-btn.schedule[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3e5f5,#e1bee7);color:#7b1fa2}.action-btn.schedule[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e1bee7,#ce93d8);transform:translateY(-2px);box-shadow:0 4px 8px #7b1fa233}.action-btn.schedule[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#f5f5f5,#eee);color:#9e9e9e;cursor:not-allowed;transform:none;box-shadow:none}.action-btn.more[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f5f5,#eee);color:#616161;margin-left:auto}.action-btn.more[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eee,#e0e0e0);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.modal.fade.show[_ngcontent-%COMP%]{background-color:#000000a6;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-dialog[_ngcontent-%COMP%]{max-width:800px;margin:1.75rem auto;transition:transform .3s ease-out}.modal-dialog-centered[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:calc(100% - 3.5rem)}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:20px;box-shadow:0 25px 50px #0003;overflow:hidden;animation:_ngcontent-%COMP%_modalFadeIn .4s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{position:relative;padding:1.75rem 2rem;border-bottom:none}.modal-header.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9)!important;color:#fff}.modal-header.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e67e22)!important;color:#fff}.modal-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#3498db,#2ecc71);opacity:.8}.modal-header.bg-warning[_ngcontent-%COMP%]:after{background:linear-gradient(90deg,#f39c12,#e74c3c)}.modal-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;display:flex;align-items:center;gap:.75rem;letter-spacing:-.5px}.btn-close[_ngcontent-%COMP%]{background:#fff3;border-radius:50%;padding:.5rem;margin:-.5rem -.5rem -.5rem auto;transition:all .3s ease;opacity:.8}.btn-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:rotate(90deg);opacity:1}.modal-body[_ngcontent-%COMP%]{padding:2.5rem;background:#f8f9fa}.detail-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.detail-info[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:16px;box-shadow:0 4px 15px #0000000d;transition:all .3s ease;border-left:4px solid transparent;position:relative;overflow:hidden}.detail-info[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#3498db0d,#2ecc710d);opacity:0;transition:opacity .3s ease}.detail-info[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-left-color:#3498db;box-shadow:0 10px 25px #00000014}.detail-info[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]:hover:before{opacity:1}.detail-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:block;margin-bottom:.75rem;position:relative}.detail-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-.25rem;left:0;width:2rem;height:2px;background:#e1e5eb;border-radius:2px}.detail-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .detail-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .detail-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#2c3e50;position:relative;z-index:1}.detail-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-bottom:.25rem}.detail-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:.25rem}.detail-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6}.detail-info[_ngcontent-%COMP%]   p.text-success[_ngcontent-%COMP%], .detail-info[_ngcontent-%COMP%]   p.text-danger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600}.detail-info[_ngcontent-%COMP%]   p.text-success[_ngcontent-%COMP%]{color:#2ecc71!important}.detail-info[_ngcontent-%COMP%]   p.text-danger[_ngcontent-%COMP%]{color:#e74c3c!important}.detail-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.orientation-badge[_ngcontent-%COMP%]{display:inline-block;padding:.6rem 1.2rem;background:linear-gradient(135deg,#e3f2fd,#bbdefb);color:#1976d2;border-radius:12px;font-size:.9rem;font-weight:600;box-shadow:0 2px 8px #1976d226;transition:all .3s ease}.orientation-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1976d240}.owner-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.95rem;color:#495057;margin-top:.5rem;padding:.75rem;background:#f8f9fa;border-radius:8px;transition:all .3s ease}.owner-info[_ngcontent-%COMP%]:hover{background:#e9ecef}.owner-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db;font-size:1.1rem}.owner-email[_ngcontent-%COMP%]{margin-left:.25rem;color:#6c757d;font-size:.9rem;font-style:italic}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#495057;margin-bottom:.5rem;display:block}.form-control[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ced4da;border-radius:10px;font-size:1rem;transition:all .3s ease;background:#f8f9fa}.form-control[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 0 .25rem #3498db40;background:#fff}textarea.form-control[_ngcontent-%COMP%]{min-height:100px;resize:vertical}select.form-control[_ngcontent-%COMP%]{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23495057' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 1rem center;background-size:16px 12px;padding-right:2.5rem}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-top:1px solid rgba(0,0,0,.05);background:#fff;display:flex;justify-content:flex-end;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:10px;font-weight:600;font-size:.95rem;transition:all .3s cubic-bezier(.25,.8,.25,1);display:flex;align-items:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);border:none;color:#fff;box-shadow:0 4px 10px #3498db40}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2980b9,#2c3e50);transform:translateY(-2px);box-shadow:0 6px 15px #3498db59}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-secondary[_ngcontent-%COMP%]{background:#f1f3f5;border:1px solid #dee2e6;color:#495057}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;color:#212529;transform:translateY(-2px)}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);border:none;color:#fff;box-shadow:0 4px 10px #e74c3c40}.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#c0392b,#a93226);transform:translateY(-2px);box-shadow:0 6px 15px #e74c3c59}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;transform:none!important;box-shadow:none!important}.video-container[_ngcontent-%COMP%]{position:relative;border-radius:10px;overflow:hidden;background:#000;height:130px}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0000001a}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}video.hidden[_ngcontent-%COMP%]{opacity:0}video.card-img-top[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;transition:opacity .3s ease}.card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;transition:all .3s ease;border:1px solid rgba(0,0,0,.05)}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a!important}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.form-check[_ngcontent-%COMP%]{display:flex;align-items:center}.form-check-input[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;margin-top:0;margin-right:.75rem;cursor:pointer;border-radius:4px;border:2px solid #ced4da;transition:all .2s ease}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#3498db;border-color:#3498db}.form-check-label[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;font-size:1rem;color:#2c3e50}.card-text[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin-top:.5rem}.modal-header.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f39c12,#e67e22)!important}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#495057;text-align:center;margin:1rem 0}.status-indicator[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}.status-active[_ngcontent-%COMP%]{background:#2ecc71;box-shadow:0 0 0 2px #2ecc714d}.status-inactive[_ngcontent-%COMP%]{background:#e74c3c;box-shadow:0 0 0 2px #e74c3c4d}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1200px){.devices-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}.detail-info[_ngcontent-%COMP%]{gap:1.5rem}}@media (max-width: 992px){.devices-dashboard[_ngcontent-%COMP%]{padding:2rem}.control-panel[_ngcontent-%COMP%]{padding:1.75rem}.panel-section[_ngcontent-%COMP%]{width:100%}.detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:2rem}}@media (max-width: 768px){.devices-dashboard[_ngcontent-%COMP%]{padding:1.5rem}.dashboard-title[_ngcontent-%COMP%]{font-size:1.75rem}.dashboard-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.5rem}.actions-group[_ngcontent-%COMP%]{flex-direction:column}.btn-add[_ngcontent-%COMP%]{width:100%}.devices-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}.detail-info[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 576px){.custom-tabs[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.tab-btn.active[_ngcontent-%COMP%]:after{display:none}.device-card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.device-status[_ngcontent-%COMP%]{align-self:flex-start}.detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-info[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]{padding:1.25rem}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(52,152,219,.2);border-radius:50%;border-top-color:#3498db;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#adb5bd;margin-bottom:1.5rem;display:inline-block}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;color:#495057}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:500px;margin:0 auto 1.5rem;line-height:1.6}@media (max-width: 768px){.devices-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.25rem;padding:.5rem 0;max-width:100%}.device-card[_ngcontent-%COMP%]{transform:none;height:auto;min-height:180px;width:100%;max-width:100%;margin:0;border-radius:14px;box-shadow:0 6px 16px #00000014;border:1px solid rgba(0,0,0,.06);box-sizing:border-box}.device-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 25px #0000001f}.device-card-header[_ngcontent-%COMP%], .device-card-body[_ngcontent-%COMP%], .device-card-footer[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.device-card-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:linear-gradient(to right,#f8f9fa,#f1f3f5);border-bottom:1px solid rgba(233,236,239,.7)}.device-number[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#495057}.device-status[_ngcontent-%COMP%]{padding:.4rem 1rem;border-radius:20px;font-size:.75rem;letter-spacing:.6px;box-shadow:0 3px 6px #00000014}.device-status.paired[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);color:#2e7d32}.device-status.unpaired[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffebee,#ffcdd2);color:#c62828}.device-card-body[_ngcontent-%COMP%]{padding:1.25rem;background:#fff}.device-info[_ngcontent-%COMP%]{gap:.85rem}.info-group[_ngcontent-%COMP%]{margin-bottom:.5rem}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;color:#6c757d;margin-bottom:.3rem}.info-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#212529;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#343a40;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.btn-details[_ngcontent-%COMP%]{background:none;border:none;color:#3498db;font-size:.85rem;font-weight:600;padding:.4rem 0;margin-top:.75rem;gap:.4rem}.btn-details[_ngcontent-%COMP%]:hover{color:#2980b9;transform:translate(4px)}.device-card-footer[_ngcontent-%COMP%]{padding:.85rem 1.25rem;display:flex;justify-content:space-between;background:linear-gradient(to right,#f8f9fa,#f1f3f5);border-top:1px solid rgba(233,236,239,.7)}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;box-shadow:0 3px 6px #00000014;transition:all .25s ease}.action-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.action-btn[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:0 1px 3px #00000014}.action-btn.edit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb);color:#1976d2}.action-btn.schedule[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9);color:#2e7d32}.action-btn.more[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f5f5,#eee);color:#616161}}@media (max-width: 576px){.devices-dashboard[_ngcontent-%COMP%]{padding:1.25rem}.devices-grid[_ngcontent-%COMP%]{gap:1rem;width:100%}.device-card[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-radius:12px}.container-fluid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%], .col-12[_ngcontent-%COMP%]{padding-left:0;padding-right:0;margin-left:0;margin-right:0;width:100%}.devices-dashboard[_ngcontent-%COMP%] > .container-fluid[_ngcontent-%COMP%]{padding:0;width:100%}}`]})};var Ys=()=>["portrait","landscape"];function qs(d,i){if(d&1&&(a(0,"div",43),l(1),r()),d&2){let t=h();m(),M(" ",t.errorMessage," ")}}function Hs(d,i){if(d&1){let t=E();a(0,"tr")(1,"td"),l(2),r(),a(3,"td"),l(4),r(),a(5,"td"),l(6),r(),a(7,"td"),l(8),r(),a(9,"td"),l(10),q(11,"titlecase"),r(),a(12,"td")(13,"button",44),C("click",function(){let c=_(t).$implicit,g=h();return x(g.confirmArchive(c._id))}),f(14,"i",45),l(15," UnArchive "),r()()()}if(d&2){let t=i.$implicit,o=i.index,c=h();m(2),T((c.currentPage-1)*c.itemsPerPage+o+1),m(2),T(t.deviceId),m(2),T(t.name),m(2),T(t.description),m(2),T(ce(11,5,t.orientation))}}function Zs(d,i){if(d&1&&(a(0,"option",46),l(1),q(2,"titlecase"),r()),d&2){let t=i.$implicit;u("value",t),m(),M(" ",ce(2,2,t)," ")}}var _t=class d{constructor(i,t,o){this.adminService=i;this.route=t;this.router=o}devices=[];filteredDevices=[];ads=[];searchTerm="";currentPage=1;itemsPerPage=5;totalPages=0;errorMessage="";editDeviceObject={};isEditModalOpen=!1;isConfirmDialogOpen=!1;archivingDeviceId="";selectedDevice=null;selectedAds=[];isScheduleModalOpen=!1;userId;ngOnInit(){this.route.params.subscribe(i=>{this.userId=i.userId||"",this.loadDevices()})}loadDevices(){this.adminService.getDevices().subscribe(i=>{console.log(i),i&&Array.isArray(i.data)?(this.devices=i.data.filter(t=>t.isDeleted==!0),console.log(this.devices),this.filteredDevices=[...this.devices],this.calculatePagination()):console.error("Unexpected response format:",i)},i=>{this.errorMessage=i.error?.message||"Failed to load devices. Please try again."})}unpairageDevice(i){this.adminService.isPaired(i).subscribe(t=>{this.loadDevices()})}loadAds(){this.adminService.getAds().subscribe(i=>{this.ads=(i.data||[]).filter(t=>t.isDeleted===!1)},i=>{this.errorMessage=i.error?.message||"Failed to load advertisements."})}onSearch(){let i=this.searchTerm.toLowerCase();this.filteredDevices=this.devices.filter(t=>t.name.toLowerCase().includes(i)||t.description.toLowerCase().includes(i)||t.orientation.toLowerCase().includes(i)),this.calculatePagination()}calculatePagination(){this.totalPages=Math.ceil(this.filteredDevices.length/this.itemsPerPage),this.currentPage=Math.min(this.currentPage,this.totalPages||1)}getPaginatedDevices(){let i=(this.currentPage-1)*this.itemsPerPage,t=i+this.itemsPerPage;return this.filteredDevices.slice(i,t)}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}openEditModal(i){this.editDeviceObject=j({},i),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}updateDevice(){this.adminService.updateDevices(this.editDeviceObject._id,this.editDeviceObject).subscribe(()=>{this.loadDevices(),this.isEditModalOpen=!1},i=>{this.errorMessage=i.error?.message||"Failed to update device. Please try again."})}confirmArchive(i){this.archivingDeviceId=i,this.isConfirmDialogOpen=!0}unarchiveDevices(){this.adminService.unarchiveDevices(this.archivingDeviceId).subscribe(()=>{this.loadDevices(),this.isConfirmDialogOpen=!1},i=>{console.error("Error archiving device:",i),this.errorMessage=i.error?.message||"Failed to archive device. Please try again."})}closeConfirmDialog(){this.isConfirmDialogOpen=!1,this.archivingDeviceId=""}openScheduleModal(i){this.selectedDevice=i,this.loadAds(),this.isScheduleModalOpen=!0}navigateToSchedule(){this.isScheduleModalOpen=!1;let i={deviceId:this.selectedDevice._id,ads:this.selectedAds.join(",")};this.router.navigate(["/admin/Makeschedule"],{queryParams:i})}toggleAdSelection(i,t){t?this.selectedAds.push(i):this.selectedAds=this.selectedAds.filter(o=>o!==i)}navigateToAddDevice(){this.router.navigate(["/admin/addDevices"])}deleteDevice(i){this.adminService.deleteDeviceById(i).subscribe(()=>{this.loadDevices()},t=>{this.errorMessage=t.error?.message||"Failed to delete device."})}static \u0275fac=function(t){return new(t||d)(S($),S(Be),S(W))};static \u0275cmp=N({type:d,selectors:[["app-archive-dev"]],standalone:!1,decls:79,vars:12,consts:[[1,"container","py-4","ad-list-container"],[1,"list-title","text-center"],[1,"row","align-items-center","mb-3"],[1,"col-md-6"],[1,"input-group"],["type","text","placeholder","Search devices...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],[1,"input-group-text","bg-primary","text-white"],[1,"fas","fa-search"],["class","alert alert-danger",4,"ngIf"],[1,"table-responsive","shadow-sm","rounded"],[1,"table","table-striped","table-hover"],[1,"table-primary"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-chevron-left"],[1,"fw-bold","text-primary"],[1,"fas","fa-chevron-right"],["id","editDeviceModal","tabindex","-1","aria-labelledby","editDeviceModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","editDeviceModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","orientation",1,"form-label"],["id","orientation","name","orientation","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","confirmArchiveModal","tabindex","-1","aria-labelledby","confirmArchiveModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header","bg-success","text-white"],["id","confirmArchiveModalLabel",1,"modal-title"],[1,"fw-bold","text-danger"],["data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"alert","alert-danger"],["data-bs-toggle","modal","data-bs-target","#confirmArchiveModal",1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-archive"],[3,"value"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"h2",1),l(2,"Archived Devices List"),r(),a(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5),A("ngModelChange",function(g){return I(o.searchTerm,g)||(o.searchTerm=g),g}),C("input",function(){return o.onSearch()}),r(),a(7,"span",6),f(8,"i",7),r()()()(),y(9,qs,2,1,"div",8),a(10,"div",9)(11,"table",10)(12,"thead",11)(13,"tr")(14,"th"),l(15,"#"),r(),a(16,"th"),l(17,"Device ID"),r(),a(18,"th"),l(19,"Name"),r(),a(20,"th"),l(21,"Description"),r(),a(22,"th"),l(23,"Orientation"),r(),a(24,"th"),l(25,"Actions"),r()()(),a(26,"tbody"),y(27,Hs,16,7,"tr",12),r()()(),a(28,"div",13)(29,"button",14),C("click",function(){return o.previousPage()}),f(30,"i",15),l(31," Previous "),r(),a(32,"span",16),l(33),r(),a(34,"button",14),C("click",function(){return o.nextPage()}),l(35," Next "),f(36,"i",17),r()(),a(37,"div",18)(38,"div",19)(39,"div",20)(40,"div",21)(41,"h5",22),l(42,"Edit Device"),r(),f(43,"button",23),r(),a(44,"div",24)(45,"form",25),C("ngSubmit",function(){return o.updateDevice()}),a(46,"div",26)(47,"label",27),l(48,"Name"),r(),a(49,"input",28),A("ngModelChange",function(g){return I(o.editDeviceObject.name,g)||(o.editDeviceObject.name=g),g}),r()(),a(50,"div",26)(51,"label",29),l(52,"Description"),r(),a(53,"textarea",30),A("ngModelChange",function(g){return I(o.editDeviceObject.description,g)||(o.editDeviceObject.description=g),g}),r()(),a(54,"div",26)(55,"label",31),l(56,"Orientation"),r(),a(57,"select",32),A("ngModelChange",function(g){return I(o.editDeviceObject.orientation,g)||(o.editDeviceObject.orientation=g),g}),y(58,Zs,3,4,"option",33),r()(),a(59,"div",34)(60,"button",35),l(61,"Save Changes"),r(),a(62,"button",36),l(63," Cancel "),r()()()()()()(),a(64,"div",37)(65,"div",19)(66,"div",20)(67,"div",38)(68,"h5",39),l(69," Confirm UnArchive "),r(),f(70,"button",23),r(),a(71,"div",24)(72,"p",40),l(73,"Are you sure you want to unarchive this device?"),r()(),a(74,"div",34)(75,"button",41),C("click",function(){return o.unarchiveDevices()}),l(76," Yes "),r(),a(77,"button",42),l(78," No "),r()()()()()()),t&2&&(m(6),k("ngModel",o.searchTerm),m(3),u("ngIf",o.errorMessage),m(18),u("ngForOf",o.getPaginatedDevices()),m(2),u("disabled",o.currentPage===1),m(4),Oe(" Page ",o.currentPage," of ",o.totalPages," "),m(),u("disabled",o.currentPage===o.totalPages),m(15),k("ngModel",o.editDeviceObject.name),m(4),k("ngModel",o.editDeviceObject.description),m(4),k("ngModel",o.editDeviceObject.orientation),m(),u("ngForOf",$t(11,Ys)))},dependencies:[H,R,ee,ae,se,Z,re,G,X,le,J,oe,he],encapsulation:2})};function Gs(d,i){if(d&1&&(a(0,"div",6),l(1),r()),d&2){let t=h();m(),M(" ",t.success," ")}}function Ks(d,i){d&1&&(a(0,"div",7)(1,"div",8)(2,"span",9),l(3,"Loading..."),r()()())}function Qs(d,i){if(d&1&&(a(0,"div",34)(1,"div",16)(2,"h5",17),l(3),r(),a(4,"p",35),l(5),r(),a(6,"p",35),l(7),r()()()),d&2){let t=h(2);m(3),T(t.device.name),m(2),M("ID: ",t.device._id,""),m(2),M("Location: ",t.device.location||"Not specified","")}}function Xs(d,i){if(d&1&&(a(0,"div",36)(1,"h5",37),l(2),r(),a(3,"p",37),l(4),r()()),d&2){let t=i.$implicit;m(2),T(t.name),m(2),M("Duration: ",t.duration," seconds")}}function Js(d,i){if(d&1){let t=E();a(0,"form",10),C("ngSubmit",function(){_(t);let c=h();return x(c.createSchedule())}),a(1,"div",11)(2,"h4"),l(3,"Device Information"),r(),y(4,Qs,8,3,"div",12),r(),a(5,"div",11)(6,"h4"),l(7,"Selected Advertisements"),r(),a(8,"div",13),y(9,Xs,5,2,"div",14),r()(),a(10,"div",15)(11,"div",16)(12,"h4",17),l(13,"Schedule Settings"),r(),a(14,"div",11)(15,"label",18),l(16,"Start Time"),r(),a(17,"input",19),A("ngModelChange",function(c){_(t);let g=h();return I(g.startTime,c)||(g.startTime=c),x(c)}),r()(),a(18,"div",11)(19,"label",20),l(20,"Play Time (minutes)"),r(),a(21,"input",21),A("ngModelChange",function(c){_(t);let g=h();return I(g.playTime,c)||(g.playTime=c),x(c)}),r()(),a(22,"div",11)(23,"label",22),l(24,"Repeat"),r(),a(25,"select",23),A("ngModelChange",function(c){_(t);let g=h();return I(g.repeat,c)||(g.repeat=c),x(c)}),a(26,"option",24),l(27,"Once"),r(),a(28,"option",25),l(29,"Daily"),r(),a(30,"option",26),l(31,"Weekly"),r()()(),a(32,"div",11)(33,"label",27),l(34,"Play Mode"),r(),a(35,"select",28),A("ngModelChange",function(c){_(t);let g=h();return I(g.playMode,c)||(g.playMode=c),x(c)}),a(36,"option",29),l(37,"Loop"),r(),a(38,"option",30),l(39,"Sequence"),r(),a(40,"option",31),l(41,"Random"),r()()()()(),a(42,"div",32)(43,"button",33),l(44),r()()()}if(d&2){let t=h();m(4),u("ngIf",t.device),m(5),u("ngForOf",t.ads),m(8),k("ngModel",t.startTime),m(4),k("ngModel",t.playTime),m(4),k("ngModel",t.repeat),m(10),k("ngModel",t.playMode),m(9),M(" ",t.loading?"Creating Schedule...":"Create Schedule"," ")}}var nn=class d{constructor(i,t,o,c,g,b){this.route=i;this.router=t;this.adminService=o;this.socketService=c;this.platformId=g;this.authService=b}deviceId="";selectedAds=[];device=null;ads=[];loading=!1;error=null;success=null;startTime=new Date;playTime=60;repeat="once";playMode="loop";subscriptions=[];ngOnInit(){Yt(this.platformId)&&this.route.queryParams.subscribe(i=>{this.deviceId=i.deviceId,this.selectedAds=i.ads?i.ads.split(","):[],this.deviceId&&(this.loadDeviceAndAds(),this.socketService.joinRoom(this.deviceId))}),this.socketService.getConnectionStatus().pipe(Tn(3e4),Vn(i=>(this.error="Request timed out",this.loading=!1,Dn(null)))).subscribe(i=>{i||(this.error="Disconnected from server")})}loadDeviceAndAds(){this.loading=!0,this.adminService.getDevicesById(this.deviceId).pipe(Tn(3e4),Vn(t=>(this.error="Request timed out",this.loading=!1,Dn(null)))).subscribe(t=>{this.device=t.data,this.loading=!1},t=>{this.error="Error loading device details",this.loading=!1});let i=this.selectedAds.map(t=>this.adminService.getAdsById(t).toPromise());Promise.all(i).then(t=>{this.ads=t.map(o=>o.data).filter(o=>!o.archived)}).catch(()=>{this.error="Error loading advertisement details"})}createSchedule(){let i=this.authService.userId,t={advertisementIds:this.selectedAds,deviceId:this.deviceId,userId:i,startTime:this.startTime,playTime:this.playTime,repeat:this.repeat,playMode:this.playMode};this.socketService.emit("updateSchedule",t),this.adminService.createSchedule(t).subscribe(()=>{this.success="Schedule created successfully"},o=>{this.error=o.error?.message||"Error creating schedule"})}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe()),this.socketService.leaveRoom(this.deviceId)}static \u0275fac=function(t){return new(t||d)(S(Be),S(W),S($),S(Re),S(Bt),S(be))};static \u0275cmp=N({type:d,selectors:[["app-makeschedule"]],standalone:!1,decls:8,vars:3,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","text-center my-3",4,"ngIf"],["class","needs-validation","novalidate","",3,"ngSubmit",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"text-center","my-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"mb-3"],["class","card",4,"ngIf"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"card","mb-3"],[1,"card-body"],[1,"card-title"],["for","startTime",1,"form-label"],["type","datetime-local","id","startTime","name","startTime","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","playTime",1,"form-label"],["type","number","id","playTime","name","playTime","min","1","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","repeat",1,"form-label"],["id","repeat","name","repeat","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","once"],["value","daily"],["value","weekly"],["for","playMode",1,"form-label"],["id","playMode","name","playMode","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","loop"],["value","sequence"],["value","random"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary"],[1,"card"],[1,"card-text"],[1,"list-group-item"],[1,"mb-1"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"Create Schedule"),r(),y(5,Gs,2,1,"div",3)(6,Ks,4,0,"div",4)(7,Js,45,7,"form",5),r()()()),t&2&&(m(5),u("ngIf",o.success),m(),u("ngIf",o.loading),m(),u("ngIf",!o.loading))},dependencies:[H,R,ee,ae,se,Z,Zt,re,G,X,le,Gi,J,oe],styles:['.container[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}h2[_ngcontent-%COMP%]{color:#2c3e50;font-weight:700;margin-bottom:2rem;position:relative;padding-bottom:.5rem}h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:4px;background:linear-gradient(to right,#3498db,#2980b9);border-radius:2px}.card[_ngcontent-%COMP%]{background:#fff;border:none;border-radius:15px;box-shadow:0 4px 20px #00000014;transition:all .3s ease;margin-bottom:1.5rem}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px #0000001f}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-title[_ngcontent-%COMP%]{color:#34495e;font-size:1.25rem;font-weight:600;margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:10px;padding:.75rem 1rem;transition:all .3s ease;background-color:#f8f9fa}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 0 .2rem #3498db40;background-color:#fff}.list-group-item[_ngcontent-%COMP%]{border:none;border-radius:10px;margin-bottom:.5rem;background-color:#f8f9fa;padding:1rem;transition:all .3s ease}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef;transform:translate(5px)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#3498db,#2980b9);border:none;box-shadow:0 4px 15px #3498db4d}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#2980b9,#3498db);transform:translateY(-2px);box-shadow:0 6px 20px #3498db66}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.alert[_ngcontent-%COMP%]{border-radius:10px;padding:1rem;margin-bottom:1.5rem;border:none;box-shadow:0 4px 15px #0000001a}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-left:4px solid #28a745}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;color:#3498db}h4[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600;margin-bottom:1.5rem;position:relative;display:inline-block}h4[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:100%;height:2px;background:linear-gradient(to right,#3498db,transparent)}.device-info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f8f9fa,#fff);border-left:4px solid #3498db}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem}.card[_ngcontent-%COMP%]{margin-bottom:1rem}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:16px}}input[type=datetime-local][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;background-color:#f8f9fa;padding:.75rem 1rem;border:2px solid #e9ecef;border-radius:10px;color:#2c3e50}.schedule-settings[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#fff,#f8f9fa);border-radius:15px;padding:2rem}.selected-ads[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.selected-ad-item[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:1rem;box-shadow:0 2px 10px #0000000d;transition:all .3s ease}.selected-ad-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 15px #0000001a}']})};var el=5*60*1e3,tl=2*60*1e3,nl=10*60*1e3,il=30*1e3,on=class d{constructor(i){this.platformId=i;this.isBrowser=Yt(this.platformId),this.isBrowser&&(this.loadFromLocalStorage(),this.startHealthCheckInterval())}deviceStates=new Map;deviceStates$=new Ni(new Map);healthCheckInterval;isBrowser;ngOnDestroy(){this.healthCheckInterval&&clearInterval(this.healthCheckInterval)}getDeviceStates(){return this.deviceStates$.asObservable()}getDeviceState(i){return this.deviceStates.get(i)}getDeviceHealth(i){let t=this.deviceStates.get(i);return t?t.health:{status:"unknown",color:"dot-orange",message:"Waiting for device updates...",lastSeen:null}}updateAppState(i,t){let o=this.getOrCreateDeviceState(i),c=new Date;(o.health.status==="offline"||o.health.status==="broken")&&console.log(`\u2705 Device ${i} recovered from ${o.health.status} state`),o.appState={value:t,lastUpdate:c,isStale:!1},o.health.lastSeen=c,this.checkDeviceHealth(i),this.emitStateChange(),this.syncToLocalStorage()}updatePlaylistState(i,t){let o=this.getOrCreateDeviceState(i),c=new Date;(o.health.status==="offline"||o.health.status==="broken")&&console.log(`\u2705 Device ${i} recovered from ${o.health.status} state`),o.playlistState={currentAd:{title:t.title,index:t.index},lastUpdate:c,isStale:!1},o.health.lastSeen=c,this.checkDeviceHealth(i),this.emitStateChange(),this.syncToLocalStorage()}updateDeviceHealth(i,t){let o=this.getOrCreateDeviceState(i),c=new Date;o.health.lastSeen=new Date(t.lastSeen),o.health.status==="offline"&&console.log(`\u2705 Device ${i} recovered from offline state`);let g=c.getTime()-o.health.lastSeen.getTime(),b=this.calculateHealth(o,g);o.health=b,this.emitStateChange(),this.syncToLocalStorage()}getOrCreateDeviceState(i){return this.deviceStates.has(i)||this.deviceStates.set(i,{deviceId:i,appState:{value:null,lastUpdate:null,isStale:!1},playlistState:{currentAd:null,lastUpdate:null,isStale:!1},health:{status:"unknown",color:"dot-orange",message:"Waiting for device updates...",lastSeen:null}}),this.deviceStates.get(i)}startHealthCheckInterval(){this.healthCheckInterval=setInterval(()=>{this.checkAllDevicesHealth()},il)}checkAllDevicesHealth(){let i=Date.now(),t=!1;this.deviceStates.forEach((o,c)=>{let g=o.appState.lastUpdate?i-o.appState.lastUpdate.getTime():1/0,b=o.playlistState.lastUpdate?i-o.playlistState.lastUpdate.getTime():1/0,ue=o.health.lastSeen?i-o.health.lastSeen.getTime():1/0,O=o.appState.isStale,D=o.playlistState.isStale;if(o.appState.isStale=g>el,o.playlistState.isStale=b>tl,O!==o.appState.isStale||D!==o.playlistState.isStale){let U=o.health.status,w=this.calculateHealth(o,ue);w.status!==U&&(o.health=w,t=!0,console.log(`\u{1F504} Device ${c} status changed: ${U} \u2192 ${w.status}`))}}),t&&(this.emitStateChange(),this.syncToLocalStorage())}checkDeviceHealth(i){let t=this.deviceStates.get(i);if(!t)return;let o=Date.now(),c=t.health.lastSeen?o-t.health.lastSeen.getTime():1/0,g=this.calculateHealth(t,c);t.health=g}calculateHealth(i,t){let{appState:o,playlistState:c}=i;return t>nl?{status:"offline",color:"dot-gray",message:"Device offline - no updates for 10+ minutes",lastSeen:i.health.lastSeen}:o.isStale&&c.isStale?{status:"broken",color:"dot-red",message:"ERROR: App down, check the TV",lastSeen:i.health.lastSeen}:o.value==="foreground"&&!c.isStale?{status:"healthy",color:"dot-green",message:"All Good!",lastSeen:i.health.lastSeen}:o.value==="background"&&!c.isStale?{status:"degraded",color:"dot-red",message:"App in background but playlist working",lastSeen:i.health.lastSeen}:o.value==="background"&&c.isStale?{status:"broken",color:"dot-red",message:"App in background, playlist stopped",lastSeen:i.health.lastSeen}:o.value==="foreground"&&c.isStale?{status:"broken",color:"dot-red",message:"App working but Playlist blocked, restart playlist",lastSeen:i.health.lastSeen}:{status:"unknown",color:"dot-orange",message:"Waiting for device updates...",lastSeen:i.health.lastSeen}}emitStateChange(){this.deviceStates$.next(new Map(this.deviceStates))}syncToLocalStorage(){if(!this.isBrowser)return;let i=Array.from(this.deviceStates.entries()).map(([t,o])=>({deviceId:t,appState:{value:o.appState.value,lastUpdate:o.appState.lastUpdate?.toISOString()||null,isStale:o.appState.isStale},playlistState:{currentAd:o.playlistState.currentAd,lastUpdate:o.playlistState.lastUpdate?.toISOString()||null,isStale:o.playlistState.isStale},health:{status:o.health.status,color:o.health.color,message:o.health.message,lastSeen:o.health.lastSeen?.toISOString()||null}}));localStorage.setItem("deviceStates",JSON.stringify(i))}loadFromLocalStorage(){if(!this.isBrowser)return;let i=localStorage.getItem("deviceStates");if(i)try{let t=JSON.parse(i),o=Date.now();t.forEach(c=>{let g=c.health.lastSeen?new Date(c.health.lastSeen):null,b=c.appState.lastUpdate?new Date(c.appState.lastUpdate):null,ue=c.playlistState.lastUpdate?new Date(c.playlistState.lastUpdate):null,O=g?o-g.getTime():1/0,D=c.health;O>60*60*1e3&&(D={status:"offline",color:"dot-gray",message:"Device offline - last seen over 1 hour ago",lastSeen:g}),this.deviceStates.set(c.deviceId,{deviceId:c.deviceId,appState:{value:c.appState.value,lastUpdate:b,isStale:c.appState.isStale},playlistState:{currentAd:c.playlistState.currentAd,lastUpdate:ue,isStale:c.playlistState.isStale},health:{status:D.status,color:D.color,message:D.message,lastSeen:g}})}),console.log(`\u{1F4E6} Loaded ${this.deviceStates.size} device states from localStorage`),this.emitStateChange()}catch(t){console.error("Failed to load device states from localStorage:",t),this.isBrowser&&localStorage.removeItem("deviceStates")}}static \u0275fac=function(t){return new(t||d)(jt(Bt))};static \u0275prov=zt({token:d,factory:d.\u0275fac,providedIn:"root"})};var rl=(d,i)=>({"text-success":d,"text-danger":i});function al(d,i){if(d&1){let t=E();a(0,"tr")(1,"td")(2,"div",39),f(3,"i",40),a(4,"span",41),l(5),r()()(),a(6,"td",42)(7,"span",43),l(8),r()(),a(9,"td")(10,"span",44),f(11,"i",45),l(12),r()(),a(13,"td",42)(14,"div",46),f(15,"i",47)(16,"i",48),r()(),a(17,"td",42)(18,"div",46),f(19,"i",47),a(20,"span"),l(21),r()()(),a(22,"td")(23,"span",49),f(24,"i",50),l(25),r()(),a(26,"td")(27,"div",51)(28,"button",52),C("click",function(){let c=_(t).$implicit,g=h();return x(g.viewSchedule(c._id))}),f(29,"i",53),r(),a(30,"button",54),C("click",function(){let c=_(t).$implicit,g=h();return x(g.deleteSchedule(c._id))}),f(31,"i",55),r()()()()}if(d&2){let t=i.$implicit,o=h();m(4),dt("title",t.deviceId.name),m(),M(" ",t.deviceId.name," "),m(3),T(t.advertisementIds.length),m(2),dt("title",(t.instantData==null?null:t.instantData.titleVideo)||"Waiting..."),m(2),M(" ",(t.instantData==null?null:t.instantData.titleVideo)||"Waiting..."," "),m(3),u("ngClass",o.getAppStateColor(t.deviceId.deviceId)),m(4),u("ngClass",o.getPlaylistColor(t.deviceId.deviceId)),m(2),M("#",(t.instantData==null?null:t.instantData.index)||"N/A",""),m(2),dt("title",o.deviceLogs[t.deviceId.deviceId]||"No status"),u("ngClass",He(11,rl,o.deviceLogs[t.deviceId.deviceId]==="All Good!"||o.deviceLogs[t.deviceId.deviceId]==="Playlist updated",o.deviceLogs[t.deviceId.deviceId]!=="All Good!"&&o.deviceLogs[t.deviceId.deviceId]!=="Playlist updated")),m(2),M(" ",o.deviceLogs[t.deviceId.deviceId]||"No status"," ")}}function sl(d,i){d&1&&(a(0,"div",56)(1,"div",57)(2,"span",58),l(3,"Loading..."),r()(),a(4,"p",59),f(5,"i",60),l(6," Loading schedules..."),r()())}function ll(d,i){d&1&&(a(0,"div",56),f(1,"i",61),a(2,"p"),l(3,"No schedules found."),r()())}function dl(d,i){if(d&1&&(a(0,"div",62),f(1,"i",63),l(2),r()),d&2){let t=h();m(2),M(" ",t.error," ")}}var rn=class d{constructor(i,t,o,c,g,b){this.adminService=i;this.router=t;this.socketService=o;this.deviceStateService=c;this.cdr=g;this.ngZone=b}schedules=[];paginatedSchedules=[];loading=!1;error="";pageIndex=0;pageSize=25;totalPages=0;subscriptions=[];deviceLogs={};deviceStates=new Map;VariableTitleVd="Your Text Here";ngOnInit(){this.loadSchedules(),this.updatePagination();let i=this.deviceStateService.getDeviceStates().subscribe(t=>{this.deviceStates=t,this.updateSchedulesWithDeviceStates(),this.cdr.detectChanges()});this.subscriptions.push(i),this.socketService.isConnected()?(console.log("Socket already connected, setting up subscriptions"),this.subscribeToSocketEvents()):this.socketService.onConnect().subscribe(()=>{console.log("Socket is connected, setting up subscriptions"),this.subscribeToSocketEvents()})}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}subscribeToSocketEvents(){if(!this.socketService.isConnected()){console.error("Socket is not connected");return}let i=this.socketService.listen("appStateChanged").subscribe(O=>{console.log(`\u2705 Received appStateChanged for device ${O.deviceId}:`,O),this.deviceStateService.updateAppState(O.deviceId,O.state),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{appState:O.state,status:U.status,color:U.color,message:U.message})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(i);let t=this.socketService.listen("playerStateChanged").subscribe(O=>{console.log(`\u2705 Received playerStateChanged for device ${O.deviceId}:`,O);let D=O.currentAd||{},U=D.name||"No title available",w=D.index!==void 0?D.index:-1;this.deviceStateService.updatePlaylistState(O.deviceId,{title:U,index:w}),this.schedules=this.schedules.map(Ge=>{if(Ge.deviceId.deviceId===O.deviceId){let Me=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},Ge),{instantData:de(j({},Ge.instantData),{titleVideo:U,index:w>=0?w+1:0,status:Me.status,color:Me.color,message:Me.message,error:!1})})}return Ge}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(t);let o=this.socketService.listen("AppStateWeb").subscribe(O=>{console.log(`\u26A0\uFE0F Received legacy AppStateWeb for device ${O.deviceId}:`,O),this.deviceStateService.updateAppState(O.deviceId,O.state),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{appState:O.state,status:U.status,color:U.color,message:U.message})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(o);let c=this.socketService.listen("currentAdWeb").subscribe(O=>{console.log(`\u26A0\uFE0F Received legacy currentAdWeb for device ${O.deviceId}:`,O),this.deviceStateService.updatePlaylistState(O.deviceId,{title:O.title||"No title available",index:O.index}),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{titleVideo:O.title||"No title available for this device",index:O.index+1,status:U.status,color:U.color,message:U.message,error:!1})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(c);let g=this.socketService.listen("playlistStateUpdated").subscribe(O=>{console.log(`\u2705 Received playlistStateUpdated for device ${O.deviceId}:`,O),this.deviceStateService.updatePlaylistState(O.deviceId,{title:O.title||"No title available",index:O.index}),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{titleVideo:O.title||"No title available for this device",index:O.index+1,status:U.status,color:U.color,message:U.message,error:!1})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(g);let b=this.socketService.listen("appStateUpdated").subscribe(O=>{console.log(`\u2705 Received appStateUpdated for device ${O.deviceId}:`,O),this.deviceStateService.updateAppState(O.deviceId,O.state),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{appState:O.state,status:U.status,color:U.color,message:U.message})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(b);let ue=this.socketService.listen("deviceHealthUpdated").subscribe(O=>{console.log(`\u2705 Received deviceHealthUpdated for device ${O.deviceId}:`,O),this.deviceStateService.updateDeviceHealth(O.deviceId,{status:O.status,color:O.color,message:O.message,lastSeen:O.lastSeen}),this.schedules=this.schedules.map(D=>{if(D.deviceId.deviceId===O.deviceId){let U=this.deviceStateService.getDeviceHealth(O.deviceId);return de(j({},D),{instantData:de(j({},D.instantData),{status:U.status,color:U.color,message:U.message})})}return D}),this.updatePagination(),this.cdr.detectChanges()});this.subscriptions.push(ue)}updateSchedulesWithDeviceStates(){this.schedules.forEach(i=>{let t=i.deviceId?.deviceId;if(!t)return;let o=this.deviceStates.get(t);o&&this.logState(t,o.health.message)})}loadSchedules(){this.loading=!0,this.adminService.getAllSchedule().subscribe({next:i=>{console.log(i),this.schedules=i.data.filter(o=>o.deviceId&&!o.deviceId.isDeleted).map(o=>de(j({},o),{advertisementIds:o.advertisementIds.filter(c=>!c.isDeleted),videoLoaded:!1}));let t=this.schedules.map(o=>o.deviceId?.deviceId).filter(o=>!!o);this.socketService.emit("checkStates",{devices:t}),this.loading=!1,this.updatePagination()},error:i=>{this.error=i.error?.message||"Error loading schedules",this.loading=!1}})}SecondLoad(){this.loading=!0,this.adminService.getAllSchedule().subscribe({next:i=>{console.log(i),this.schedules=i.data.filter(o=>o.deviceId&&!o.deviceId.isDeleted).map(o=>de(j({},o),{advertisementIds:o.advertisementIds.filter(c=>!c.isDeleted),endTime:this.calculateEndTime(o.startTime,o.playTime)}));let t=this.schedules.map(o=>o.deviceId?.deviceId).filter(o=>!!o);this.socketService.emit("checkStates",{devices:t}),this.loading=!1,this.updatePagination()},error:i=>{this.error=i.error?.message||"Error loading schedules",this.loading=!1}})}calculateEndTime(i,t){return new Date(new Date(i).getTime()+t*1e3)}createSchedule(){this.router.navigate(["/admin/schedule/create"])}editSchedule(i){this.router.navigate(["/admin/schedule/edit",i._id])}viewSchedule(i){this.router.navigate(["/admin/schedule/view/"],{queryParams:{scheduleId:i}})}deleteSchedule(i){this.adminService.deleteScheduleById(i).subscribe({next:()=>{this.loadSchedules()},error:t=>{console.error("Error deleting schedule:",t)}})}selectedDeviceId;openModalGods(i){this.selectedDeviceId=i;let t=this.schedules.find(o=>o.deviceId.deviceId===i);this.VariableTitleVd=t?.instantData?.titleVideo||"No title available for this device",this.cdr.detectChanges()}logState(i,t){this.deviceLogs[i]!==t&&(console.log(`Device ${i}: ${t}`),this.deviceLogs[i]=t,this.cdr.detectChanges())}updatePagination(){this.totalPages=Math.ceil(this.schedules.length/this.pageSize);let i=this.pageIndex*this.pageSize,t=i+this.pageSize;this.paginatedSchedules=this.schedules.slice(i,t)}nextPage(){this.pageIndex<this.totalPages-1&&(this.pageIndex++,this.updatePagination())}previousPage(){this.pageIndex>0&&(this.pageIndex--,this.updatePagination())}getAppStateColor(i){return this.deviceStates.get(i)?.health.color||"dot-orange"}getPlaylistColor(i){return this.deviceStates.get(i)?.health.color||"dot-orange"}onVideoLoaded(i){i.videoLoaded=!0}static \u0275fac=function(t){return new(t||d)(S($),S(W),S(Re),S(on),S(Bi),S(Nt))};static \u0275cmp=N({type:d,selectors:[["app-schedule"]],standalone:!1,decls:58,vars:9,consts:[[1,"mt-4"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"table-dark"],[2,"width","18%"],[2,"width","8%"],[2,"width","25%"],[2,"width","10%"],[2,"width","22%"],[2,"width","7%"],["routerLink","/admin/Devices","title","New Schedule",1,"btn","btn-primary","btn-sm"],[1,"fas","fa-plus-circle"],[4,"ngFor","ngForOf"],[1,"pagination-controls","mt-4"],[1,"prev-button",3,"click","disabled"],[1,"fas","fa-chevron-left","me-1"],[1,"fas","fa-file-alt","me-1"],[1,"next-button",3,"click","disabled"],[1,"fas","fa-chevron-right","ms-1"],["class","text-center mt-4",4,"ngIf"],["class","alert alert-danger mt-4","role","alert",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"fas","fa-eye","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-6","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"fas","fa-server","me-2"],[1,"card-text"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"fas","fa-times","me-1"],[1,"d-flex","align-items-center"],[1,"fas","fa-tv","me-2","text-primary"],[1,"fw-medium","device-name-text",3,"title"],[1,"text-center"],[1,"badge","bg-info"],[1,"video-title-text",3,"title"],[1,"fas","fa-play-circle","me-1","text-success"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fas","fa-circle","status-dot","me-2",3,"ngClass"],[1,"fas","fa-mobile-alt"],[1,"status-message-full",3,"ngClass","title"],[1,"fas","fa-info-circle","me-1"],[1,"d-flex","gap-1","justify-content-center"],["title","View Schedule",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fas","fa-eye"],["title","Delete Schedule",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"text-center","mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"fas","fa-hourglass-half","me-1"],[1,"fas","fa-calendar-times","fa-3x","mb-3","text-muted"],["role","alert",1,"alert","alert-danger","mt-4"],[1,"fas","fa-exclamation-triangle","me-2"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th",4),l(6,"Device"),r(),a(7,"th",5),l(8,"Ads"),r(),a(9,"th",6),l(10,"Current Video"),r(),a(11,"th",7),l(12,"App Status"),r(),a(13,"th",7),l(14,"Playlist"),r(),a(15,"th",8),l(16,"Status Message"),r(),a(17,"th",9),l(18,"Actions "),a(19,"button",10),f(20,"i",11),r()()()(),a(21,"tbody"),y(22,al,32,14,"tr",12),r()()(),a(23,"div",13)(24,"button",14),C("click",function(){return o.previousPage()}),f(25,"i",15),l(26," Previous "),r(),a(27,"span"),f(28,"i",16),l(29),r(),a(30,"button",17),C("click",function(){return o.nextPage()}),l(31," Next "),f(32,"i",18),r()(),y(33,sl,7,0,"div",19)(34,ll,4,0,"div",19)(35,dl,3,1,"div",20),a(36,"div",21)(37,"div",22)(38,"div",23)(39,"div",24)(40,"h5",25),f(41,"i",26),l(42,"God's Eye View"),r(),f(43,"button",27),r(),a(44,"div",28)(45,"div",29)(46,"div",30)(47,"div",31)(48,"div",32)(49,"h5",33),f(50,"i",34),l(51,"Device Log"),r(),a(52,"p",35),l(53),r()()()()()(),a(54,"div",36)(55,"button",37),f(56,"i",38),l(57," Close "),r()()()()()()),t&2&&(m(22),u("ngForOf",o.paginatedSchedules),m(2),u("disabled",o.pageIndex===0),m(5),Oe(" Page ",o.pageIndex+1," of ",o.totalPages,""),m(),u("disabled",o.pageIndex>=o.totalPages-1),m(3),u("ngIf",o.loading),m(),u("ngIf",!o.loading&&o.schedules.length===0),m(),u("ngIf",o.error),m(18),T(o.deviceLogs[o.selectedDeviceId]||"No log available"))},dependencies:[De,H,R,qt],styles:['.table-responsive[_ngcontent-%COMP%]{margin:0 auto;max-width:100%;overflow-x:auto;border-radius:12px;box-shadow:0 8px 30px #0000001f}.table[_ngcontent-%COMP%]{width:100%;margin-bottom:3rem;border-collapse:separate;border-spacing:0;table-layout:fixed}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:22%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:15%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:28%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:15%}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:18px 15px;font-size:16px;font-weight:600;letter-spacing:.5px;text-transform:uppercase;background:linear-gradient(to right,#f8f9fa,#fff);border-bottom:2px solid #e9ecef;white-space:nowrap}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;right:0;top:25%;height:50%;width:1px;background-color:#e9ecef}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 15px;font-size:15px;vertical-align:middle;border-bottom:1px solid #f1f3f5}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:auto;min-height:70px;transition:all .2s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transform:translateY(-2px);box-shadow:0 4px 10px #00000014}.fas.fa-circle[_ngcontent-%COMP%]{font-size:14px;margin-right:8px;position:relative;filter:drop-shadow(0 0 2px currentColor);transform:scale(1.1);transition:all .3s ease;vertical-align:middle;opacity:.9}.status-dot.fas.fa-circle[_ngcontent-%COMP%]:hover{transform:scale(1.3);opacity:1;cursor:pointer}.gods-eye-section[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;border-radius:12px;background-color:#fff9;margin-right:8px;transition:all .2s ease;border:1px solid rgba(0,0,0,.05)}.gods-eye-section[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#ffffffe6;box-shadow:0 2px 6px #0000000d;transform:translateY(-2px)}.dot-green[_ngcontent-%COMP%]{color:#22c55e;text-shadow:0 0 4px rgba(34,197,94,.2)}.dot-red[_ngcontent-%COMP%]{color:#ef4444;text-shadow:0 0 4px rgba(239,68,68,.2)}.dot-orange[_ngcontent-%COMP%]{color:#f59e0b!important;text-shadow:0 0 4px rgba(245,158,11,.2)}.dot-gray[_ngcontent-%COMP%]{color:#6b7280;text-shadow:0 0 4px rgba(107,114,128,.2)}@keyframes _ngcontent-%COMP%_blinking{0%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.3);filter:drop-shadow(0 0 8px currentColor)}to{opacity:1;transform:scale(1)}}.dot-blinking[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinking 1.5s infinite}.btn[_ngcontent-%COMP%]{font-size:14px;padding:6px 12px;border-radius:6px;transition:all .2s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#3b82f6,#2563eb);border-color:#2563eb}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(to right,#ef4444,#dc2626);border-color:#dc2626}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;margin-top:30px;margin-bottom:20px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;color:#4b5563;font-weight:600;font-size:15px;transition:all .3s ease;box-shadow:0 2px 5px #0000000d;position:relative}.pagination-controls[_ngcontent-%COMP%]   button.prev-button[_ngcontent-%COMP%]{border-left:4px solid #3b82f6;padding-left:30px}.pagination-controls[_ngcontent-%COMP%]   button.prev-button[_ngcontent-%COMP%]:before{content:"\\2190";position:absolute;left:15px;top:50%;transform:translateY(-50%);font-size:18px;transition:transform .3s ease;color:#3b82f6}.pagination-controls[_ngcontent-%COMP%]   button.prev-button[_ngcontent-%COMP%]:hover:before{transform:translate(-3px,-50%)}.pagination-controls[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]{padding-right:30px;border-right:4px solid #3b82f6}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]{border-right:4px solid #ef4444;background:linear-gradient(to right,#fff,#fff5f5)}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]:after{content:"";position:absolute;top:10px;right:10px;width:10px;height:10px;background-color:#ef4444;border-radius:50%;animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(.95);box-shadow:0 0 #ef4444b3}70%{transform:scale(1);box-shadow:0 0 0 6px #ef444400}to{transform:scale(.95);box-shadow:0 0 #ef444400}}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]{overflow:visible}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]:before{content:"New content available";position:absolute;bottom:100%;right:0;background-color:#ef4444;color:#fff;padding:6px 10px;border-radius:6px;font-size:12px;font-weight:400;white-space:nowrap;opacity:0;transform:translateY(10px);transition:all .3s ease;pointer-events:none;z-index:10;box-shadow:0 4px 12px #ef44444d}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]:hover:before{opacity:1;transform:translateY(0)}.pagination-controls[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]:after{content:"\\2192";position:absolute;right:15px;top:50%;transform:translateY(-50%);font-size:18px;transition:transform .3s ease;color:#3b82f6}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]:after{color:#ef4444}.pagination-controls[_ngcontent-%COMP%]   button.next-button[_ngcontent-%COMP%]:hover:after{transform:translate(3px,-50%)}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#4b5563;font-weight:500;background:#f3f4f6;padding:8px 16px;border-radius:8px;border:1px solid #e5e7eb}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{background:#f9fafb;color:#2563eb;border-color:#93c5fd;transform:translateY(-2px);box-shadow:0 4px 10px #0000001a}.pagination-controls[_ngcontent-%COMP%]   button.next-button.has-new-content[_ngcontent-%COMP%]:hover{color:#ef4444;border-color:#fca5a5}.table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0;box-shadow:none;table-layout:auto}.table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:14px;white-space:nowrap}.table[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;color:#64748b;font-weight:500;text-transform:none;letter-spacing:normal}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px;margin:3px;border-radius:6px}@media (max-width: 1200px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;font-size:15px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;font-size:14px}}@media (max-width: 992px){.table-responsive[_ngcontent-%COMP%]{max-width:100%}.table[_ngcontent-%COMP%]{table-layout:auto}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:normal}}@media (max-width: 768px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;padding:12px 8px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;padding:10px 8px}.btn-sm[_ngcontent-%COMP%]{padding:5px 10px;font-size:13px}}.video-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;min-height:150px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background-color:#fffc;z-index:1}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}video[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto}.d-none[_ngcontent-%COMP%]{display:none!important}.schedule-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000f;transition:all .25s ease;overflow:hidden;border:1px solid rgba(0,0,0,.05)}.schedule-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #00000014}.schedule-card-header[_ngcontent-%COMP%]{padding:10px 12px;background:linear-gradient(to right,#f8f9fa,#fff);border-bottom:1px solid #e9ecef}.schedule-card-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:.9rem}.schedule-card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3498db}.schedule-card-body[_ngcontent-%COMP%]{padding:10px 12px;font-size:.8rem}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d}.info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6c757d}.info-value[_ngcontent-%COMP%]{max-width:60%;overflow:hidden;text-overflow:ellipsis}.gods-eye-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:5px;padding:8px 10px;margin-top:8px;font-size:.75rem;text-align:center}.section-title[_ngcontent-%COMP%]{font-weight:600;color:#495057;font-size:.85rem;border-bottom:1px solid #dee2e6;padding-bottom:5px;margin-bottom:8px;text-align:center}.gods-eye-section[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{justify-content:center!important;gap:10px}.gods-eye-section[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 8px;border-radius:12px;background-color:#fff9;transition:all .2s ease;border:1px solid rgba(0,0,0,.05);margin:0 3px}.status-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:8px;font-size:.75rem;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:4px;border-radius:4px;background-color:#00000008}.status-dot.fas.fa-circle[_ngcontent-%COMP%]{vertical-align:middle;margin-right:4px}.schedule-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;background:#f8f9fa;border-top:1px solid #e9ecef}.action-btn[_ngcontent-%COMP%]{border:none;background:none;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6c757d}.view-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd;color:#2196f3}.edit-btn[_ngcontent-%COMP%]:hover{background:#e8f5e9;color:#4caf50}.refresh-btn[_ngcontent-%COMP%]:hover{background:#fff8e1;color:#ffc107}.delete-btn[_ngcontent-%COMP%]:hover{background:#ffebee;color:#f44336}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background:#fff;border:1px solid #e5e7eb;border-radius:6px;color:#4b5563;font-weight:500;font-size:.9rem;transition:all .2s ease}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;color:#2563eb;border-color:#93c5fd}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#4b5563;background:#f3f4f6;padding:6px 12px;border-radius:6px}@media (max-width: 576px){.schedule-card-body[_ngcontent-%COMP%]{padding:10px}.gods-eye-section[_ngcontent-%COMP%]{padding:6px 8px}.action-btn[_ngcontent-%COMP%]{width:28px;height:28px}}.status-dot.fas.fa-circle[_ngcontent-%COMP%]{font-size:14px;transform:scale(1.3);display:inline-block;margin-right:6px;position:relative;top:-1px}.table-responsive[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 12px #0000001a;overflow:hidden}.table[_ngcontent-%COMP%]{margin-bottom:0;font-size:.9rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#343a40;color:#fff;font-weight:600;border:none;padding:12px 8px;font-size:.85rem;text-align:center;white-space:nowrap}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;vertical-align:middle;border-color:#e9ecef}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.status-dot[_ngcontent-%COMP%]{font-size:12px;filter:drop-shadow(0 0 2px currentColor)}.status-message-text[_ngcontent-%COMP%]{font-size:.8rem;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem}.badge[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 8px}@media (max-width: 1200px){.table[_ngcontent-%COMP%]{font-size:.85rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 6px;font-size:.8rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px}}@media (max-width: 992px){.status-message-text[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 768px){.table[_ngcontent-%COMP%]{font-size:.8rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 4px;font-size:.75rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 4px}.status-message-text[_ngcontent-%COMP%]{max-width:100px}}.table-responsive[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 6px 20px #0000000f;overflow-x:auto;background:#fff;border:1px solid rgba(0,0,0,.04);margin-bottom:1.5rem}.table[_ngcontent-%COMP%]{margin-bottom:0;font-size:.75rem;font-family:Segoe UI,Roboto,sans-serif;line-height:1.2;min-width:800px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c3e50,#34495e);color:#fff;font-weight:600;border:none;padding:8px 6px;font-size:.7rem;text-align:center;white-space:nowrap;text-shadow:0 1px 2px rgba(0,0,0,.2);letter-spacing:.3px;line-height:1.1;position:sticky;top:0;z-index:10}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;vertical-align:middle;border-color:#0000000a;transition:all .2s ease;background:#fff;line-height:1.3;white-space:normal}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;min-height:50px;height:auto}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f8f9fa,#e9ecef);box-shadow:0 2px 8px #0000000a}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   .d-flex[_ngcontent-%COMP%]{background:#3498db0a;padding:4px 8px;border-radius:4px;border-left:2px solid #3498db;min-width:100px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   i[_ngcontent-%COMP%]{width:18px;height:18px;font-size:.8rem;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#3498db1a;flex-shrink:0}.status-dot[_ngcontent-%COMP%]{font-size:8px;filter:drop-shadow(0 0 2px currentColor);margin-right:4px!important;flex-shrink:0}.badge[_ngcontent-%COMP%]{font-size:.65rem;padding:2px 6px;border-radius:10px;font-weight:600;min-width:20px;text-align:center;white-space:nowrap}.status-message-text[_ngcontent-%COMP%]{font-size:.65rem;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px;padding:2px 4px;border-radius:3px;background:#f8f9fa99;border-left:2px solid transparent;line-height:1.2}.status-message-text.text-success[_ngcontent-%COMP%]{background:#28a74514;border-left-color:#28a745;color:#155724!important}.status-message-text.text-danger[_ngcontent-%COMP%]{background:#dc354514;border-left-color:#dc3545;color:#721c24!important}.status-message-full[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;display:inline-block;padding:4px 8px;border-radius:4px;background:#f8f9facc;border-left:3px solid transparent;line-height:1.3;white-space:normal;word-wrap:break-word;max-width:100%}.status-message-full.text-success[_ngcontent-%COMP%]{background:#28a7451f;border-left-color:#28a745;color:#155724!important;font-weight:600}.status-message-full.text-danger[_ngcontent-%COMP%]{background:#dc35451f;border-left-color:#dc3545;color:#721c24!important;font-weight:600}.device-name-text[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#2c3e50;white-space:normal;word-wrap:break-word;max-width:100%;line-height:1.3}.video-title-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500;color:#2c3e50;background:#28a74514;padding:4px 8px;border-radius:4px;border-left:3px solid #28a745;display:inline-block;white-space:normal;word-wrap:break-word;max-width:100%;line-height:1.3}.btn-sm[_ngcontent-%COMP%]{padding:3px 6px;font-size:.65rem;border-radius:4px;font-weight:500;transition:all .2s ease;min-width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;margin:0 1px}.btn-sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4)   .d-flex[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5)   .d-flex[_ngcontent-%COMP%]{gap:2px;justify-content:center;align-items:center}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4)   i[_ngcontent-%COMP%]:not(.status-dot), .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5)   i[_ngcontent-%COMP%]:not(.status-dot){font-size:.7rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5)   span[_ngcontent-%COMP%]{font-size:.65rem;font-weight:600}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:1rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000000a}.prev-button[_ngcontent-%COMP%], .next-button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:6px;font-weight:600;font-size:.75rem;transition:all .2s ease;background:linear-gradient(45deg,#3498db,#2980b9);color:#fff}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;color:#495057;background:#3498db1a;padding:4px 8px;border-radius:12px;white-space:nowrap}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:18%;min-width:120px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:8%;min-width:50px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:25%;min-width:180px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%;min-width:70px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10%;min-width:70px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:22%;min-width:160px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:7%;min-width:60px}@media (max-width: 1400px){.table[_ngcontent-%COMP%]{font-size:.7rem;min-width:750px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px 4px;font-size:.65rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 3px}.status-message-text[_ngcontent-%COMP%]{max-width:100px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{max-width:120px}}@media (max-width: 1200px){.table[_ngcontent-%COMP%]{font-size:.65rem;min-width:700px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 3px;font-size:.6rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px}.status-message-text[_ngcontent-%COMP%]{max-width:80px;font-size:.6rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{max-width:100px;font-size:.6rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{max-width:70px;font-size:.6rem}.btn-sm[_ngcontent-%COMP%]{padding:2px 4px;min-width:20px;height:20px}}@media (max-width: 992px){.table[_ngcontent-%COMP%]{font-size:.6rem;min-width:650px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px 2px;font-size:.55rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:3px 2px}.status-message-text[_ngcontent-%COMP%]{max-width:70px;font-size:.55rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{max-width:80px;font-size:.55rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{max-width:60px;font-size:.55rem}.pagination-controls[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}.prev-button[_ngcontent-%COMP%], .next-button[_ngcontent-%COMP%]{padding:4px 8px;font-size:.65rem}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.65rem;padding:3px 6px}}@media (max-width: 768px){.table[_ngcontent-%COMP%]{font-size:.55rem;min-width:600px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px 1px;font-size:.5rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px 1px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:35px}.status-message-text[_ngcontent-%COMP%]{max-width:60px;font-size:.5rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{max-width:70px;font-size:.5rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{max-width:50px;font-size:.5rem}.btn-sm[_ngcontent-%COMP%]{padding:1px 3px;min-width:18px;height:18px}.btn-sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.badge[_ngcontent-%COMP%]{font-size:.5rem;padding:1px 4px;min-width:16px}.status-dot[_ngcontent-%COMP%]{font-size:6px}.pagination-controls[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;padding:.5rem}.prev-button[_ngcontent-%COMP%], .next-button[_ngcontent-%COMP%]{width:100%;padding:6px 12px}}@media (max-width: 576px){.table[_ngcontent-%COMP%]{font-size:.5rem;min-width:550px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:2px 1px;font-size:.45rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:30px}.status-message-text[_ngcontent-%COMP%]{max-width:50px;font-size:.45rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3)   span[_ngcontent-%COMP%]{max-width:60px;font-size:.45rem}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{max-width:40px;font-size:.45rem}.btn-sm[_ngcontent-%COMP%]{padding:1px 2px;min-width:16px;height:16px}.btn-sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.5rem}.badge[_ngcontent-%COMP%]{font-size:.45rem;padding:1px 3px;min-width:14px}.status-dot[_ngcontent-%COMP%]{font-size:5px}}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]:after{content:"\\2190  Scroll horizontally to see more \\2192";display:block;text-align:center;padding:8px;background:#3498db1a;color:#3498db;font-size:.7rem;font-weight:500;border-top:1px solid rgba(52,152,219,.2)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.table-responsive[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease-out}.table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width: 480px){.table[_ngcontent-%COMP%]{min-width:500px}.table-responsive[_ngcontent-%COMP%]{margin:0 -15px;border-radius:0}}']})};function cl(d,i){if(d&1){let t=E();a(0,"button",10),C("click",function(){_(t);let c=h();return x(c.toggleEdit())}),l(1,"Edit Schedule"),r()}}function ml(d,i){d&1&&(a(0,"div",11)(1,"div",12)(2,"span",13),l(3,"Loading..."),r()()())}function pl(d,i){if(d&1&&(a(0,"div",14),l(1),r()),d&2){let t=h();m(),M(" ",t.error," ")}}function gl(d,i){if(d&1&&(a(0,"div",15),l(1),r()),d&2){let t=h();m(),M(" ",t.success," ")}}function ul(d,i){if(d&1&&(a(0,"option",40),l(1),r()),d&2){let t=i.$implicit;u("value",t._id),m(),M(" ",t.name," ")}}function fl(d,i){d&1&&(a(0,"div",41),l(1," Device is required "),r())}function hl(d,i){if(d&1){let t=E();a(0,"div",42)(1,"input",43),C("change",function(){let c=_(t).$implicit,g=h(3);return x(g.toggleAdvertisement(c._id))}),r(),a(2,"label",44),l(3),r()()}if(d&2){let t=i.$implicit,o=h(3);m(),u("id","ad_"+t._id)("checked",o.isAdvertisementSelected(t._id)),m(),u("for","ad_"+t._id),m(),M(" ",t.name," ")}}function bl(d,i){d&1&&(a(0,"div",41),l(1," Start time is required "),r())}function vl(d,i){d&1&&(a(0,"span"),l(1,"Play time is required"),r())}function wl(d,i){d&1&&(a(0,"span"),l(1,"Play time must be greater than 0"),r())}function _l(d,i){if(d&1&&(a(0,"div",41),y(1,vl,2,0,"span",19)(2,wl,2,0,"span",19),r()),d&2){let t,o,c=h(3);m(),u("ngIf",(t=c.updateForm.get("playTime"))==null||t.errors==null?null:t.errors.required),m(),u("ngIf",(o=c.updateForm.get("playTime"))==null||o.errors==null?null:o.errors.min)}}function xl(d,i){d&1&&(a(0,"div",41),l(1," Play mode is required "),r())}function Cl(d,i){if(d&1){let t=E();a(0,"form",20),C("ngSubmit",function(){_(t);let c=h(2);return x(c.updateSchedule())}),a(1,"div",1)(2,"div",21)(3,"label",22),l(4,"Device"),r(),a(5,"select",23)(6,"option",24),l(7,"Select Device"),r(),y(8,ul,2,2,"option",25),r(),y(9,fl,2,0,"div",26),r(),a(10,"div",21)(11,"label",22),l(12,"Advertisements"),r(),a(13,"div",16)(14,"div",27),y(15,hl,4,4,"div",28),r()()(),a(16,"div",21)(17,"label",22),l(18,"Start Time"),r(),f(19,"input",29),y(20,bl,2,0,"div",26),r(),a(21,"div",21)(22,"label",22),l(23,"Play Time (seconds)"),r(),f(24,"input",30),y(25,_l,3,2,"div",26),r(),a(26,"div",21)(27,"label",22),l(28,"Play Mode"),r(),a(29,"select",31)(30,"option",32),l(31,"Sequence"),r(),a(32,"option",33),l(33,"Random"),r()(),y(34,xl,2,0,"div",26),r(),a(35,"div",21)(36,"div",34),f(37,"input",35),a(38,"label",36),l(39,"Repeat"),r()()()(),a(40,"div",37)(41,"button",38),C("click",function(){_(t);let c=h(2);return x(c.toggleEdit())}),l(42,"Cancel"),r(),a(43,"button",39),l(44),r()()()}if(d&2){let t,o,c,g,b=h(2);u("formGroup",b.updateForm),m(8),u("ngForOf",b.devices),m(),u("ngIf",((t=b.updateForm.get("deviceId"))==null?null:t.touched)&&((t=b.updateForm.get("deviceId"))==null?null:t.invalid)),m(6),u("ngForOf",b.advertisements),m(5),u("ngIf",((o=b.updateForm.get("startTime"))==null?null:o.touched)&&((o=b.updateForm.get("startTime"))==null?null:o.invalid)),m(5),u("ngIf",((c=b.updateForm.get("playTime"))==null?null:c.touched)&&((c=b.updateForm.get("playTime"))==null?null:c.invalid)),m(9),u("ngIf",((g=b.updateForm.get("playMode"))==null?null:g.touched)&&((g=b.updateForm.get("playMode"))==null?null:g.invalid)),m(10),M(" ",b.loading?"Updating...":"Update Schedule"," ")}}function Ml(d,i){if(d&1&&(a(0,"video",51),f(1,"source",52),l(2," Your browser does not support the video tag. "),r()),d&2){let t=h().$implicit;m(),u("src",t.videoUrl,ze)}}function Pl(d,i){if(d&1&&(a(0,"tr")(1,"td"),l(2),r(),a(3,"td"),l(4),r(),a(5,"td"),l(6),r(),a(7,"td"),y(8,Ml,3,1,"video",50),r()()),d&2){let t=i.$implicit;m(2),T(t.name),m(2),T(t.description),m(2),T(t.orientation),m(2),u("ngIf",t.videoUrl)}}function yl(d,i){if(d&1&&(a(0,"div")(1,"div",45)(2,"div",46)(3,"h4"),l(4,"Device Information"),r(),a(5,"p")(6,"strong"),l(7,"Device Name:"),r(),l(8),r(),a(9,"p")(10,"strong"),l(11,"Description:"),r(),l(12),r()(),a(13,"div",46)(14,"h4"),l(15,"Schedule Information"),r(),a(16,"p")(17,"strong"),l(18,"Start Time:"),r(),l(19),q(20,"date"),r(),a(21,"p")(22,"strong"),l(23,"End Time:"),r(),l(24),q(25,"date"),r(),a(26,"p")(27,"strong"),l(28,"Play Mode:"),r(),l(29),r(),a(30,"p")(31,"strong"),l(32,"Repeat:"),r(),l(33),r()()(),a(34,"div",1)(35,"div",2)(36,"h4"),l(37,"Advertisements"),r(),a(38,"div",47)(39,"table",48)(40,"thead")(41,"tr")(42,"th"),l(43,"Name"),r(),a(44,"th"),l(45,"Description"),r(),a(46,"th"),l(47,"Orientation"),r(),a(48,"th"),l(49,"Video"),r()()(),a(50,"tbody"),y(51,Pl,9,4,"tr",49),r()()()()()()),d&2){let t=h(2);m(8),M(" ",t.schedule.deviceId==null?null:t.schedule.deviceId.name,""),m(4),M(" ",t.schedule.deviceId==null?null:t.schedule.deviceId.description,""),m(7),M(" ",Ne(20,7,t.schedule.startTime,"medium"),""),m(5),M(" ",Ne(25,10,t.schedule.endTime,"medium"),""),m(5),M(" ",t.schedule.playMode,""),m(4),M(" ",t.schedule.repeat?"Yes":"No",""),m(18),u("ngForOf",t.schedule.advertisementIds)}}function Ol(d,i){if(d&1&&(a(0,"div",16)(1,"div",17),y(2,Cl,45,8,"form",18)(3,yl,52,13,"div",19),r()()),d&2){let t=h();m(2),u("ngIf",t.isEditing),m(),u("ngIf",!t.isEditing)}}var an=class d{constructor(i,t,o,c,g){this.route=i;this.adminService=t;this.router=o;this.fb=c;this.authService=g;this.updateForm=this.fb.group({deviceId:["",Ze.required],advertisementIds:[[],Ze.required],startTime:["",Ze.required],playTime:["",[Ze.required,Ze.min(1)]],playMode:["sequence",Ze.required],repeat:[!1]})}schedule=null;loading=!1;error="";success="";schedulednewId="";devices=[];advertisements=[];updateForm;isEditing=!1;deviceId="";subscriptions=[];ngOnInit(){this.jibId(),this.loadScheduleDetails(),this.loadDevices(),this.loadAdvertisements()}jibId(){this.subscriptions.push(this.route.queryParams.subscribe(i=>{this.schedulednewId=i.scheduleId,console.log("scheduleId",this.schedulednewId)}))}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}loadScheduleDetails(){let i=this.schedulednewId;if(!i){this.error="Schedule ID not found";return}this.loading=!0,this.subscriptions.push(this.adminService.getScheduleById(i).subscribe({next:t=>{console.log(t),this.schedule=t.data,Array.isArray(this.schedule.advertisementIds)?this.schedule.advertisementIds=this.schedule.advertisementIds.filter(o=>!o.isDeleted):this.schedule.advertisementIds=[],this.populateForm(),this.loading=!1},error:t=>{this.error=t.error?.message||"Error loading schedule details",this.loading=!1}}))}loadDevices(){this.subscriptions.push(this.adminService.getDevices().subscribe({next:i=>{this.devices=i.data.filter(t=>t.isDeleted===!1),this.deviceId=i.data._id},error:i=>{console.error("Error loading devices:",i)}}))}loadAdvertisements(){let i=this.authService.userId;this.adminService.getAdvertisementsByUserId(i).subscribe({next:t=>{console.log("ADS",t),this.advertisements=t.data.filter(o=>o.isDeleted==!1)},error:t=>{console.error("Error loading advertisements:",t)}})}populateForm(){if(this.schedule){console.log("deviceID",this.schedule.deviceId);let i;try{let t=new Date(this.schedule.startTime);isNaN(t.getTime())?(i=new Date().toISOString().slice(0,16),console.warn("Invalid start time received, using current time as fallback")):i=t.toISOString().slice(0,16)}catch{i=new Date().toISOString().slice(0,16),console.warn("Error parsing start time, using current time as fallback")}this.updateForm.patchValue({deviceId:this.schedule.deviceId,advertisementIds:this.schedule.advertisementIds?.map(t=>t._id)||[],startTime:i,playTime:this.schedule.playTime,playMode:this.schedule.playMode||"sequence",repeat:this.schedule.repeat||!1})}}isAdvertisementSelected(i){return(this.updateForm.get("advertisementIds")?.value||[]).includes(i)}toggleAdvertisement(i){let t=this.updateForm.get("advertisementIds")?.value||[],o;t.includes(i)?o=t.filter(c=>c!==i):o=[...t,i],this.updateForm.patchValue({advertisementIds:o}),this.updateForm.get("advertisementIds")?.markAsTouched()}toggleEdit(){this.isEditing=!this.isEditing,this.isEditing||this.populateForm()}updateSchedule(){let i=this.schedulednewId,t=this.authService.userId;this.loading=!0;let o=this.updateForm.value;console.log(o);let c={deviceId:o.deviceId._id,advertisementIds:o.advertisementIds,userId:t,startTime:new Date(o.startTime).toISOString(),playTime:parseInt(o.playTime),playMode:o.playMode,repeat:o.repeat};this.subscriptions.push(this.adminService.updateSchedule(i,c).subscribe({next:g=>{this.success="Schedule updated successfully",this.schedule=g.data,this.loading=!1,this.isEditing=!1,this.loadScheduleDetails()},error:g=>{this.error=g.error?.message||"Error updating schedule",this.loading=!1}}))}goBack(){this.router.navigate(["/admin/Schedules"])}static \u0275fac=function(t){return new(t||d)(S(Be),S($),S(W),S(Ki),S(be))};static \u0275cmp=N({type:d,selectors:[["app-view-schedule"]],standalone:!1,decls:14,vars:5,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["class","btn btn-primary me-2",3,"click",4,"ngIf"],[1,"btn","btn-secondary",3,"click"],["class","text-center",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["class","card",4,"ngIf"],[1,"btn","btn-primary","me-2",3,"click"],[1,"text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],[1,"card"],[1,"card-body"],["class","mb-4",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"mb-4",3,"ngSubmit","formGroup"],[1,"col-md-6","mb-3"],[1,"form-label"],["formControlName","deviceId",1,"form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"card-body",2,"max-height","200px","overflow-y","auto"],["class","form-check",4,"ngFor","ngForOf"],["type","datetime-local","formControlName","startTime",1,"form-control"],["type","number","formControlName","playTime",1,"form-control"],["formControlName","playMode",1,"form-select"],["value","sequence"],["value","random"],[1,"form-check","mt-4"],["type","checkbox","formControlName","repeat","id","repeat",1,"form-check-input"],["for","repeat",1,"form-check-label"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"text-danger"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"row","mb-4"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["width","200","controls","",4,"ngIf"],["width","200","controls",""],["type","video/mp4",3,"src"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l(5,"Schedule Details"),r(),a(6,"div"),y(7,cl,2,0,"button",4),a(8,"button",5),C("click",function(){return o.goBack()}),l(9,"Back to List"),r()()(),y(10,ml,4,0,"div",6)(11,pl,2,1,"div",7)(12,gl,2,1,"div",8)(13,Ol,4,2,"div",9),r()()()),t&2&&(m(7),u("ngIf",!o.isEditing),m(3),u("ngIf",o.loading),m(),u("ngIf",o.error),m(),u("ngIf",o.success),m(),u("ngIf",!o.loading&&o.schedule))},dependencies:[H,R,ee,ae,se,Z,Zt,Ht,re,G,X,Hi,Zi,ct],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a}.card-body[_ngcontent-%COMP%]{padding:2rem}h4[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem}.table[_ngcontent-%COMP%]{margin-top:1rem}video[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 2px 4px #0000001a}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.form-check[_ngcontent-%COMP%]{margin-bottom:.5rem;padding:.5rem;border-radius:4px;transition:background-color .2s}.form-check[_ngcontent-%COMP%]:hover{background-color:#0000000d}.form-check-input[_ngcontent-%COMP%]{cursor:pointer}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;margin-left:.5rem;-webkit-user-select:none;user-select:none}.scrollable-checkboxes[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;padding-right:.5rem}.scrollable-checkboxes[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollable-checkboxes[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.scrollable-checkboxes[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:3px}.scrollable-checkboxes[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})};function Sl(d,i){if(d&1&&(a(0,"div",53),l(1),r()),d&2){let t=h();m(),M(" ",t.errorMessage," ")}}function kl(d,i){if(d&1&&(a(0,"div",54),l(1),r()),d&2){let t=h();m(),M(" ",t.successMessage," ")}}function Il(d,i){if(d&1){let t=E();a(0,"button",66),C("click",function(){_(t);let c=h().$implicit,g=h().$implicit,b=h();return x(b.changeRole(g._id,c))}),f(1,"i",42),l(2),q(3,"titlecase"),r()}if(d&2){let t=h().$implicit;m(2),M(" Change Role to ",ce(3,1,t)," ")}}function Al(d,i){if(d&1&&(st(0),y(1,Il,4,3,"button",75),lt()),d&2){let t=i.$implicit,o=h().$implicit;m(),u("ngIf",t!==o.role)}}function El(d,i){if(d&1){let t=E();a(0,"div",55)(1,"div",56)(2,"div",57)(3,"span",58),l(4),r()(),a(5,"div",59)(6,"div",60)(7,"button",61),f(8,"i",62),r(),a(9,"div",63)(10,"button",64),C("click",function(){let c=_(t).$implicit,g=h();return x(g.toggleUserStatus(c._id))}),f(11,"i",65),l(12),r(),a(13,"button",66),C("click",function(){let c=_(t).$implicit,g=h();return x(g.resetUserPassword(c._id,c.email))}),f(14,"i",67),l(15," Reset Password "),r(),a(16,"button",66),C("click",function(){let c=_(t).$implicit,g=h();return x(g.openEditModal(c))}),f(17,"i",68),l(18," Edit User "),r(),f(19,"div",69),y(20,Al,2,1,"ng-container",70),r()()()(),a(21,"div",71)(22,"div",72)(23,"div",73),f(24,"i",32),a(25,"span"),l(26),r()(),a(27,"div",73),f(28,"i",35),a(29,"span"),l(30),r()(),a(31,"div",73),f(32,"i",38),a(33,"span"),l(34),r()(),a(35,"div",73),f(36,"i",74),a(37,"span"),l(38),q(39,"titlecase"),r()()()()()}if(d&2){let t=i.$implicit,o=h();m(3),xe("active",t.isActive)("inactive",!t.isActive),m(),M(" ",t.isActive?"Active":"Inactive"," "),m(6),Ln("dropdown-item "+(t.isActive?"deactivate":"activate")),m(),xe("fa-lock",!t.isActive)("fa-unlock",t.isActive),m(),M(" ",t.isActive?"Deactivate User":"Activate User"," "),m(8),u("ngForOf",o.availableRoles),m(6),T(t.username),m(4),T(t.email),m(4),T(t.phoneNumber),m(3),Ln(o.getRoleBadgeClass(t.role)),m(),T(ce(39,19,t.role))}}function Dl(d,i){if(d&1&&(a(0,"option",76),l(1),q(2,"titlecase"),r()),d&2){let t=i.$implicit;u("value",t),m(),M(" ",ce(2,2,t)," ")}}function Tl(d,i){if(d&1&&(a(0,"div",77),l(1),r()),d&2){let t=h();m(),M(" ",t.errorMessage," ")}}function Vl(d,i){d&1&&f(0,"div",78)}var sn=class d{constructor(i,t){this.adminService=i;this.router=t}users=[];filteredUsers=[];searchTerm="";currentPage=1;itemsPerPage=5;totalPages=0;errorMessage="";successMessage="";availableRoles=["client","admin"];isEditModalOpen=!1;isSubmitting=!1;editUserObject={username:"",email:"",phoneNumber:"",role:"",isActive:!0};ngOnInit(){this.loadUsers()}loadUsers(){this.adminService.getUsers().subscribe(i=>{this.users=i.data||[],this.filteredUsers=[...this.users],this.calculatePagination()},i=>{this.errorMessage=i.error?.message||"Failed to load users. Please try again."})}toggleUserStatus(i){confirm("Are you sure you want to change this user's status?")&&this.adminService.toggleUserStatus(i).subscribe(()=>{this.loadUsers()},t=>{this.errorMessage=t.error?.message||"Failed to update user status."})}onSearch(){if(!this.searchTerm.trim())this.filteredUsers=[...this.users];else{let i=this.searchTerm.toLowerCase().trim();this.filteredUsers=this.users.filter(t=>t.username?.toLowerCase().includes(i)||t.email?.toLowerCase().includes(i)||t.phoneNumber?.toString().includes(i)||t.role?.toLowerCase().includes(i))}this.currentPage=1,this.calculatePagination()}calculatePagination(){this.totalPages=Math.ceil(this.filteredUsers.length/this.itemsPerPage)}getCurrentPageUsers(){let i=(this.currentPage-1)*this.itemsPerPage;return this.filteredUsers.slice(i,i+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}navigateToAddUser(){this.router.navigate(["/admin/addUser"])}deleteUser(i){confirm("Are you sure you want to delete this user?")&&this.adminService.deleteUser(i).subscribe(()=>{this.loadUsers()},t=>{this.errorMessage=t.error?.message||"Failed to delete user."})}getRoleBadgeClass(i){return i.toLowerCase()==="admin"?"badge bg-primary":"badge bg-secondary"}resetUserPassword(i,t){confirm(`Are you sure you want to reset the password for user with email ${t}?`)&&this.adminService.resetUserAccount({userId:i,email:t}).subscribe(()=>{this.successMessage="Password reset successful. User will receive new credentials via email.",setTimeout(()=>this.successMessage="",3e3)},o=>{this.errorMessage=o.error?.message||"Failed to reset password."})}changeRole(i,t){confirm(`Are you sure you want to change this user's role to ${t}?`)&&this.adminService.changeUserRole(i,t).subscribe(()=>{this.loadUsers(),this.successMessage=`User role successfully changed to ${t}`,setTimeout(()=>this.successMessage="",3e3)},o=>{this.errorMessage=o.error?.message||"Failed to change user role."})}openEditModal(i){this.editUserObject=j({},i),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editUserObject={username:"",email:"",phoneNumber:"",role:"",isActive:!0},this.errorMessage=""}updateUser(){if(!this.editUserObject._id){this.errorMessage="Invalid user data";return}this.isSubmitting=!0,this.errorMessage="",this.adminService.updateUser(this.editUserObject._id,this.editUserObject).subscribe({next:i=>{this.isSubmitting=!1,this.closeEditModal(),this.loadUsers(),this.successMessage="User updated successfully",setTimeout(()=>{this.successMessage=""},3e3)},error:i=>{this.isSubmitting=!1,this.errorMessage=i.error?.message||"Failed to update user"}})}static \u0275fac=function(t){return new(t||d)(S($),S(W))};static \u0275cmp=N({type:d,selectors:[["app-list-users"]],standalone:!1,decls:74,vars:22,consts:[["editForm","ngForm"],[1,"container"],[1,"list-title"],[1,"row","g-3","align-items-center"],[1,"col-md-6"],[1,"input-group"],["type","text","placeholder","Search users...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],[1,"col-md-6","text-md-end"],[1,"add-user-btn",3,"click"],[1,"fas","fa-user-plus","me-2"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"users-grid"],["class","user-card",4,"ngFor","ngForOf"],[1,"pagination-controls"],[1,"btn","btn-outline-primary","btn-sm",3,"click","disabled"],[1,"fas","fa-chevron-left","me-1"],[1,"page-info"],[1,"fas","fa-chevron-right","ms-1"],[1,"modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-user-edit"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","username"],[1,"input-wrapper"],["type","text","id","username","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-user"],["for","editEmail"],["type","email","id","editEmail","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-envelope"],["for","editPhone"],["type","tel","id","editPhone","name","phoneNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-phone"],["for","editRole"],["id","editRole","name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-user-shield"],[1,"form-check"],["type","checkbox","id","editStatus","name","isActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editStatus",1,"form-check-label"],["class","alert alert-danger",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-save"],["class","modal-backdrop fade show",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"success-message"],[1,"user-card"],[1,"user-card-header"],[1,"user-status"],[1,"status-badge"],[1,"action-dropdown"],["ngbDropdown","","container","body",1,"d-inline-block"],["id","actionDropdown","ngbDropdownToggle","",1,"action-btn"],[1,"fas","fa-ellipsis-v"],["ngbDropdownMenu","","aria-labelledby","actionDropdown",1,"dropdown-menu"],["ngbDropdownItem","",3,"click"],[1,"fas"],["ngbDropdownItem","",1,"dropdown-item",3,"click"],[1,"fas","fa-key"],[1,"fas","fa-edit"],[1,"dropdown-divider"],[4,"ngFor","ngForOf"],[1,"user-card-content"],[1,"user-info"],[1,"info-item"],[1,"fas","fa-user-tag"],["ngbDropdownItem","","class","dropdown-item",3,"click",4,"ngIf"],[3,"value"],[1,"alert","alert-danger"],[1,"modal-backdrop","fade","show"]],template:function(t,o){if(t&1){let c=E();a(0,"div",1)(1,"h2",2),l(2,"Users Management"),r(),a(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),A("ngModelChange",function(b){return _(c),I(o.searchTerm,b)||(o.searchTerm=b),x(b)}),C("input",function(){return _(c),x(o.onSearch())}),r()()(),a(7,"div",7)(8,"button",8),C("click",function(){return _(c),x(o.navigateToAddUser())}),f(9,"i",9),l(10,"Add User "),r()()(),y(11,Sl,2,1,"div",10)(12,kl,2,1,"div",11),a(13,"div",12),y(14,El,40,21,"div",13),r(),a(15,"div",14)(16,"button",15),C("click",function(){return _(c),x(o.previousPage())}),f(17,"i",16),l(18," Previous "),r(),a(19,"span",17),l(20),r(),a(21,"button",15),C("click",function(){return _(c),x(o.nextPage())}),l(22," Next "),f(23,"i",18),r()()(),a(24,"div",19)(25,"div",20)(26,"div",21)(27,"div",22)(28,"h5",23),f(29,"i",24),l(30," Edit User "),r(),a(31,"button",25),C("click",function(){return _(c),x(o.closeEditModal())}),r()(),a(32,"div",26)(33,"form",27,0),C("ngSubmit",function(){return _(c),x(o.updateUser())}),a(35,"div",28)(36,"label",29),l(37,"Username"),r(),a(38,"div",30)(39,"input",31),A("ngModelChange",function(b){return _(c),I(o.editUserObject.username,b)||(o.editUserObject.username=b),x(b)}),r(),f(40,"i",32),r()(),a(41,"div",28)(42,"label",33),l(43,"Email"),r(),a(44,"div",30)(45,"input",34),A("ngModelChange",function(b){return _(c),I(o.editUserObject.email,b)||(o.editUserObject.email=b),x(b)}),r(),f(46,"i",35),r()(),a(47,"div",28)(48,"label",36),l(49,"Phone Number"),r(),a(50,"div",30)(51,"input",37),A("ngModelChange",function(b){return _(c),I(o.editUserObject.phoneNumber,b)||(o.editUserObject.phoneNumber=b),x(b)}),r(),f(52,"i",38),r()(),a(53,"div",28)(54,"label",39),l(55,"Role"),r(),a(56,"div",30)(57,"select",40),A("ngModelChange",function(b){return _(c),I(o.editUserObject.role,b)||(o.editUserObject.role=b),x(b)}),y(58,Dl,3,4,"option",41),r(),f(59,"i",42),r()(),a(60,"div",28)(61,"div",43)(62,"input",44),A("ngModelChange",function(b){return _(c),I(o.editUserObject.isActive,b)||(o.editUserObject.isActive=b),x(b)}),r(),a(63,"label",45),l(64," Active Account "),r()()(),y(65,Tl,2,1,"div",46),a(66,"div",47)(67,"button",48),C("click",function(){return _(c),x(o.closeEditModal())}),f(68,"i",49),l(69," Cancel "),r(),a(70,"button",50),f(71,"i",51),l(72),r()()()()()()(),y(73,Vl,1,0,"div",52)}if(t&2){let c=ye(34);m(6),k("ngModel",o.searchTerm),m(5),u("ngIf",o.errorMessage),m(),u("ngIf",o.successMessage),m(2),u("ngForOf",o.getCurrentPageUsers()),m(2),u("disabled",o.currentPage===1),m(4),Oe("Page ",o.currentPage," of ",o.totalPages,""),m(),u("disabled",o.currentPage===o.totalPages),m(3),at("display",o.isEditModalOpen?"block":"none"),xe("show",o.isEditModalOpen),m(15),k("ngModel",o.editUserObject.username),m(6),k("ngModel",o.editUserObject.email),m(6),k("ngModel",o.editUserObject.phoneNumber),m(6),k("ngModel",o.editUserObject.role),m(),u("ngForOf",o.availableRoles),m(4),k("ngModel",o.editUserObject.isActive),m(3),u("ngIf",o.errorMessage),m(5),u("disabled",!c.form.valid||o.isSubmitting),m(2),M(" ",o.isSubmitting?"Saving...":"Save Changes"," "),m(),u("ngIf",o.isEditModalOpen)}},dependencies:[H,R,ee,ae,se,Z,Ht,re,G,X,le,J,oe,ro,oo,io,to,no,he],styles:['.container[_ngcontent-%COMP%]{padding:2rem;max-width:1440px;margin:0 auto}.list-title[_ngcontent-%COMP%]{color:#1a237e;font-size:2rem;font-weight:700;margin-bottom:2rem;position:relative;padding-bottom:.5rem}.list-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:4px;background:linear-gradient(90deg,#1a237e,#3949ab);border-radius:2px}.row.g-3[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 2px 12px #00000014;margin-bottom:2rem}.search-input[_ngcontent-%COMP%]{border:2px solid #e3e8ef;border-radius:10px;padding:.75rem 1rem;transition:all .3s ease;font-size:.95rem}.search-input[_ngcontent-%COMP%]:focus{border-color:#3949ab;box-shadow:0 0 0 4px #3949ab1a;outline:none}.add-user-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#1a237e,#3949ab);border:none;border-radius:10px;color:#fff;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease;display:inline-flex;align-items:center;gap:.5rem}.add-user-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1a237e33}.users-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:2rem 0}.user-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 20px #0000000f;overflow:visible;transition:all .3s ease;height:280px;display:flex;flex-direction:column;border:1px solid rgba(0,0,0,.08);position:relative}.user-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f}.user-card-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;background:#f8faff;border-bottom:1px solid #e3e8ef;display:flex;justify-content:space-between;align-items:center}.status-badge[_ngcontent-%COMP%]{padding:.4rem 1rem;border-radius:20px;font-size:.85rem;font-weight:600;letter-spacing:.3px}.status-badge.active[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.user-card-content[_ngcontent-%COMP%]{padding:1.25rem;flex-grow:1}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#37474f;font-size:.95rem}.info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1.25rem;color:#3949ab;font-size:1rem}[class*=role-badge][_ngcontent-%COMP%]{padding:.35rem 1rem;border-radius:20px;font-size:.85rem;font-weight:600;background:#e8eaf6;color:#1a237e}.action-btn[_ngcontent-%COMP%]{background-color:#f5f7fa;border:1px solid #e3e8ef;color:#37474f;padding:.5rem;border-radius:8px;cursor:pointer;transition:all .2s ease;width:32px;height:32px;display:flex;align-items:center;justify-content:center;position:relative;z-index:99}.action-btn[_ngcontent-%COMP%]:hover{background-color:#e3e8ef;color:#1a237e}.action-dropdown[_ngcontent-%COMP%]{position:relative;z-index:100}.dropdown-menu[_ngcontent-%COMP%]{padding:.75rem;border-radius:12px;box-shadow:0 10px 30px #00000040,0 0 0 1px #0000000d;border:none;min-width:220px;right:0;left:auto!important;margin-top:.5rem;background:#fffffffa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);z-index:1050!important;position:absolute!important;transform-origin:top right;animation:_ngcontent-%COMP%_dropdownFadeIn .2s ease}@keyframes _ngcontent-%COMP%_dropdownFadeIn{0%{opacity:0;transform:scale(.95) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.dropdown-item[_ngcontent-%COMP%]{padding:.85rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.75rem;color:#37474f;font-size:.95rem;font-weight:500;transition:all .2s ease;white-space:nowrap;z-index:1051;margin-bottom:.25rem}.dropdown-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#3949ab1a;color:#1a237e;transform:translate(2px)}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#3949ab;font-size:1rem;width:20px;text-align:center}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#e3e8ef;margin:.5rem 0;opacity:.7}.dropdown-item.activate[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2e7d32}.dropdown-item.deactivate[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c62828}.dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0000001a;z-index:1040;pointer-events:none}.dropdown-menu.show[_ngcontent-%COMP%] + .dropdown-backdrop[_ngcontent-%COMP%]{display:block}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;margin-top:2rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 12px #00000014}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;border:2px solid #3949ab;background:#fff;color:#3949ab;font-weight:600;transition:all .3s ease}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not([disabled]){background:#3949ab;color:#fff}.pagination-controls[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-weight:600;color:#37474f}.success-message[_ngcontent-%COMP%], .alert-danger[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:12px;margin:1rem 0;font-weight:500;animation:_ngcontent-%COMP%_slideIn .3s ease}.success-message[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.alert-danger[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border:1px solid #ffcdd2}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-10px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 1200px){.users-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem}.users-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.user-card[_ngcontent-%COMP%]{height:300px}}@media (max-width: 576px){.list-title[_ngcontent-%COMP%]{font-size:1.75rem}.users-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.row.g-3[_ngcontent-%COMP%]{padding:1rem}.user-card[_ngcontent-%COMP%]{height:320px}}@keyframes _ngcontent-%COMP%_dropdownFadeUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.dropdown-menu.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropdownFadeUp .2s ease}.modal-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.modal-title[_ngcontent-%COMP%]{color:#495057;font-size:1.25rem}.modal-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;color:#6c757d}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6c757d}.form-control[_ngcontent-%COMP%]{padding-right:30px}.form-check[_ngcontent-%COMP%]{margin-top:1rem}.modal-footer[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;padding:1rem}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0062cc}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.alert[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}.d-inline-block[_ngcontent-%COMP%]{position:relative}[ngbDropdown][_ngcontent-%COMP%]{position:static}.dropdown-item[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.75rem;color:#37474f;font-size:.95rem;transition:all .2s ease;white-space:nowrap;z-index:1051}']})};function Ll(d,i){if(d&1&&(a(0,"div",28),f(1,"i",29),l(2),r()),d&2){let t=h();m(2),M(" ",t.successMessage," ")}}function Ul(d,i){if(d&1&&(a(0,"div",30),f(1,"i",31),l(2),r()),d&2){let t=h();m(2),M(" ",t.errorMessage," ")}}function zl(d,i){if(d&1&&(a(0,"option",32),l(1),q(2,"titlecase"),r()),d&2){let t=i.$implicit;u("value",t),m(),M(" ",ce(2,2,t)," ")}}function Fl(d,i){d&1&&(a(0,"span"),l(1,"Add User"),r())}function jl(d,i){d&1&&f(0,"div",33)}var ln=class d{constructor(i,t){this.adminService=i;this.router=t}userObject={username:"",email:"",phoneNumber:"",role:"client"};roles=["client","admin"];isSubmitting=!1;successMessage="";errorMessage="";addUser(){this.isSubmitting=!0,this.successMessage="",this.errorMessage="",this.adminService.createClient(this.userObject).subscribe(i=>{console.log("User created:",i),this.successMessage="User created successfully! Login credentials have been sent to the user's email.",this.isSubmitting=!1,this.userObject={username:"",email:"",phoneNumber:"",role:"client"},setTimeout(()=>{this.navigateToList()},2e3)},i=>{console.error("Error creating user:",i),this.errorMessage=i.error?.message||"Failed to create user. Please try again.",this.isSubmitting=!1})}navigateToList(){this.router.navigate(["/admin/users"])}static \u0275fac=function(t){return new(t||d)(S($),S(W))};static \u0275cmp=N({type:d,selectors:[["app-add-user"]],standalone:!1,decls:38,vars:10,consts:[["userForm","ngForm"],[1,"form-container"],[1,"form-card"],[1,"back-button"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"form-title"],[1,"fas","fa-user-plus"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","placeholder","Enter full name",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-user"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter email address",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-envelope"],["for","phone"],["type","tel","id","phone","name","phoneNumber","required","","placeholder","Enter phone number",1,"form-control",3,"ngModelChange","ngModel"],[1,"fas","fa-phone"],["for","role"],["id","role","name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-user-shield"],["type","submit",1,"btn-submit",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["role","alert",1,"alert","alert-success"],[1,"fas","fa-check-circle"],["role","alert",1,"alert","alert-danger"],[1,"fas","fa-exclamation-circle"],[3,"value"],[1,"spinner"]],template:function(t,o){if(t&1){let c=E();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),C("click",function(){return _(c),x(o.navigateToList())}),f(4,"i",5),a(5,"span"),l(6,"Back to List"),r()()(),a(7,"h2",6),f(8,"i",7),l(9," Add New User "),r(),y(10,Ll,3,1,"div",8)(11,Ul,3,1,"div",9),a(12,"form",10,0),C("ngSubmit",function(){return _(c),x(o.addUser())}),a(14,"div",11)(15,"label",12),l(16,"Full Name"),r(),a(17,"input",13),A("ngModelChange",function(b){return _(c),I(o.userObject.username,b)||(o.userObject.username=b),x(b)}),r(),f(18,"i",14),r(),a(19,"div",11)(20,"label",15),l(21,"Email Address"),r(),a(22,"input",16),A("ngModelChange",function(b){return _(c),I(o.userObject.email,b)||(o.userObject.email=b),x(b)}),r(),f(23,"i",17),r(),a(24,"div",11)(25,"label",18),l(26,"Phone Number"),r(),a(27,"input",19),A("ngModelChange",function(b){return _(c),I(o.userObject.phoneNumber,b)||(o.userObject.phoneNumber=b),x(b)}),r(),f(28,"i",20),r(),a(29,"div",11)(30,"label",21),l(31,"Role"),r(),a(32,"select",22),A("ngModelChange",function(b){return _(c),I(o.userObject.role,b)||(o.userObject.role=b),x(b)}),y(33,zl,3,4,"option",23),r(),f(34,"i",24),r(),a(35,"button",25),y(36,Fl,2,0,"span",26)(37,jl,1,0,"div",27),r()()()()}if(t&2){let c=ye(13);m(10),u("ngIf",o.successMessage),m(),u("ngIf",o.errorMessage),m(6),k("ngModel",o.userObject.username),m(5),k("ngModel",o.userObject.email),m(5),k("ngModel",o.userObject.phoneNumber),m(5),k("ngModel",o.userObject.role),m(),u("ngForOf",o.roles),m(2),u("disabled",!c.form.valid||o.isSubmitting),m(),u("ngIf",!o.isSubmitting),m(),u("ngIf",o.isSubmitting)}},dependencies:[H,R,ee,ae,se,Z,re,G,X,le,J,oe,he],styles:[`.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.form-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:20px;box-shadow:0 15px 35px #0003;padding:40px;width:100%;max-width:550px;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.form-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,#ffffff1a,#fff3);pointer-events:none;border-radius:20px}.back-button[_ngcontent-%COMP%]{margin-bottom:30px}.btn-back[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 24px;border-radius:50px;font-size:1rem;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px;box-shadow:0 4px 15px #0003}.btn-back[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0000004d}.form-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2d3748;margin-bottom:30px;text-align:center;display:flex;align-items:center;justify-content:center;gap:12px}.form-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4c1d95;font-size:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:25px;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:1rem;font-weight:600;color:#4a5568;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 20px;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;transition:all .3s ease;background:#ffffffe6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#6a11cb;box-shadow:0 0 0 3px #6a11cb1a;outline:none}.form-group[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:15px;top:45px;color:#a0aec0}.form-group[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:40px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%23a0aec0' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center}.btn-submit[_ngcontent-%COMP%]{width:100%;padding:14px 30px;background:linear-gradient(135deg,#6a11cb,#2575fc);color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #6a11cb66;position:relative;overflow:hidden}.btn-submit[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #6a11cb99}.btn-submit[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-submit[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#cbd5e0,#a0aec0);cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}.alert[_ngcontent-%COMP%]{padding:15px 20px;border-radius:12px;margin-bottom:20px;display:flex;align-items:center;gap:10px;animation:_ngcontent-%COMP%_slideDown .4s ease-out}.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#84fab0,#8fd3f4);color:#1a4731;border:none}.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#feb692,#ea5455);color:#fff;border:none}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.form-card[_ngcontent-%COMP%]{padding:30px 20px}.form-title[_ngcontent-%COMP%]{font-size:1.75rem}.btn-submit[_ngcontent-%COMP%]{padding:12px 24px}}.form-group[_ngcontent-%COMP%]{position:relative}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-25px) scale(.8);color:#6a11cb}.form-group[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%]{border-color:#6a11cb}.form-group[_ngcontent-%COMP%]:focus-within{transform:scale(1.01)}`]})};function Nl(d,i){if(d&1&&(a(0,"div",29),f(1,"i",30),l(2),r()),d&2){let t=h();m(2),M(" ",t.successMessage," ")}}function Bl(d,i){if(d&1&&(a(0,"div",31),f(1,"i",32),l(2),r()),d&2){let t=h();m(2),M(" ",t.errorMessage," ")}}function Rl(d,i){if(d&1&&(st(0),a(1,"button",33),f(2,"i",34),l(3),r(),lt()),d&2){let t=h(),o=ye(8);m(),u("disabled",!o.form.valid||t.isSubmitting),m(2),M(" ",t.isSubmitting?"Saving...":"Save Changes"," ")}}function Wl(d,i){if(d&1&&(a(0,"div",29),f(1,"i",30),l(2),r()),d&2){let t=h(2);m(2),M(" ",t.successMessage," ")}}function $l(d,i){if(d&1&&(a(0,"div",31),f(1,"i",32),l(2),r()),d&2){let t=h(2);m(2),M(" ",t.errorMessage," ")}}function Yl(d,i){d&1&&(st(0),f(1,"i",34),l(2," Update Password "),lt())}function ql(d,i){d&1&&(st(0),f(1,"i",45),l(2," Updating... "),lt())}function Hl(d,i){if(d&1){let t=E();a(0,"div",35)(1,"form",7,1),C("ngSubmit",function(){_(t);let c=h();return x(c.resetPassword())}),a(3,"div",11)(4,"label",36),l(5,"Current Password"),r(),a(6,"div",37)(7,"input",38),A("ngModelChange",function(c){_(t);let g=h();return I(g.currentPassword,c)||(g.currentPassword=c),x(c)}),r()()(),a(8,"div",11)(9,"label",39),l(10,"New Password"),r(),a(11,"div",37)(12,"input",40),A("ngModelChange",function(c){_(t);let g=h();return I(g.newPassword,c)||(g.newPassword=c),x(c)}),r()()(),a(13,"div",11)(14,"label",41),l(15,"Confirm New Password"),r(),a(16,"div",37)(17,"input",42),A("ngModelChange",function(c){_(t);let g=h();return I(g.confirmPassword,c)||(g.confirmPassword=c),x(c)}),r()()(),y(18,Wl,3,1,"div",5)(19,$l,3,1,"div",6),a(20,"div",43)(21,"button",44),y(22,Yl,3,0,"ng-container",25)(23,ql,3,0,"ng-container",25),r()()()()}if(d&2){let t=ye(2),o=h();m(7),k("ngModel",o.currentPassword),u("disabled",o.isChangingPassword),m(5),k("ngModel",o.newPassword),u("disabled",o.isChangingPassword),m(5),k("ngModel",o.confirmPassword),u("disabled",o.isChangingPassword),m(),u("ngIf",o.successMessage),m(),u("ngIf",o.errorMessage),m(2),u("disabled",!t.form.valid||o.isChangingPassword),m(),u("ngIf",!o.isChangingPassword),m(),u("ngIf",o.isChangingPassword)}}var dn=class d{constructor(i,t,o){this.adminService=i;this.authService=t;this.router=o}userProfile={name:"",email:"",phoneNumber:"",role:""};isEditing=!1;successMessage="";errorMessage="";isSubmitting=!1;currentPassword="";newPassword="";confirmPassword="";isChangingPassword=!1;showPasswordForm=!1;ngOnInit(){this.loadUserProfile()}loadUserProfile(){this.adminService.getCurrentUserProfile().subscribe(i=>{if(i.success&&i.data){let t=i.data;this.userProfile={name:t.username,email:t.email,phoneNumber:t.phoneNumber||"",role:t.role}}},i=>{this.errorMessage="Failed to load profile data",i.status===401&&this.router.navigate(["/login"])})}resetPassword(){if(!this.validatePasswordForm())return;this.isChangingPassword=!0,this.errorMessage="",this.successMessage="";let i=this.authService.userId;this.authService.changePassword({userId:i,currentPassword:this.currentPassword,newPassword:this.newPassword}).subscribe({next:t=>{this.successMessage="Password changed successfully",this.isChangingPassword=!1,this.showPasswordForm=!1,this.currentPassword="",this.newPassword="",this.confirmPassword="",setTimeout(()=>{this.successMessage=""},5e3)},error:t=>{this.isChangingPassword=!1,this.errorMessage=t.error?.message||"Failed to change password",setTimeout(()=>{this.errorMessage=""},5e3)}})}validatePasswordForm(){return!this.currentPassword||!this.newPassword||!this.confirmPassword?(this.errorMessage="All password fields are required",!1):this.newPassword!==this.confirmPassword?(this.errorMessage="New password and confirmation do not match",!1):this.newPassword.length<8?(this.errorMessage="New password must be at least 8 characters long",!1):!0}togglePasswordForm(){this.showPasswordForm=!this.showPasswordForm,this.showPasswordForm||(this.currentPassword="",this.newPassword="",this.confirmPassword="",this.errorMessage="",this.successMessage="")}toggleEdit(){this.isEditing=!this.isEditing,this.isEditing||this.loadUserProfile()}updateProfile(){let i=this.authService.userId;this.isSubmitting=!0,this.successMessage="",this.errorMessage="";let t={userId:i,username:this.userProfile.name,email:this.userProfile.email,phoneNumber:this.userProfile.phoneNumber};this.adminService.updateProfile(t).subscribe(o=>{o.success?(this.successMessage=o.message||"Profile updated successfully!",this.isSubmitting=!1,this.isEditing=!1,this.loadUserProfile()):(this.errorMessage=o.message||"Update failed",this.isSubmitting=!1)},o=>{this.errorMessage=o.error?.message||"Failed to update profile",this.isSubmitting=!1})}goBack(){this.router.navigate(["/admin/Schedules"])}static \u0275fac=function(t){return new(t||d)(S($),S(be),S(W))};static \u0275cmp=N({type:d,selectors:[["app-profile"]],standalone:!1,decls:43,vars:15,consts:[["profileForm","ngForm"],["passwordForm","ngForm"],[1,"profile-container"],[1,"profile-header"],[1,"fas","fa-user-circle"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"profile-content"],[1,"role-badge"],[1,"fas","fa-user-tag"],[1,"form-group"],["for","name"],[1,"input-wrapper"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"fas","fa-user"],["for","email"],["type","email","id","email","name","email",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"fas","fa-envelope"],["for","phone"],["type","tel","id","phone","name","phoneNumber","required","",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"fas","fa-phone"],[1,"action-buttons"],["type","button",1,"btn-edit",3,"click"],[1,"fas",3,"ngClass"],[4,"ngIf"],[1,"password-section"],[1,"btn","btn-secondary",3,"click"],["class","password-form",4,"ngIf"],[1,"alert","alert-success"],[1,"fas","fa-check-circle"],[1,"alert","alert-danger"],[1,"fas","fa-exclamation-circle"],["type","submit",1,"btn-save",3,"disabled"],[1,"fas","fa-save"],[1,"password-form"],["for","currentPassword"],[1,"input-group"],["type","password","id","currentPassword","name","currentPassword","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas","fa-spinner","fa-spin"]],template:function(t,o){if(t&1){let c=E();a(0,"div",2)(1,"div",3)(2,"h2"),f(3,"i",4),l(4," My Profile"),r()(),y(5,Nl,3,1,"div",5)(6,Bl,3,1,"div",6),a(7,"form",7,0),C("ngSubmit",function(){return _(c),x(o.updateProfile())}),a(9,"div",8)(10,"div",9),f(11,"i",10),l(12),r(),a(13,"div",11)(14,"label",12),l(15,"Username"),r(),a(16,"div",13)(17,"input",14),A("ngModelChange",function(b){return _(c),I(o.userProfile.name,b)||(o.userProfile.name=b),x(b)}),r(),f(18,"i",15),r()(),a(19,"div",11)(20,"label",16),l(21,"Email"),r(),a(22,"div",13)(23,"input",17),A("ngModelChange",function(b){return _(c),I(o.userProfile.email,b)||(o.userProfile.email=b),x(b)}),r(),f(24,"i",18),r()(),a(25,"div",11)(26,"label",19),l(27,"Phone Number"),r(),a(28,"div",13)(29,"input",20),A("ngModelChange",function(b){return _(c),I(o.userProfile.phoneNumber,b)||(o.userProfile.phoneNumber=b),x(b)}),r(),f(30,"i",21),r()(),a(31,"div",22)(32,"button",23),C("click",function(){return _(c),x(o.toggleEdit())}),f(33,"i",24),l(34),r(),y(35,Rl,4,2,"ng-container",25),r()()(),a(36,"div",26)(37,"h3"),l(38,"Password Management"),r(),a(39,"button",27),C("click",function(){return _(c),x(o.togglePasswordForm())}),f(40,"i",24),l(41),r(),y(42,Hl,24,11,"div",28),r()()}t&2&&(m(5),u("ngIf",o.successMessage),m(),u("ngIf",o.errorMessage),m(6),M(" ",o.userProfile.role," "),m(5),k("ngModel",o.userProfile.name),u("readonly",!o.isEditing),m(6),k("ngModel",o.userProfile.email),u("readonly",!o.isEditing),m(6),k("ngModel",o.userProfile.phoneNumber),u("readonly",!o.isEditing),m(4),u("ngClass",o.isEditing?"fa-times":"fa-edit"),m(),M(" ",o.isEditing?"Cancel":"Edit Profile"," "),m(),u("ngIf",o.isEditing),m(5),u("ngClass",o.showPasswordForm?"fa-times":"fa-key"),m(),M(" ",o.showPasswordForm?"Cancel":"Change Password"," "),m(),u("ngIf",o.showPasswordForm))},dependencies:[De,R,ee,Z,G,X,le,J,oe],styles:[".profile-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2.5rem;background:#fff;border-radius:15px;box-shadow:0 8px 30px #0000001f}.profile-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;text-align:center}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d3748;font-size:2rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:1rem}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.2rem;color:#4299e1}.profile-content[_ngcontent-%COMP%]{position:relative}.role-badge[_ngcontent-%COMP%]{position:absolute;top:-15px;right:0;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:500;display:flex;align-items:center;gap:.5rem;box-shadow:0 4px 6px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:2rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;font-weight:500;color:#4a5568;margin-bottom:.5rem}.input-wrapper[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem 1rem;border:2px solid #e2e8f0;border-radius:10px;font-size:1rem;transition:all .3s ease;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#4299e1;box-shadow:0 0 0 3px #4299e126;outline:none}.form-control[_ngcontent-%COMP%]:read-only{background-color:#f7fafc;border-color:#edf2f7}.input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#a0aec0}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;justify-content:flex-end}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-reset[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.btn-edit[_ngcontent-%COMP%]{background:#4299e1;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#3182ce;transform:translateY(-2px)}.btn-save[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background:#38a169;transform:translateY(-2px)}.btn-reset[_ngcontent-%COMP%]{background:#f56565;color:#fff}.btn-reset[_ngcontent-%COMP%]:hover{background:#e53e3e;transform:translateY(-2px)}.alert[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1.5rem;border-radius:8px;display:flex;align-items:center;gap:.5rem}.alert-success[_ngcontent-%COMP%]{background-color:#c6f6d5;color:#2f855a;border:1px solid #9ae6b4}.alert-danger[_ngcontent-%COMP%]{background-color:#fed7d7;color:#c53030;border:1px solid #feb2b2}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none!important}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-reset[_ngcontent-%COMP%]{width:100%;justify-content:center}.role-badge[_ngcontent-%COMP%]{position:relative;top:0;margin-bottom:1.5rem;justify-content:center}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-control[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-reset[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.password-section[_ngcontent-%COMP%]{margin-top:2rem;padding:1.5rem;background:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.password-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#2c3e50}.password-form[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1.5rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000000d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#495057;font-weight:500}.input-group[_ngcontent-%COMP%]{position:relative}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#2c3e50;box-shadow:0 0 0 .2rem #2c3e5040;outline:none}.form-control[_ngcontent-%COMP%]:disabled{background-color:#e9ecef;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;align-items:center;gap:.5rem}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;border-color:#c3e6cb;color:#155724}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:1rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:4px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]{background-color:#2c3e50;color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#34495e}.btn-secondary[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057;border:1px solid #ced4da}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dee2e6}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.fas[_ngcontent-%COMP%]{font-size:1rem}.fa-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var Zl=[{path:"",component:Kt,children:[{path:"ads",component:Xt},{path:"newAds",component:Jt},{path:"archivedAds",component:en},{path:"addDevices",component:tn},{path:"Devices",component:wt},{path:"Devices/:userId",component:wt},{path:"archivedDevices",component:_t},{path:"archivedDevices/:userId",component:_t},{path:"Makeschedule",component:nn},{path:"Schedules",component:rn},{path:"schedule/view",component:an},{path:"",redirectTo:"Schedules",pathMatch:"full"},{path:"users",component:sn},{path:"addUser",component:ln},{path:"profile",component:dn}]}],cn=class d{static \u0275fac=function(t){return new(t||d)};static \u0275mod=Rt({type:d});static \u0275inj=Ft({imports:[vt.forChild(Zl),vt]})};var mo=class d{static \u0275fac=function(t){return new(t||d)};static \u0275mod=Rt({type:d});static \u0275inj=Ft({providers:[$],imports:[Ri,cn,Qi,vt,Xi,Wi,so,ao]})};export{mo as AdminModule};
